---
title: ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°é—®é¢˜
date: 2025-02-11
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°é—®é¢˜](https://leetcode.cn/problems/russian-doll-envelopes/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`æ•°ç»„` `äºŒåˆ†æŸ¥æ‰¾` `åŠ¨æ€è§„åˆ’` `æ’åº`  
**ğŸ”´ éš¾åº¦**ï¼š`å›°éš¾`  

ç»™ä½ ä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ envelopes ï¼Œå…¶ä¸­ envelopes[i] = [wi, hi] ï¼Œè¡¨ç¤ºç¬¬ i ä¸ªä¿¡å°çš„å®½åº¦å’Œé«˜åº¦ã€‚

å½“å¦ä¸€ä¸ªä¿¡å°çš„å®½åº¦å’Œé«˜åº¦éƒ½æ¯”è¿™ä¸ªä¿¡å°å¤§çš„æ—¶å€™ï¼Œè¿™ä¸ªä¿¡å°å°±å¯ä»¥æ”¾è¿›å¦ä¸€ä¸ªä¿¡å°é‡Œï¼Œå¦‚åŒä¿„ç½—æ–¯å¥—å¨ƒä¸€æ ·ã€‚

è¯·è®¡ç®— æœ€å¤šèƒ½æœ‰å¤šå°‘ä¸ª ä¿¡å°èƒ½ç»„æˆä¸€ç»„"ä¿„ç½—æ–¯å¥—å¨ƒ"ä¿¡å°ï¼ˆå³å¯ä»¥æŠŠä¸€ä¸ªä¿¡å°æ”¾åˆ°å¦ä¸€ä¸ªä¿¡å°é‡Œé¢ï¼‰ã€‚

æ³¨æ„ï¼šä¸å…è®¸æ—‹è½¬ä¿¡å°ã€‚

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šenvelopes = [[5,4],[6,4],[6,7],[2,3]]
è¾“å‡ºï¼š3
è§£é‡Šï¼šæœ€ä¼˜çš„ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°ç»„åˆæ˜¯ [2,3] => [5,4] => [6,7]ã€‚
```

ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šenvelopes = [[1,1],[1,1],[1,1]]
è¾“å‡ºï¼š1
```

æç¤ºï¼š
- 1 <= envelopes.length <= 10âµ
- envelopes[i].length == 2
- 1 <= wi, hi <= 10âµ

---

## è§£é¢˜æ€è·¯
### æ’åº + æœ€é•¿é€’å¢å­åºåˆ—

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
1. å°†é—®é¢˜è½¬åŒ–ä¸ºæœ€é•¿é€’å¢å­åºåˆ—ï¼ˆLISï¼‰é—®é¢˜ï¼š
   - å…ˆæŒ‰å®½åº¦å‡åºæ’åº
   - å®½åº¦ç›¸åŒæ—¶æŒ‰é«˜åº¦é™åºæ’åº
   - åœ¨é«˜åº¦æ•°ç»„ä¸Šå¯»æ‰¾æœ€é•¿é€’å¢å­åºåˆ—

2. ç‰¹æ®Šçš„æ’åºç­–ç•¥ï¼š
   - å®½åº¦ç›¸åŒæ—¶æŒ‰é«˜åº¦é™åºæ’åºçš„åŸå› ï¼š
     - é¿å…å®½åº¦ç›¸åŒæ—¶é€‰æ‹©å¤šä¸ªä¿¡å°
     - ç¡®ä¿åœ¨å®½åº¦ç›¸åŒæ—¶æœ€å¤šåªèƒ½é€‰æ‹©ä¸€ä¸ªä¿¡å°

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. æ’åºé¢„å¤„ç†ï¼š
   - æŒ‰å®½åº¦å‡åºæ’åº
   - å®½åº¦ç›¸åŒæ—¶æŒ‰é«˜åº¦é™åºæ’åº

2. æå–é«˜åº¦æ•°ç»„ï¼š
   - åˆ›å»ºä¸€ä¸ªåªåŒ…å«ä¿¡å°é«˜åº¦çš„æ•°ç»„

3. ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ä¼˜åŒ–çš„æœ€é•¿é€’å¢å­åºåˆ—ç®—æ³•ï¼š
   - ç»´æŠ¤ä¸€ä¸ª dp æ•°ç»„ï¼Œå­˜å‚¨å½“å‰é•¿åº¦ä¸‹çš„æœ€å°ç»“å°¾å…ƒç´ 
   - å¯¹æ¯ä¸ªé«˜åº¦ï¼ŒäºŒåˆ†æŸ¥æ‰¾å…¶åœ¨ dp æ•°ç»„ä¸­çš„ä½ç½®
   - æ›´æ–° dp æ•°ç»„

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ç¤ºä¾‹ 1 ä¸ºä¾‹ï¼Œåˆ†ææ•´ä¸ªæ±‚è§£è¿‡ç¨‹ï¼š

1. åŸå§‹æ•°ç»„ï¼š
```
[[5,4], [6,4], [6,7], [2,3]]
```

2. æ’åºåï¼š
```
æŒ‰å®½åº¦å‡åºï¼ŒåŒå®½åº¦æŒ‰é«˜åº¦é™åºæ’åºï¼š
[2,3] -> å®½åº¦æœ€å°
[5,4]
[6,7] -> å®½åº¦ç›¸åŒæ—¶é«˜åº¦å¤§çš„åœ¨å‰
[6,4] -> å®½åº¦ç›¸åŒæ—¶é«˜åº¦å°çš„åœ¨å
```

3. æå–é«˜åº¦æ•°ç»„ï¼š
```
[3, 4, 7, 4]
```

4. å¯»æ‰¾æœ€é•¿é€’å¢å­åºåˆ—ï¼š
| æ­¥éª¤ | å½“å‰æ•°å­— | dp æ•°ç»„ | é•¿åº¦ |
|-----|---------|---------|-----|
| 1 | 3 | [3] | 1 |
| 2 | 4 | [3,4] | 2 |
| 3 | 7 | [3,4,7] | 3 |
| 4 | 4 | [3,4,7] | 3 |

æœ€ç»ˆç»“æœä¸º 3ï¼Œå¯¹åº”çš„ä¿¡å°åºåˆ—ä¸ºï¼š[2,3] => [5,4] => [6,7]

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0354_RussianDollEnvelopes.java](../src/main/java/L0354_RussianDollEnvelopes.java)

```java
public class L0354_RussianDollEnvelopes {
    public int maxEnvelopes(int[][] envelopes) {
        // æŒ‰å®½åº¦å‡åºæ’åºï¼Œå¦‚æœå®½åº¦ç›¸åŒï¼Œåˆ™æŒ‰é«˜åº¦é™åºæ’åº
        Arrays.sort(envelopes, (a, b) -> {
            if (a[0] != b[0]) {
                return a[0] - b[0];
            } else {
                return b[1] - a[1];
            }
        });
        
        // å¯¹é«˜åº¦æ•°ç»„å¯»æ‰¾æœ€é•¿é€’å¢å­åºåˆ—
        int[] heights = new int[envelopes.length];
        for (int i = 0; i < envelopes.length; i++) {
            heights[i] = envelopes[i][1];
        }
        
        return longestIncreasingSubsequence(heights);
    }
    
    // ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ä¼˜åŒ–çš„æœ€é•¿é€’å¢å­åºåˆ—ç®—æ³•
    private int longestIncreasingSubsequence(int[] nums) {
        int[] dp = new int[nums.length];
        int len = 0;
        
        for (int num : nums) {
            // ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ‰¾åˆ° num åº”è¯¥æ’å…¥çš„ä½ç½®
            int left = 0, right = len;
            while (left < right) {
                int mid = left + (right - left) / 2;
                if (dp[mid] < num) {
                    left = mid + 1;
                } else {
                    right = mid;
                }
            }
            
            // æ›´æ–° dp æ•°ç»„
            dp[left] = num;
            if (left == len) {
                len++;
            }
        }
        
        return len;
    }
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(n log n)
  - æ’åºéœ€è¦ O(n log n)
  - æå–é«˜åº¦æ•°ç»„éœ€è¦ O(n)
  - æœ€é•¿é€’å¢å­åºåˆ—ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ä¼˜åŒ–ï¼Œéœ€è¦ O(n log n)
  - æ€»ä½“æ—¶é—´å¤æ‚åº¦ä¸º O(n log n)

- **ç©ºé—´å¤æ‚åº¦**ï¼šO(n)
  - éœ€è¦ä¸€ä¸ªé«˜åº¦æ•°ç»„å­˜å‚¨æ‰€æœ‰ä¿¡å°çš„é«˜åº¦
  - éœ€è¦ä¸€ä¸ª dp æ•°ç»„æ¥è®°å½•æœ€é•¿é€’å¢å­åºåˆ—çš„ä¿¡æ¯
  - æ’åºå¯èƒ½éœ€è¦é¢å¤–çš„ O(log n) ç©ºé—´ï¼ˆå–å†³äºå…·ä½“å®ç°ï¼‰

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 