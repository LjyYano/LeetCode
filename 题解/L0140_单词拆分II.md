---
title: å•è¯æ‹†åˆ† II
date: 2024-03-24
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[å•è¯æ‹†åˆ† II](https://leetcode.cn/problems/word-break-ii/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`åŠ¨æ€è§„åˆ’` `å›æº¯` `è®°å¿†åŒ–æœç´¢` `å­—ç¬¦ä¸²`  
**ğŸ”´ éš¾åº¦**ï¼š`å›°éš¾`  

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² s å’Œä¸€ä¸ªå­—ç¬¦ä¸²å­—å…¸ wordDict ï¼Œåœ¨å­—ç¬¦ä¸² s ä¸­å¢åŠ ç©ºæ ¼æ¥æ„å»ºä¸€ä¸ªå¥å­ï¼Œä½¿å¾—å¥å­ä¸­æ‰€æœ‰çš„å•è¯éƒ½åœ¨è¯å…¸ä¸­ã€‚ä»¥ä»»æ„é¡ºåº è¿”å›æ‰€æœ‰è¿™äº›å¯èƒ½çš„å¥å­ã€‚

æ³¨æ„ï¼šè¯å…¸ä¸­çš„åŒä¸€ä¸ªå•è¯å¯èƒ½åœ¨åˆ†æ®µä¸­è¢«é‡å¤ä½¿ç”¨å¤šæ¬¡ã€‚

**ç¤ºä¾‹ 1ï¼š**
```
è¾“å…¥:s = "catsanddog", wordDict = ["cat","cats","and","sand","dog"]
è¾“å‡º:["cats and dog","cat sand dog"]
```

**ç¤ºä¾‹ 2ï¼š**
```
è¾“å…¥:s = "pineapplepenapple", wordDict = ["apple","pen","applepen","pine","pineapple"]
è¾“å‡º:["pine apple pen apple","pineapple pen apple","pine applepen apple"]
```

**ç¤ºä¾‹ 3ï¼š**
```
è¾“å…¥:s = "catsandog", wordDict = ["cats","dog","sand","and","cat"]
è¾“å‡º:[]
```

**æç¤ºï¼š**
- 1 <= s.length <= 20
- 1 <= wordDict.length <= 1000
- 1 <= wordDict[i].length <= 10
- s å’Œ wordDict[i] ä»…æœ‰å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
- wordDict ä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸² äº’ä¸ç›¸åŒ

---

## è§£é¢˜æ€è·¯

### è®°å¿†åŒ–å›æº¯

#### ğŸ“ æ ¸å¿ƒæ€æƒ³

è¿™é“é¢˜æ˜¯ [å•è¯æ‹†åˆ†](../src/main/java/L0139_WordBreak.java) çš„è¿›é˜¶ç‰ˆã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼Œè¿™é‡Œä¸ä»…è¦åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦å¯ä»¥è¢«æ‹†åˆ†ï¼Œè¿˜è¦è¿”å›æ‰€æœ‰å¯èƒ½çš„æ‹†åˆ†æ–¹æ¡ˆã€‚

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å›æº¯æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯ä¸ºäº†é¿å…é‡å¤è®¡ç®—ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨è®°å¿†åŒ–æœç´¢ã€‚å…·ä½“æ¥è¯´ï¼š

1. å¯¹äºæ¯ä¸ªå­ä¸²ï¼Œæˆ‘ä»¬å°è¯•æ‰€æœ‰å¯èƒ½çš„å‰ç¼€
2. å¦‚æœå‰ç¼€æ˜¯å­—å…¸ä¸­çš„å•è¯ï¼Œæˆ‘ä»¬é€’å½’å¤„ç†å‰©ä½™éƒ¨åˆ†
3. ä½¿ç”¨ HashMap è®°å½•æ¯ä¸ªå­ä¸²çš„æ‰€æœ‰å¯èƒ½æ‹†åˆ†æ–¹æ¡ˆï¼Œé¿å…é‡å¤è®¡ç®—

#### ğŸ› ï¸ å®ç°æ­¥éª¤

1. å°†å­—å…¸è½¬æ¢ä¸º HashSetï¼Œæé«˜æŸ¥æ‰¾æ•ˆç‡
2. ä½¿ç”¨ HashMap ä½œä¸ºå¤‡å¿˜å½•ï¼Œè®°å½•æ¯ä¸ªå­ä¸²çš„æ‰€æœ‰å¯èƒ½æ‹†åˆ†æ–¹æ¡ˆ
3. å¯¹äºå½“å‰å­—ç¬¦ä¸²ï¼š
   - å¦‚æœå·²ç»è®¡ç®—è¿‡ï¼Œç›´æ¥è¿”å›è®°å½•çš„ç»“æœ
   - å¦‚æœå­—ç¬¦ä¸²ä¸ºç©ºï¼Œè¿”å›åŒ…å«ç©ºå­—ç¬¦ä¸²çš„åˆ—è¡¨
   - å°è¯•æ‰€æœ‰å¯èƒ½çš„å‰ç¼€ï¼š
     * å¦‚æœå‰ç¼€åœ¨å­—å…¸ä¸­ï¼Œé€’å½’å¤„ç†å‰©ä½™éƒ¨åˆ†
     * å°†å‰ç¼€ä¸å‰©ä½™éƒ¨åˆ†çš„æ‰€æœ‰ç»„åˆåŠ å…¥ç»“æœ
4. å°†ç»“æœå­˜å…¥å¤‡å¿˜å½•å¹¶è¿”å›

#### ğŸ§© ç¤ºä¾‹åˆ†æ

ä»¥ç¤ºä¾‹ 1 ä¸ºä¾‹ï¼Œåˆ†ææ•´ä¸ªå›æº¯è¿‡ç¨‹ï¼š
```
è¾“å…¥ï¼šs = "catsanddog", wordDict = ["cat","cats","and","sand","dog"]
```

å›æº¯è¿‡ç¨‹ï¼š
```
1. å¤„ç† "catsanddog"ï¼š
   å°è¯•å‰ç¼€ "cat"ï¼š
   â”œâ”€â”€ å‰©ä½™ "sanddog"
   â”‚   â”œâ”€â”€ å°è¯• "sand"ï¼š
   â”‚   â”‚   â””â”€â”€ å‰©ä½™ "dog" â†’ ["cat sand dog"]
   â”‚   â””â”€â”€ ä¸èƒ½ç”¨ "s", "sa", "san"
   â””â”€â”€ ä¸èƒ½ç”¨ "ca", "cats"

   å°è¯•å‰ç¼€ "cats"ï¼š
   â”œâ”€â”€ å‰©ä½™ "anddog"
   â”‚   â”œâ”€â”€ å°è¯• "and"ï¼š
   â”‚   â”‚   â””â”€â”€ å‰©ä½™ "dog" â†’ ["cats and dog"]
   â”‚   â””â”€â”€ ä¸èƒ½ç”¨ "a", "an"
   â””â”€â”€ ä¸èƒ½ç”¨ "c", "ca", "cat"
```

è¯¦ç»†çš„é€’å½’è°ƒç”¨è¿‡ç¨‹ï¼š

| å½“å‰å­—ç¬¦ä¸² | å¯ç”¨å‰ç¼€ | å‰©ä½™éƒ¨åˆ† | é€’å½’ç»“æœ | ç»„åˆç»“æœ |
|-----------|---------|----------|---------|---------|
| "catsanddog" | "cat" | "sanddog" | ["sand dog"] | ["cat sand dog"] |
| "catsanddog" | "cats" | "anddog" | ["and dog"] | ["cats and dog"] |
| "sanddog" | "sand" | "dog" | ["dog"] | ["sand dog"] |
| "anddog" | "and" | "dog" | ["dog"] | ["and dog"] |
| "dog" | "dog" | "" | [""] | ["dog"] |

è®°å¿†åŒ–çš„ä½œç”¨ï¼š
- å½“å¤„ç† "dog" æ—¶ï¼Œç»“æœè¢«å­˜å…¥å¤‡å¿˜å½•
- ä¹‹åå†æ¬¡é‡åˆ° "dog" æ—¶ï¼Œç›´æ¥è¿”å›è®°å½•çš„ç»“æœ
- è¿™æ ·é¿å…äº†é‡å¤è®¡ç®—ï¼Œæé«˜äº†æ•ˆç‡

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0140_WordBreakII.java](../src/main/java/L0140_WordBreakII.java)

```java
public List<String> wordBreak(String s, List<String> wordDict) {
    // å°†å­—å…¸è½¬æ¢ä¸º Setï¼Œæé«˜æŸ¥æ‰¾æ•ˆç‡
    Set<String> wordSet = new HashSet<>(wordDict);
    // ä½¿ç”¨ Map è®°å½•å·²ç»è®¡ç®—è¿‡çš„å­ä¸²çš„ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—
    Map<String, List<String>> memo = new HashMap<>();
    return backtrack(s, wordSet, memo);
}

private List<String> backtrack(String s, Set<String> wordSet, Map<String, List<String>> memo) {
    // å¦‚æœå·²ç»è®¡ç®—è¿‡è¿™ä¸ªå­ä¸²ï¼Œç›´æ¥è¿”å›è®°å½•çš„ç»“æœ
    if (memo.containsKey(s)) {
        return memo.get(s);
    }
    
    List<String> result = new ArrayList<>();
    
    // å¦‚æœå­—ç¬¦ä¸²ä¸ºç©ºï¼Œè¿”å›ç©ºåˆ—è¡¨
    if (s.isEmpty()) {
        result.add("");
        return result;
    }
    
    // å°è¯•æ‰€æœ‰å¯èƒ½çš„å‰ç¼€
    for (int i = 1; i <= s.length(); i++) {
        String prefix = s.substring(0, i);
        // å¦‚æœå‰ç¼€æ˜¯å­—å…¸ä¸­çš„å•è¯
        if (wordSet.contains(prefix)) {
            // é€’å½’å¤„ç†å‰©ä½™éƒ¨åˆ†
            List<String> subList = backtrack(s.substring(i), wordSet, memo);
            // å°†å‰ç¼€ä¸å‰©ä½™éƒ¨åˆ†çš„æ‰€æœ‰ç»„åˆåŠ å…¥ç»“æœ
            for (String sub : subList) {
                result.add(prefix + (sub.isEmpty() ? "" : " " + sub));
            }
        }
    }
    
    // è®°å½•ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—
    memo.put(s, result);
    return result;
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(2â¿)
  - åœ¨æœ€åæƒ…å†µä¸‹ï¼Œå­—ç¬¦ä¸²çš„æ¯ä¸ªä½ç½®éƒ½å¯èƒ½æ˜¯ä¸€ä¸ªåˆ†å‰²ç‚¹
  - æ¯ä¸ªåˆ†å‰²ç‚¹éƒ½æœ‰ä¸¤ç§é€‰æ‹©ï¼šåˆ†å‰²æˆ–ä¸åˆ†å‰²
  - è®°å¿†åŒ–å¯ä»¥é¿å…é‡å¤è®¡ç®—ï¼Œä½†ä¸èƒ½æ”¹å˜æŒ‡æ•°çº§çš„å¤æ‚åº¦

- **ç©ºé—´å¤æ‚åº¦**ï¼šO(n Ã— 2â¿)
  - éœ€è¦å­˜å‚¨æ‰€æœ‰å¯èƒ½çš„æ‹†åˆ†æ–¹æ¡ˆ
  - æ¯ä¸ªæ–¹æ¡ˆçš„é•¿åº¦æœ€å¤šä¸º n
  - è®°å¿†åŒ– Map éœ€è¦å­˜å‚¨ä¸­é—´ç»“æœ

## ç›¸å…³é¢˜ç›®

- [139. å•è¯æ‹†åˆ†](https://leetcode.cn/problems/word-break/)
- [472. è¿æ¥è¯](https://leetcode.cn/problems/concatenated-words/)

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 