---
title: å®Œç¾çŸ©å½¢
date: 2024-03-27
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[å®Œç¾çŸ©å½¢](https://leetcode.cn/problems/perfect-rectangle/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`æ•°ç»„` `æ‰«æçº¿` `å‡ ä½•`  
**ğŸ”´ éš¾åº¦**ï¼š`å›°éš¾`  

ç»™ä½ ä¸€ä¸ªæ•°ç»„ rectangles ï¼Œå…¶ä¸­ rectangles[i] = [xi, yi, ai, bi] è¡¨ç¤ºä¸€ä¸ªåæ ‡è½´å¹³è¡Œçš„çŸ©å½¢ã€‚è¿™ä¸ªçŸ©å½¢çš„å·¦ä¸‹é¡¶ç‚¹æ˜¯ (xi, yi) ï¼Œå³ä¸Šé¡¶ç‚¹æ˜¯ (ai, bi) ã€‚

å¦‚æœæ‰€æœ‰çŸ©å½¢ä¸€èµ·ç²¾ç¡®è¦†ç›–äº†æŸä¸ªçŸ©å½¢åŒºåŸŸï¼Œåˆ™è¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šrectangles = [[1,1,3,3],[3,1,4,2],[3,2,4,4],[1,3,2,4],[2,3,3,4]]
è¾“å‡ºï¼štrue
è§£é‡Šï¼š5 ä¸ªçŸ©å½¢ä¸€èµ·å¯ä»¥ç²¾ç¡®åœ°è¦†ç›–ä¸€ä¸ªçŸ©å½¢åŒºåŸŸã€‚
```

ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šrectangles = [[1,1,2,3],[1,3,2,4],[3,1,4,2],[3,2,4,4]]
è¾“å‡ºï¼šfalse
è§£é‡Šï¼šä¸¤ä¸ªçŸ©å½¢ä¹‹é—´æœ‰é—´éš”ï¼Œæ— æ³•è¦†ç›–æˆä¸€ä¸ªçŸ©å½¢ã€‚
```

ç¤ºä¾‹ 3ï¼š
```
è¾“å…¥ï¼šrectangles = [[1,1,3,3],[3,1,4,2],[1,3,2,4],[2,2,4,4]]
è¾“å‡ºï¼šfalse
è§£é‡Šï¼šå› ä¸ºä¸­é—´æœ‰ç›¸äº¤åŒºåŸŸï¼Œè™½ç„¶å½¢æˆäº†çŸ©å½¢ï¼Œä½†ä¸æ˜¯ç²¾ç¡®è¦†ç›–ã€‚
```

æç¤ºï¼š
- 1 <= rectangles.length <= 2 * 10â´
- rectangles[i].length == 4
- -10âµ <= xi, yi, ai, bi <= 10âµ

---

## è§£é¢˜æ€è·¯

### é¡¶ç‚¹è®¡æ•°æ³•

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
è¦åˆ¤æ–­ä¸€ç»„å°çŸ©å½¢æ˜¯å¦èƒ½ç²¾ç¡®è¦†ç›–ä¸€ä¸ªå¤§çŸ©å½¢ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ¥è€ƒè™‘ï¼š

1. é¢ç§¯ç‰¹æ€§ï¼šæ‰€æœ‰å°çŸ©å½¢çš„é¢ç§¯å’Œå¿…é¡»ç­‰äºæœ€å¤§çŸ©å½¢çš„é¢ç§¯
2. é¡¶ç‚¹ç‰¹æ€§ï¼š
   - æœ€å¤§çŸ©å½¢çš„å››ä¸ªé¡¶ç‚¹åªèƒ½å‡ºç°ä¸€æ¬¡
   - å…¶ä»–æ‰€æœ‰é¡¶ç‚¹å¿…é¡»å‡ºç°å¶æ•°æ¬¡ï¼ˆ2æ¬¡æˆ–4æ¬¡ï¼‰
   - å¦‚æœä¸€ä¸ªç‚¹å‡ºç°2æ¬¡ï¼Œè¯´æ˜å®ƒæ˜¯ä¸¤ä¸ªçŸ©å½¢çš„å…±åŒé¡¶ç‚¹
   - å¦‚æœä¸€ä¸ªç‚¹å‡ºç°4æ¬¡ï¼Œè¯´æ˜å®ƒæ˜¯å››ä¸ªçŸ©å½¢çš„å…±åŒé¡¶ç‚¹

è¿™ä¸ªé—®é¢˜çš„å…³é”®åœ¨äºç†è§£ï¼šå¦‚æœå°çŸ©å½¢èƒ½ç²¾ç¡®è¦†ç›–å¤§çŸ©å½¢ï¼Œé‚£ä¹ˆé™¤äº†å¤§çŸ©å½¢çš„å››ä¸ªé¡¶ç‚¹å¤–ï¼Œå…¶ä»–æ‰€æœ‰é¡¶ç‚¹éƒ½å¿…é¡»å‡ºç°å¶æ•°æ¬¡ã€‚

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. åˆå§‹åŒ–ï¼š
   - è®°å½•æœ€å¤§çŸ©å½¢çš„å››ä¸ªé¡¶ç‚¹åæ ‡
   - ä½¿ç”¨ HashSet å­˜å‚¨æ‰€æœ‰é¡¶ç‚¹
   - åˆå§‹åŒ–é¢ç§¯å’Œä¸º 0

2. éå†æ¯ä¸ªå°çŸ©å½¢ï¼š
   - æ›´æ–°æœ€å¤§çŸ©å½¢çš„é¡¶ç‚¹åæ ‡
   - ç´¯åŠ å°çŸ©å½¢çš„é¢ç§¯
   - å¤„ç†å½“å‰çŸ©å½¢çš„å››ä¸ªé¡¶ç‚¹ï¼š
     * å¦‚æœé¡¶ç‚¹å·²å­˜åœ¨ï¼Œåˆ™åˆ é™¤ï¼ˆè¡¨ç¤ºå‡ºç°å¶æ•°æ¬¡ï¼‰
     * å¦‚æœé¡¶ç‚¹ä¸å­˜åœ¨ï¼Œåˆ™æ·»åŠ ï¼ˆè¡¨ç¤ºå‡ºç°å¥‡æ•°æ¬¡ï¼‰

3. éªŒè¯ç»“æœï¼š
   - æ£€æŸ¥æœ€ç»ˆå‰©ä½™çš„ç‚¹æ•°æ˜¯å¦ä¸º 4
   - éªŒè¯è¿™ 4 ä¸ªç‚¹æ˜¯å¦æ˜¯æœ€å¤§çŸ©å½¢çš„é¡¶ç‚¹
   - éªŒè¯é¢ç§¯æ˜¯å¦ç›¸ç­‰

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ç¤ºä¾‹ 1 ä¸ºä¾‹ï¼š`rectangles = [[1,1,3,3],[3,1,4,2],[3,2,4,4],[1,3,2,4],[2,3,3,4]]`

1. éå†çŸ©å½¢å¹¶å¤„ç†é¡¶ç‚¹ï¼š

| çŸ©å½¢ | é¡¶ç‚¹é›†åˆå˜åŒ– | è¯´æ˜ |
|-----|------------|------|
| [1,1,3,3] | æ·»åŠ ï¼š(1,1),(1,3),(3,1),(3,3) | ç¬¬ä¸€ä¸ªçŸ©å½¢çš„å››ä¸ªé¡¶ç‚¹ |
| [3,1,4,2] | åˆ é™¤ï¼š(3,1)ï¼Œæ·»åŠ ï¼š(4,1),(4,2) | (3,1) å‡ºç°ç¬¬äºŒæ¬¡è¢«åˆ é™¤ |
| [3,2,4,4] | æ·»åŠ ï¼š(3,2),(3,4),(4,4) | æ–°çš„é¡¶ç‚¹ |
| [1,3,2,4] | åˆ é™¤ï¼š(1,3)ï¼Œæ·»åŠ ï¼š(2,4) | (1,3) å‡ºç°ç¬¬äºŒæ¬¡è¢«åˆ é™¤ |
| [2,3,3,4] | åˆ é™¤ï¼š(3,4)ï¼Œæ·»åŠ ï¼š(2,3) | (3,4) å‡ºç°ç¬¬äºŒæ¬¡è¢«åˆ é™¤ |

2. æœ€ç»ˆç»“æœåˆ†æï¼š
```
æœ€å¤§çŸ©å½¢ï¼š(1,1) åˆ° (4,4)
å‰©ä½™é¡¶ç‚¹ï¼š(1,1), (4,1), (1,4), (4,4)
é¢ç§¯æ£€æŸ¥ï¼š
- å°çŸ©å½¢é¢ç§¯å’Œï¼š4 + 2 + 4 + 2 + 2 = 14
- å¤§çŸ©å½¢é¢ç§¯ï¼š(4-1) * (4-1) = 9
```

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0391_PerfectRectangle.java](../src/main/java/L0391_PerfectRectangle.java)

```java
public boolean isRectangleCover(int[][] rectangles) {
    // ä½¿ç”¨ç‚¹çš„å‡ºç°æ¬¡æ•°æ¥åˆ¤æ–­æ˜¯å¦æ˜¯å®Œç¾çŸ©å½¢
    // å®Œç¾çŸ©å½¢çš„ç‰¹ç‚¹ï¼š
    // 1. é™¤äº†å››ä¸ªé¡¶ç‚¹å¤–ï¼Œå…¶ä»–ç‚¹éƒ½åº”è¯¥å‡ºç°å¶æ•°æ¬¡
    // 2. æ‰€æœ‰å°çŸ©å½¢çš„é¢ç§¯å’Œç­‰äºæœ€å¤§çŸ©å½¢çš„é¢ç§¯
    
    // è®°å½•æœ€å¤§çŸ©å½¢çš„å››ä¸ªé¡¶ç‚¹åæ ‡
    int minX = Integer.MAX_VALUE;
    int minY = Integer.MAX_VALUE;
    int maxX = Integer.MIN_VALUE;
    int maxY = Integer.MIN_VALUE;
    
    // ä½¿ç”¨ String æ¥å­˜å‚¨ç‚¹çš„åæ ‡ï¼Œæ ¼å¼ä¸º "x,y"
    java.util.Set<String> points = new java.util.HashSet<>();
    
    // è®¡ç®—æ‰€æœ‰å°çŸ©å½¢çš„é¢ç§¯å’Œ
    long area = 0L;
    
    for (int[] rect : rectangles) {
        // æ›´æ–°æœ€å¤§çŸ©å½¢çš„é¡¶ç‚¹åæ ‡
        minX = Math.min(minX, rect[0]);
        minY = Math.min(minY, rect[1]);
        maxX = Math.max(maxX, rect[2]);
        maxY = Math.max(maxY, rect[3]);
        
        // è®¡ç®—å½“å‰çŸ©å½¢çš„é¢ç§¯
        area += (long) (rect[2] - rect[0]) * (rect[3] - rect[1]);
        
        // è®°å½•å½“å‰çŸ©å½¢çš„å››ä¸ªé¡¶ç‚¹
        String[] points_rect = new String[]{
            rect[0] + "," + rect[1],  // å·¦ä¸‹
            rect[0] + "," + rect[3],  // å·¦ä¸Š
            rect[2] + "," + rect[1],  // å³ä¸‹
            rect[2] + "," + rect[3]   // å³ä¸Š
        };
        
        // å¦‚æœç‚¹å·²ç»å­˜åœ¨ï¼Œåˆ™åˆ é™¤ï¼ˆç›¸å½“äºè®¡æ•°ä¸ºå¶æ•°æ¬¡ï¼‰
        // å¦‚æœç‚¹ä¸å­˜åœ¨ï¼Œåˆ™æ·»åŠ ï¼ˆç›¸å½“äºè®¡æ•°ä¸ºå¥‡æ•°æ¬¡ï¼‰
        for (String p : points_rect) {
            if (!points.add(p)) {
                points.remove(p);
            }
        }
    }
    
    // æ£€æŸ¥æœ€ç»ˆå‰©ä¸‹çš„ç‚¹æ˜¯å¦æ­£å¥½æ˜¯æœ€å¤§çŸ©å½¢çš„å››ä¸ªé¡¶ç‚¹
    if (points.size() != 4) {
        return false;
    }
    
    // æ£€æŸ¥è¿™å››ä¸ªç‚¹æ˜¯å¦æ˜¯æœ€å¤§çŸ©å½¢çš„é¡¶ç‚¹
    return points.contains(minX + "," + minY) &&
           points.contains(minX + "," + maxY) &&
           points.contains(maxX + "," + minY) &&
           points.contains(maxX + "," + maxY) &&
           // æ£€æŸ¥é¢ç§¯æ˜¯å¦ç›¸ç­‰
           area == (long) (maxX - minX) * (maxY - minY);
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(n)
  - éœ€è¦éå†ä¸€æ¬¡æ‰€æœ‰çš„çŸ©å½¢
  - å¯¹äºæ¯ä¸ªçŸ©å½¢ï¼Œå¤„ç†å››ä¸ªé¡¶ç‚¹çš„æ“ä½œæ˜¯å¸¸æ•°æ—¶é—´
  - n æ˜¯çŸ©å½¢çš„æ•°é‡

- **ç©ºé—´å¤æ‚åº¦**ï¼šO(n)
  - ä½¿ç”¨ HashSet å­˜å‚¨é¡¶ç‚¹
  - åœ¨æœ€åæƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦å­˜å‚¨æ‰€æœ‰çŸ©å½¢çš„é¡¶ç‚¹
  - ä½†ç”±äºæ¯ä¸ªé¡¶ç‚¹æœ€å¤šå‡ºç° 4 æ¬¡ï¼Œå®é™…ç©ºé—´ä½¿ç”¨æ˜¯çº¿æ€§çš„

---

## ç®—æ³•ä¼˜åŒ–

1. **ä½¿ç”¨ TreeSet ä¼˜åŒ–**
   ```java
   public boolean isRectangleCover(int[][] rectangles) {
       TreeSet<String> points = new TreeSet<>();
       // ... å…¶ä»–ä»£ç ç›¸åŒ
   }
   ```
   ä½¿ç”¨ TreeSet å¯ä»¥ä¿æŒé¡¶ç‚¹çš„æœ‰åºæ€§ï¼Œæ–¹ä¾¿è°ƒè¯•ï¼Œä½†ä¼šå¢åŠ æ—¶é—´å¤æ‚åº¦ã€‚

2. **ä½¿ç”¨ä½è¿ç®—ä¼˜åŒ–**
   - å¯ä»¥ä½¿ç”¨ä½è¿ç®—æ¥è®°å½•ç‚¹çš„å‡ºç°æ¬¡æ•°
   - ä½†ç”±äºåæ ‡èŒƒå›´è¾ƒå¤§ï¼Œå®é™…æ•ˆæœå¯èƒ½ä¸å¦‚ HashSet

3. **æ‰«æçº¿ç®—æ³•**
   ```java
   public boolean isRectangleCover(int[][] rectangles) {
       // æŒ‰ x åæ ‡æ’åº
       Arrays.sort(rectangles, (a, b) -> a[0] != b[0] ? a[0] - b[0] : a[1] - b[1]);
       // ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ç»´æŠ¤å½“å‰æ‰«æçº¿ä¸Šçš„åŒºé—´
       PriorityQueue<int[]> pq = new PriorityQueue<>((a, b) -> a[0] - b[0]);
       // ... å®ç°æ‰«æçº¿ç®—æ³•
   }
   ```
   æ‰«æçº¿ç®—æ³•å¯ä»¥æ›´æ—©åœ°å‘ç°é‡å ï¼Œä½†å®ç°å¤æ‚ä¸”æ—¶é—´å¤æ‚åº¦æ›´é«˜ã€‚

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 