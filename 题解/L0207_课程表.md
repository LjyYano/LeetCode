---
title: è¯¾ç¨‹è¡¨
date: 2024-02-09
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[è¯¾ç¨‹è¡¨](https://leetcode.cn/problems/course-schedule/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`æ·±åº¦ä¼˜å…ˆæœç´¢` `å¹¿åº¦ä¼˜å…ˆæœç´¢` `å›¾` `æ‹“æ‰‘æ’åº`  
**ğŸŸ¡ éš¾åº¦**ï¼š`ä¸­ç­‰`  

ä½ è¿™ä¸ªå­¦æœŸå¿…é¡»é€‰ä¿® numCourses é—¨è¯¾ç¨‹ï¼Œè®°ä¸º 0 åˆ° numCourses - 1 ã€‚åœ¨é€‰ä¿®æŸäº›è¯¾ç¨‹ä¹‹å‰éœ€è¦ä¸€äº›å…ˆä¿®è¯¾ç¨‹ã€‚å…ˆä¿®è¯¾ç¨‹æŒ‰æ•°ç»„ prerequisites ç»™å‡ºï¼Œå…¶ä¸­ prerequisites[i] = [ai, bi] ï¼Œè¡¨ç¤ºå¦‚æœè¦å­¦ä¹ è¯¾ç¨‹ ai åˆ™ å¿…é¡» å…ˆå­¦ä¹ è¯¾ç¨‹ bi ã€‚ä¾‹å¦‚ï¼Œå…ˆä¿®è¯¾ç¨‹å¯¹ [0, 1] è¡¨ç¤ºï¼šæƒ³è¦å­¦ä¹ è¯¾ç¨‹ 0 ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ 1 ã€‚è¯·ä½ åˆ¤æ–­æ˜¯å¦å¯èƒ½å®Œæˆæ‰€æœ‰è¯¾ç¨‹çš„å­¦ä¹ ï¼Ÿå¦‚æœå¯ä»¥ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šnumCourses = 2, prerequisites = [[1,0]]
è¾“å‡ºï¼štrue
è§£é‡Šï¼šæ€»å…±æœ‰ 2 é—¨è¯¾ç¨‹ã€‚å­¦ä¹ è¯¾ç¨‹ 1 ä¹‹å‰ï¼Œä½ éœ€è¦å®Œæˆè¯¾ç¨‹ 0 ã€‚è¿™æ˜¯å¯èƒ½çš„ã€‚
```

ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šnumCourses = 2, prerequisites = [[1,0],[0,1]]
è¾“å‡ºï¼šfalse
è§£é‡Šï¼šæ€»å…±æœ‰ 2 é—¨è¯¾ç¨‹ã€‚å­¦ä¹ è¯¾ç¨‹ 1 ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ 0 ï¼›å¹¶ä¸”åœ¨å®Œæˆè¯¾ç¨‹ 0 ä¹‹å‰ï¼Œä½ è¿˜åº”å…ˆå®Œæˆè¯¾ç¨‹ 1 ã€‚è¿™æ˜¯ä¸å¯èƒ½çš„ã€‚
```

æç¤ºï¼š
- 1 <= numCourses <= 10âµ
- 0 <= prerequisites.length <= 5000
- prerequisites[i].length == 2
- 0 <= ai, bi < numCourses
- prerequisites[i] ä¸­çš„æ‰€æœ‰è¯¾ç¨‹å¯¹ äº’ä¸ç›¸åŒ

---

## è§£é¢˜æ€è·¯
### æ‹“æ‰‘æ’åºï¼ˆBFSï¼‰

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
è¿™é“é¢˜æœ¬è´¨ä¸Šæ˜¯åˆ¤æ–­ä¸€ä¸ªæœ‰å‘å›¾æ˜¯å¦å­˜åœ¨ç¯ã€‚å¦‚æœå­˜åœ¨ç¯ï¼Œå°±æ„å‘³ç€è¯¾ç¨‹ä¹‹é—´å­˜åœ¨å¾ªç¯ä¾èµ–ï¼Œæ— æ³•å®Œæˆæ‰€æœ‰è¯¾ç¨‹çš„å­¦ä¹ ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ‹“æ‰‘æ’åºæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

æ‹“æ‰‘æ’åºçš„åŸºæœ¬æ€è·¯æ˜¯ï¼š
1. ç»Ÿè®¡æ¯ä¸ªèŠ‚ç‚¹çš„å…¥åº¦ï¼ˆæœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹æŒ‡å‘å®ƒï¼‰
2. å°†æ‰€æœ‰å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—ï¼ˆè¿™äº›æ˜¯å¯ä»¥ç›´æ¥å­¦ä¹ çš„è¯¾ç¨‹ï¼‰
3. æ¯æ¬¡ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°†å…¶æ‰€æœ‰ç›¸é‚»èŠ‚ç‚¹çš„å…¥åº¦å‡ 1
4. å¦‚æœæŸä¸ªèŠ‚ç‚¹çš„å…¥åº¦å˜ä¸º 0ï¼Œåˆ™å°†å…¶åŠ å…¥é˜Ÿåˆ—
5. é‡å¤æ­¥éª¤ 3-4ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©º
6. å¦‚æœæœ€ç»ˆè®¿é—®çš„èŠ‚ç‚¹æ•°ç­‰äºæ€»èŠ‚ç‚¹æ•°ï¼Œè¯´æ˜ä¸å­˜åœ¨ç¯

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. æ„å»ºé‚»æ¥è¡¨å’Œå…¥åº¦æ•°ç»„ï¼š
   - ä½¿ç”¨ List<List<Integer>> å­˜å‚¨é‚»æ¥è¡¨
   - ä½¿ç”¨ int[] å­˜å‚¨æ¯ä¸ªèŠ‚ç‚¹çš„å…¥åº¦

2. åˆå§‹åŒ–æ•°æ®ç»“æ„ï¼š
   - éå† prerequisites æ•°ç»„ï¼Œæ„å»ºé‚»æ¥è¡¨
   - åŒæ—¶ç»Ÿè®¡æ¯ä¸ªèŠ‚ç‚¹çš„å…¥åº¦

3. æ‹“æ‰‘æ’åºï¼š
   - å°†æ‰€æœ‰å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—
   - ä½¿ç”¨ BFS éå†å›¾
   - è®°å½•è®¿é—®è¿‡çš„èŠ‚ç‚¹æ•°é‡

4. åˆ¤æ–­ç»“æœï¼š
   - å¦‚æœè®¿é—®çš„èŠ‚ç‚¹æ•°ç­‰äºæ€»è¯¾ç¨‹æ•°ï¼Œè¿”å› true
   - å¦åˆ™è¿”å› false

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ç¤ºä¾‹ 1 ä¸ºä¾‹ï¼Œåˆ†ææ•´ä¸ªè¿‡ç¨‹ï¼š
```
è¾“å…¥ï¼šnumCourses = 2, prerequisites = [[1,0]]
```

è¿‡ç¨‹åˆ†æï¼š

1. åˆå§‹çŠ¶æ€ï¼š
```
è¯¾ç¨‹å…³ç³»å›¾ï¼š
0 â†’ 1

å…¥åº¦æ•°ç»„ï¼š[0, 1]
é‚»æ¥è¡¨ï¼š
0: [1]
1: []
```

2. æ‹“æ‰‘æ’åºè¿‡ç¨‹ï¼š

| æ­¥éª¤ | é˜Ÿåˆ— | å·²è®¿é—®èŠ‚ç‚¹ | å…¥åº¦æ•°ç»„ | è¯´æ˜ |
|-----|------|-----------|---------|------|
| 1 | [0] | [] | [0,1] | è¯¾ç¨‹ 0 å…¥åº¦ä¸º 0ï¼ŒåŠ å…¥é˜Ÿåˆ— |
| 2 | [] | [0] | [0,0] | è®¿é—®è¯¾ç¨‹ 0ï¼Œè¯¾ç¨‹ 1 å…¥åº¦å‡ 1 |
| 3 | [1] | [0] | [0,0] | è¯¾ç¨‹ 1 å…¥åº¦ä¸º 0ï¼ŒåŠ å…¥é˜Ÿåˆ— |
| 4 | [] | [0,1] | [0,0] | è®¿é—®è¯¾ç¨‹ 1 |

æœ€ç»ˆè®¿é—®èŠ‚ç‚¹æ•°ä¸º 2ï¼Œç­‰äºè¯¾ç¨‹æ€»æ•°ï¼Œè¿”å› trueã€‚

å†çœ‹ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šnumCourses = 2, prerequisites = [[1,0],[0,1]]
```

è¿‡ç¨‹åˆ†æï¼š

1. åˆå§‹çŠ¶æ€ï¼š
```
è¯¾ç¨‹å…³ç³»å›¾ï¼š
0 â‡„ 1

å…¥åº¦æ•°ç»„ï¼š[1, 1]
é‚»æ¥è¡¨ï¼š
0: [1]
1: [0]
```

2. æ‹“æ‰‘æ’åºè¿‡ç¨‹ï¼š
- æ²¡æœ‰å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹
- æ— æ³•å¼€å§‹æ‹“æ‰‘æ’åº
- æœ€ç»ˆè®¿é—®èŠ‚ç‚¹æ•°ä¸º 0ï¼Œå°äºè¯¾ç¨‹æ€»æ•°ï¼Œè¿”å› false

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0207_CourseSchedule.java](../src/main/java/L0207_CourseSchedule.java)

```java
public boolean canFinish(int numCourses, int[][] prerequisites) {
    // æ„å»ºé‚»æ¥è¡¨å’Œå…¥åº¦æ•°ç»„
    List<List<Integer>> adjacency = new ArrayList<>();
    int[] inDegrees = new int[numCourses];
    
    // åˆå§‹åŒ–é‚»æ¥è¡¨
    for (int i = 0; i < numCourses; i++) {
        adjacency.add(new ArrayList<>());
    }
    
    // æ„å»ºé‚»æ¥è¡¨å’Œè®¡ç®—å…¥åº¦
    for (int[] prerequisite : prerequisites) {
        int course = prerequisite[0];
        int prerequisiteCourse = prerequisite[1];
        adjacency.get(prerequisiteCourse).add(course);
        inDegrees[course]++;
    }
    
    // å°†æ‰€æœ‰å…¥åº¦ä¸º 0 çš„è¯¾ç¨‹åŠ å…¥é˜Ÿåˆ—
    Queue<Integer> queue = new LinkedList<>();
    for (int i = 0; i < numCourses; i++) {
        if (inDegrees[i] == 0) {
            queue.offer(i);
        }
    }
    
    // è®°å½•å·²å­¦ä¹ çš„è¯¾ç¨‹æ•°é‡
    int count = 0;
    
    // BFS æ‹“æ‰‘æ’åº
    while (!queue.isEmpty()) {
        int course = queue.poll();
        count++;
        
        // å°†å½“å‰è¯¾ç¨‹çš„æ‰€æœ‰åç»­è¯¾ç¨‹çš„å…¥åº¦å‡ 1
        for (int nextCourse : adjacency.get(course)) {
            inDegrees[nextCourse]--;
            // å¦‚æœå…¥åº¦å˜ä¸º 0ï¼Œåˆ™åŠ å…¥é˜Ÿåˆ—
            if (inDegrees[nextCourse] == 0) {
                queue.offer(nextCourse);
            }
        }
    }
    
    // å¦‚æœæ‰€æœ‰è¯¾ç¨‹éƒ½å·²å­¦ä¹ ï¼Œåˆ™è¿”å› true
    return count == numCourses;
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(V + E)
  - V æ˜¯è¯¾ç¨‹æ•°é‡ï¼ˆé¡¶ç‚¹æ•°ï¼‰
  - E æ˜¯å…ˆä¿®è¯¾ç¨‹çš„è¦æ±‚æ•°é‡ï¼ˆè¾¹æ•°ï¼‰
  - éœ€è¦éå†æ‰€æœ‰çš„é¡¶ç‚¹å’Œè¾¹ä¸€æ¬¡

- **ç©ºé—´å¤æ‚åº¦**ï¼šO(V + E)
  - é‚»æ¥è¡¨éœ€è¦ O(V + E) çš„ç©ºé—´
  - å…¥åº¦æ•°ç»„éœ€è¦ O(V) çš„ç©ºé—´
  - é˜Ÿåˆ—æœ€å¤šéœ€è¦ O(V) çš„ç©ºé—´

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 