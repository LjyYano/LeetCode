---
title: æœ€å¤§æ­£æ–¹å½¢
date: 2025-02-10
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[æœ€å¤§æ­£æ–¹å½¢](https://leetcode.cn/problems/maximal-square/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`æ•°ç»„` `åŠ¨æ€è§„åˆ’` `çŸ©é˜µ`  
**ğŸŸ¡ éš¾åº¦**ï¼š`ä¸­ç­‰`  

åœ¨ä¸€ä¸ªç”± '0' å’Œ '1' ç»„æˆçš„äºŒç»´çŸ©é˜µå†…ï¼Œæ‰¾åˆ°åªåŒ…å« '1' çš„æœ€å¤§æ­£æ–¹å½¢ï¼Œå¹¶è¿”å›å…¶é¢ç§¯ã€‚

ç¤ºä¾‹ 1ï¼š
![img](https://assets.leetcode.com/uploads/2020/11/26/max1grid.jpg)
```
è¾“å…¥ï¼šmatrix = [["1","0","1","0","0"],["1","0","1","1","1"],["1","1","1","1","1"],["1","0","0","1","0"]]
è¾“å‡ºï¼š4
```

ç¤ºä¾‹ 2ï¼š
![img](https://assets.leetcode.com/uploads/2020/11/26/max2grid.jpg)
```
è¾“å…¥ï¼šmatrix = [["0","1"],["1","0"]]
è¾“å‡ºï¼š1
```

ç¤ºä¾‹ 3ï¼š
```
è¾“å…¥ï¼šmatrix = [["0"]]
è¾“å‡ºï¼š0
```

æç¤ºï¼š
- m == matrix.length
- n == matrix[i].length
- 1 <= m, n <= 300
- matrix[i][j] ä¸º '0' æˆ– '1'

---

## è§£é¢˜æ€è·¯

### åŠ¨æ€è§„åˆ’

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
è¿™é“é¢˜å¯ä»¥ä½¿ç”¨åŠ¨æ€è§„åˆ’æ¥è§£å†³ã€‚æˆ‘ä»¬å®šä¹‰ dp[i][j] è¡¨ç¤ºä»¥ (i,j) ä¸ºå³ä¸‹è§’çš„æœ€å¤§æ­£æ–¹å½¢çš„è¾¹é•¿ã€‚å¯¹äºæ¯ä¸ªä½ç½® (i,j)ï¼Œå¦‚æœå½“å‰ä½ç½®æ˜¯ '1'ï¼Œé‚£ä¹ˆè¿™ä¸ªä½ç½®å¯èƒ½ä¼šæ„æˆä¸€ä¸ªæ›´å¤§çš„æ­£æ–¹å½¢ï¼Œè¿™ä¸ªæ­£æ–¹å½¢çš„è¾¹é•¿å–å†³äºï¼š
1. å·¦è¾¹ç›¸é‚»ä½ç½® (i,j-1) çš„æœ€å¤§æ­£æ–¹å½¢è¾¹é•¿
2. ä¸Šè¾¹ç›¸é‚»ä½ç½® (i-1,j) çš„æœ€å¤§æ­£æ–¹å½¢è¾¹é•¿
3. å·¦ä¸Šè§’ç›¸é‚»ä½ç½® (i-1,j-1) çš„æœ€å¤§æ­£æ–¹å½¢è¾¹é•¿

å–è¿™ä¸‰ä¸ªä½ç½®çš„æœ€å°å€¼å†åŠ  1ï¼Œå°±æ˜¯å½“å‰ä½ç½®çš„æœ€å¤§æ­£æ–¹å½¢è¾¹é•¿ã€‚

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. åˆ›å»ºä¸€ä¸ªä¸è¾“å…¥çŸ©é˜µç›¸åŒå¤§å°çš„ dp æ•°ç»„
2. åˆå§‹åŒ–ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—ï¼š
   - å¦‚æœå¯¹åº”ä½ç½®æ˜¯ '1'ï¼Œåˆ™ dp å€¼ä¸º 1
   - å¦‚æœæ˜¯ '0'ï¼Œåˆ™ dp å€¼ä¸º 0
3. å¯¹äºå…¶ä»–ä½ç½® (i,j)ï¼š
   - å¦‚æœ matrix[i][j] æ˜¯ '0'ï¼Œdp[i][j] = 0
   - å¦‚æœ matrix[i][j] æ˜¯ '1'ï¼Œdp[i][j] = min(dp[i-1][j], dp[i][j-1], dp[i-1][j-1]) + 1
4. åœ¨éå†è¿‡ç¨‹ä¸­ç»´æŠ¤æœ€å¤§è¾¹é•¿
5. è¿”å›æœ€å¤§è¾¹é•¿çš„å¹³æ–¹ä½œä¸ºé¢ç§¯

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ç¤ºä¾‹ 1 ä¸ºä¾‹ï¼Œåˆ†æåŠ¨æ€è§„åˆ’çš„è¿‡ç¨‹ï¼š

åŸå§‹çŸ©é˜µï¼š
```
1 0 1 0 0
1 0 1 1 1
1 1 1 1 1
1 0 0 1 0
```

dp æ•°ç»„çš„æ„å»ºè¿‡ç¨‹ï¼š

1. åˆå§‹åŒ–ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—ï¼š
```
1 0 1 0 0
1 * * * *
1 * * * *
1 * * * *

* è¡¨ç¤ºå¾…è®¡ç®—çš„ä½ç½®
```

2. è®¡ç®— dp[1][1]ï¼š
```
1 0 1 0 0
1 0 * * *
1 * * * *
1 * * * *

dp[1][1] = 0ï¼ˆå› ä¸º matrix[1][1] = '0'ï¼‰
```

3. è®¡ç®— dp[1][2]ï¼š
```
1 0 1 0 0
1 0 1 * *
1 * * * *
1 * * * *

dp[1][2] = min(1,0,1) + 1 = 1
```

4. ç»§ç»­è®¡ç®—ï¼Œæœ€ç»ˆçš„ dp æ•°ç»„ï¼š
```
1 0 1 0 0
1 0 1 1 1
1 1 1 2 2
1 0 0 1 0
```

æœ€å¤§è¾¹é•¿ä¸º 2ï¼Œå› æ­¤æœ€å¤§æ­£æ–¹å½¢é¢ç§¯ä¸º 4ã€‚

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0221_MaximalSquare.java](../src/main/java/L0221_MaximalSquare.java)

```java
public int maximalSquare(char[][] matrix) {
    if (matrix == null || matrix.length == 0 || matrix[0].length == 0) {
        return 0;
    }
    
    int m = matrix.length;
    int n = matrix[0].length;
    // dp[i][j] è¡¨ç¤ºä»¥ (i,j) ä¸ºå³ä¸‹è§’çš„æœ€å¤§æ­£æ–¹å½¢è¾¹é•¿
    int[][] dp = new int[m][n];
    int maxSide = 0;
    
    // åˆå§‹åŒ–ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—
    for (int i = 0; i < m; i++) {
        dp[i][0] = matrix[i][0] == '1' ? 1 : 0;
        maxSide = Math.max(maxSide, dp[i][0]);
    }
    for (int j = 0; j < n; j++) {
        dp[0][j] = matrix[0][j] == '1' ? 1 : 0;
        maxSide = Math.max(maxSide, dp[0][j]);
    }
    
    // åŠ¨æ€è§„åˆ’è®¡ç®—æœ€å¤§æ­£æ–¹å½¢è¾¹é•¿
    for (int i = 1; i < m; i++) {
        for (int j = 1; j < n; j++) {
            if (matrix[i][j] == '1') {
                dp[i][j] = Math.min(Math.min(dp[i - 1][j], dp[i][j - 1]), dp[i - 1][j - 1]) + 1;
                maxSide = Math.max(maxSide, dp[i][j]);
            }
        }
    }
    
    return maxSide * maxSide;
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(mÃ—n)
  - éœ€è¦éå†æ•´ä¸ªçŸ©é˜µä¸€æ¬¡
  - å¯¹äºæ¯ä¸ªä½ç½®ï¼Œè®¡ç®— dp å€¼çš„æ—¶é—´æ˜¯ O(1)

- **ç©ºé—´å¤æ‚åº¦**ï¼šO(mÃ—n)
  - éœ€è¦ä¸€ä¸ªä¸è¾“å…¥çŸ©é˜µç›¸åŒå¤§å°çš„ dp æ•°ç»„æ¥å­˜å‚¨ä¸­é—´ç»“æœ
  - å¯ä»¥ä¼˜åŒ–ä¸º O(n)ï¼Œåªä½¿ç”¨ä¸€ç»´æ•°ç»„ï¼Œä½†éœ€è¦é¢å¤–ä¿å­˜å·¦ä¸Šè§’çš„å€¼

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 