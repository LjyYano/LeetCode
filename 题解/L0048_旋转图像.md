---
title: 旋转图像
date: 2025-02-09
---

## 题目描述

**🔗 题目**：[旋转图像](https://leetcode.cn/problems/rotate-image/)  
**🏷️ 标签**：`数组` `数学` `矩阵`  
**🟡 难度**：`中等`  

给定一个 n × n 的二维矩阵 matrix 表示一个图像，请你将图像顺时针旋转 90 度。

你必须在 原地 旋转图像，这意味着你需要直接修改输入的二维矩阵。请不要 使用另一个矩阵来旋转图像。

示例 1：
```
输入：matrix = [[1,2,3],[4,5,6],[7,8,9]]
输出：[[7,4,1],[8,5,2],[9,6,3]]
```

![](https://assets.leetcode.com/uploads/2020/08/28/mat1.jpg)

示例 2：
```
输入：matrix = [[5,1,9,11],[2,4,8,10],[13,3,6,7],[15,14,12,16]]
输出：[[15,13,2,5],[14,3,4,1],[12,6,8,9],[16,7,10,11]]
```

![](https://assets.leetcode.com/uploads/2020/08/28/mat2.jpg)

提示：
- n == matrix.length == matrix[i].length
- 1 <= n <= 20
- -1000 <= matrix[i][j] <= 1000

---

## 解题思路
### 两次翻转法

#### 📝 核心思想
将矩阵顺时针旋转 90 度可以通过两次翻转来实现：
1. 先沿主对角线（左上到右下）翻转
2. 再沿垂直中线翻转

这样做的好处是可以原地修改矩阵，不需要额外的空间。

#### 🛠️ 实现步骤
1. 沿主对角线翻转：
   - 遍历矩阵的上三角部分
   - 交换 matrix[i][j] 和 matrix[j][i]
2. 沿垂直中线翻转：
   - 遍历每一行
   - 交换每行的对称元素

#### 🧩 示例分析
以 3×3 矩阵为例，展示完整的旋转过程：

**原始矩阵**：
```
1  2  3
4  5  6
7  8  9
```

**Step 1: 沿主对角线翻转**
```
交换过程（标记 * 表示待交换的元素）：

第一轮：
1  2* 3*    1  4  7*    1  4  7
4* 5  6  →  2  5  8  →  2  5  8
7* 8  9     3  6  9     3  6  9

交换 (0,1)↔(1,0): 2↔4
交换 (0,2)↔(2,0): 3↔7
交换 (1,2)↔(2,1): 6↔8

结果：
1  4  7
2  5  8
3  6  9
```

**Step 2: 沿垂直中线翻转**
```
交换过程（标记 * 表示待交换的元素）：

第一行：
1* 4  7*    7  4  1
2  5  8  →  2  5  8
3  6  9     3  6  9

第二行：
7  4  1
2* 5  8* → 7  4  1
3  6  9    8  5  2
           3  6  9

第三行：
7  4  1
8  5  2
3* 6  9* → 7  4  1
           8  5  2
           9  6  3

交换每行的对称位置元素：
- 第一行：1↔7
- 第二行：2↔8
- 第三行：3↔9

最终结果：
7  4  1
8  5  2
9  6  3
```

对于 4×4 矩阵的情况：
```
原始矩阵：
 5  1  9 11
 2  4  8 10
13  3  6  7
15 14 12 16

Step 1: 沿主对角线翻转
 5  2 13 15
 1  4  3 14
 9  8  6 12
11 10  7 16

Step 2: 沿垂直中线翻转
15 13  2  5
14  3  4  1
12  6  8  9
16  7 10 11
```

翻转的数学原理：
1. 对于位置 (i,j)：
   - 沿主对角线翻转：(i,j) → (j,i)
   - 沿垂直中线翻转：(i,j) → (i,n-1-j)
2. 组合这两次翻转：
   - 原始位置 (i,j)
   - 第一次翻转后 (j,i)
   - 第二次翻转后 (j,n-1-i)
   - 这正好是顺时针旋转 90 度后的位置

---

## 代码实现

完整的可运行代码：[L0048_RotateImage.java](../src/main/java/L0048_RotateImage.java)

```java
public void rotate(int[][] matrix) {
    int n = matrix.length;
    
    // 先沿对角线翻转
    for (int i = 0; i < n; i++) {
        for (int j = i + 1; j < n; j++) {
            int temp = matrix[i][j];
            matrix[i][j] = matrix[j][i];
            matrix[j][i] = temp;
        }
    }
    
    // 再沿垂直中线翻转
    for (int i = 0; i < n; i++) {
        for (int j = 0; j < n / 2; j++) {
            int temp = matrix[i][j];
            matrix[i][j] = matrix[i][n - 1 - j];
            matrix[i][n - 1 - j] = temp;
        }
    }
}
```

---

## 复杂度分析

- **时间复杂度**：`O(n²)`
  - 需要遍历整个 n×n 矩阵
  - 对角线翻转需要 O(n²/2) 次操作
  - 垂直中线翻转需要 O(n²/2) 次操作
  - 总的时间复杂度为 O(n²)

- **空间复杂度**：`O(1)`
  - 只使用了常数个额外变量
  - 所有操作都是原地进行的

---

## LeetCode 题解

本题解是 LeetCode 系列题解的一部分。该系列题解致力于帮助程序员更好地理解和掌握算法思维，内容包含详细的解题思路分析、图文并茂的示例讲解和完整的代码实现。

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode 最全题解](https://github.com/LjyYano/LeetCode)：持续更新中，欢迎 Star ⭐️ 关注，一起探讨算法之美。 