---
title: æ‰å¹³åŒ–å¤šçº§åŒå‘é“¾è¡¨
date: 2024-03-27
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[æ‰å¹³åŒ–å¤šçº§åŒå‘é“¾è¡¨](https://leetcode.cn/problems/flatten-a-multilevel-doubly-linked-list/description/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`æ·±åº¦ä¼˜å…ˆæœç´¢` `é“¾è¡¨` `åŒå‘é“¾è¡¨`  
**ğŸŸ¡ éš¾åº¦**ï¼š`ä¸­ç­‰`  

ä½ ä¼šå¾—åˆ°ä¸€ä¸ªåŒé“¾è¡¨ï¼Œå…¶ä¸­åŒ…å«çš„èŠ‚ç‚¹æœ‰ä¸€ä¸ªä¸‹ä¸€ä¸ªæŒ‡é’ˆã€ä¸€ä¸ªå‰ä¸€ä¸ªæŒ‡é’ˆå’Œä¸€ä¸ªé¢å¤–çš„ å­æŒ‡é’ˆ ã€‚è¿™ä¸ªå­æŒ‡é’ˆå¯èƒ½æŒ‡å‘ä¸€ä¸ªå•ç‹¬çš„åŒå‘é“¾è¡¨ï¼Œä¹ŸåŒ…å«è¿™äº›ç‰¹æ®Šçš„èŠ‚ç‚¹ã€‚è¿™äº›å­åˆ—è¡¨å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè‡ªå·±çš„å­é¡¹ï¼Œä»¥æ­¤ç±»æ¨ï¼Œç”Ÿæˆå¤šçº§æ•°æ®ç»“æ„ã€‚ç»™å®šé“¾è¡¨çš„å¤´èŠ‚ç‚¹ head ï¼Œå°†é“¾è¡¨ æ‰å¹³åŒ– ï¼Œä»¥ä¾¿æ‰€æœ‰èŠ‚ç‚¹éƒ½å‡ºç°åœ¨å•å±‚åŒé“¾è¡¨ä¸­ã€‚è®© curr æ˜¯ä¸€ä¸ªå¸¦æœ‰å­åˆ—è¡¨çš„èŠ‚ç‚¹ã€‚å­åˆ—è¡¨ä¸­çš„èŠ‚ç‚¹åº”è¯¥å‡ºç°åœ¨æ‰å¹³åŒ–åˆ—è¡¨ä¸­çš„ curr ä¹‹å å’Œ curr.next ä¹‹å‰ ã€‚

è¿”å› æ‰å¹³åŒ–åˆ—è¡¨çš„ head ã€‚

ç¤ºä¾‹ 1ï¼š
![img](https://assets.leetcode.com/uploads/2021/11/09/flatten11.jpg)
è¾“å…¥ï¼šhead = [1,2,3,4,5,6,null,null,null,7,8,9,10,null,null,11,12]
è¾“å‡ºï¼š[1,2,3,7,8,11,12,9,10,4,5,6]
è§£é‡Šï¼šè¾“å…¥çš„å¤šçº§åˆ—è¡¨å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚
æ‰å¹³åŒ–åçš„é“¾è¡¨å¦‚ä¸‹å›¾ï¼š
![img](https://assets.leetcode.com/uploads/2021/11/09/flatten12.jpg)

ç¤ºä¾‹ 2ï¼š
![img](https://assets.leetcode.com/uploads/2021/11/09/flatten2.1jpg)
è¾“å…¥ï¼šhead = [1,2,null,3]
è¾“å‡ºï¼š[1,3,2]
è§£é‡Šï¼šè¾“å…¥çš„å¤šçº§åˆ—è¡¨å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚
æ‰å¹³åŒ–åçš„é“¾è¡¨å¦‚ä¸‹å›¾ï¼š
![img](https://assets.leetcode.com/uploads/2021/11/24/list.jpg)

ç¤ºä¾‹ 3ï¼š
è¾“å…¥ï¼šhead = []
è¾“å‡ºï¼š[]
è¯´æ˜ï¼šè¾“å…¥ä¸­å¯èƒ½å­˜åœ¨ç©ºåˆ—è¡¨ã€‚

---

## è§£é¢˜æ€è·¯

### æ ˆè¾…åŠ©éå†æ³•

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
ä½¿ç”¨æ ˆæ¥è¾…åŠ©å¤„ç†å¤šçº§é“¾è¡¨çš„æ‰å¹³åŒ–ã€‚å½“é‡åˆ°å¸¦æœ‰å­é“¾è¡¨çš„èŠ‚ç‚¹æ—¶ï¼Œå°†å½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå¦‚æœå­˜åœ¨ï¼‰å‹å…¥æ ˆä¸­ï¼Œç„¶åå°†å­é“¾è¡¨æ¥åˆ°å½“å‰èŠ‚ç‚¹åé¢ã€‚å½“å¤„ç†å®Œä¸€ä¸ªé“¾è¡¨åˆ†æ”¯åï¼Œä»æ ˆä¸­å¼¹å‡ºä¹‹å‰ä¿å­˜çš„èŠ‚ç‚¹ç»§ç»­å¤„ç†ã€‚

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. å¦‚æœå¤´èŠ‚ç‚¹ä¸ºç©ºï¼Œç›´æ¥è¿”å› null
2. ä½¿ç”¨æ ˆæ¥ä¿å­˜éœ€è¦åç»­å¤„ç†çš„èŠ‚ç‚¹
3. éå†é“¾è¡¨ï¼Œå¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼š
   - å¦‚æœæœ‰å­èŠ‚ç‚¹ï¼Œå°†å½“å‰èŠ‚ç‚¹çš„ next èŠ‚ç‚¹å‹å…¥æ ˆä¸­ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ï¼Œç„¶åå°†å­èŠ‚ç‚¹è®¾ä¸ºå½“å‰èŠ‚ç‚¹çš„ next
   - å¦‚æœæ²¡æœ‰å­èŠ‚ç‚¹ä¸”æ²¡æœ‰ next èŠ‚ç‚¹ï¼Œä½†æ ˆä¸ä¸ºç©ºï¼Œä»æ ˆä¸­å¼¹å‡ºèŠ‚ç‚¹ä½œä¸ºå½“å‰èŠ‚ç‚¹çš„ next
   - å¤„ç†å®Œå­èŠ‚ç‚¹åï¼Œå°† child æŒ‡é’ˆç½®ä¸º null
4. ç»´æŠ¤å¥½æ‰€æœ‰èŠ‚ç‚¹çš„ prev å’Œ next æŒ‡é’ˆ

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ç¤ºä¾‹ 1 ä¸ºä¾‹ï¼Œåˆ†ææ‰å¹³åŒ–è¿‡ç¨‹ï¼š

åˆå§‹çŠ¶æ€ï¼š
```
1 -> 2 -> 3 -> 4 -> 5 -> 6
|
7 -> 8 -> 9 -> 10
     |
     11 -> 12
```

å¤„ç†æ­¥éª¤ï¼š
1. é‡åˆ°èŠ‚ç‚¹ 1 çš„å­é“¾è¡¨ï¼š
   - å°†èŠ‚ç‚¹ 2 å‹å…¥æ ˆ
   - å°†èŠ‚ç‚¹ 7 æ¥åˆ°èŠ‚ç‚¹ 1 åé¢
   ```
   1 -> 7 -> 8 -> 9 -> 10
   æ ˆï¼š[2]
   ```

2. é‡åˆ°èŠ‚ç‚¹ 8 çš„å­é“¾è¡¨ï¼š
   - å°†èŠ‚ç‚¹ 9 å‹å…¥æ ˆ
   - å°†èŠ‚ç‚¹ 11 æ¥åˆ°èŠ‚ç‚¹ 8 åé¢
   ```
   1 -> 7 -> 8 -> 11 -> 12
   æ ˆï¼š[2, 9]
   ```

3. å¤„ç†å®Œå­é“¾è¡¨åï¼š
   - å¼¹å‡ºèŠ‚ç‚¹ 9ï¼Œæ¥åˆ°èŠ‚ç‚¹ 12 åé¢
   - å¼¹å‡ºèŠ‚ç‚¹ 2ï¼Œæ¥åˆ°èŠ‚ç‚¹ 10 åé¢
   ```
   1 -> 7 -> 8 -> 11 -> 12 -> 9 -> 10 -> 2 -> 3 -> 4 -> 5 -> 6
   ```

æœ€ç»ˆå¾—åˆ°æ‰å¹³åŒ–çš„é“¾è¡¨ï¼š
```
1 -> 7 -> 8 -> 11 -> 12 -> 9 -> 10 -> 2 -> 3 -> 4 -> 5 -> 6
```

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0430_FlattenAMultilevelDoublyLinkedList.java](../src/main/java/L0430_FlattenAMultilevelDoublyLinkedList.java)

```java
public Node flatten(Node head) {
    if (head == null) {
        return null;
    }
    
    // ä½¿ç”¨æ ˆæ¥ä¿å­˜ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
    Stack<Node> stack = new Stack<>();
    Node curr = head;
    
    while (curr != null || !stack.isEmpty()) {
        if (curr.child != null) {
            // å¦‚æœæœ‰ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°†å…¶å‹å…¥æ ˆä¸­
            if (curr.next != null) {
                stack.push(curr.next);
            }
            
            // å°†å­èŠ‚ç‚¹è®¾ç½®ä¸ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹
            curr.next = curr.child;
            curr.child.prev = curr;
            curr.child = null;
        } else if (curr.next == null && !stack.isEmpty()) {
            // å¦‚æœå½“å‰èŠ‚ç‚¹æ²¡æœ‰ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸”æ ˆä¸ä¸ºç©º
            curr.next = stack.pop();
            curr.next.prev = curr;
        }
        
        curr = curr.next;
    }
    
    return head;
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯é“¾è¡¨ä¸­çš„èŠ‚ç‚¹æ€»æ•°ã€‚æ¯ä¸ªèŠ‚ç‚¹åªä¼šè¢«è®¿é—®ä¸€æ¬¡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼šO(n)ï¼Œæœ€åæƒ…å†µä¸‹ï¼Œæ ˆä¸­å¯èƒ½éœ€è¦å­˜å‚¨ O(n) ä¸ªèŠ‚ç‚¹ã€‚

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚