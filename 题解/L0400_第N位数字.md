---
title: 第 N 位数字
date: 2024-03-27
---

## 题目描述

**🔗 题目**：[400. 第 N 位数字](https://leetcode.cn/problems/nth-digit/)  
**🏷️ 标签**：`数学` `二分查找`  
**🟡 难度**：`中等`  

给你一个整数 n ，请你在无限的整数序列 [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, ...] 中找出并返回第 n 位上的数字。

示例 1：
```
输入：n = 3
输出：3
```

示例 2：
```
输入：n = 11
输出：0
解释：第 11 位数字在序列 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, ... 里是 0 ，它是 10 的一部分。
```

提示：
- 1 <= n <= 2³¹ - 1

---

## 解题思路
### 数学分析法

#### 📝 核心思想
要找到第 n 位数字，我们需要：
1. 确定第 n 位数字所在的数字的位数（1 位数、2 位数、3 位数等）
2. 确定第 n 位数字具体在哪个数字中
3. 从该数字中取出对应的位

关键是要理解数字的分布规律：
- 1 位数（1-9）：共 9 个数字，占用 9 × 1 = 9 位
- 2 位数（10-99）：共 90 个数字，占用 90 × 2 = 180 位
- 3 位数（100-999）：共 900 个数字，占用 900 × 3 = 2700 位
- 以此类推...

#### 🛠️ 实现步骤
1. 确定 n 所在的数字的位数：
   - 从 1 位数开始，不断减去每个位数范围包含的位数
   - 直到找到 n 所在的范围

2. 确定具体数字：
   - 计算在当前位数范围内的偏移量
   - 加上当前位数的起始数字

3. 取出对应位置的数字：
   - 将数字转为字符串
   - 取出对应位置的字符并转为数字

#### 🧩 示例分析
以 n = 11 为例，让我们一步步分析：

| 步骤 | 计算过程 | 说明 |
|-----|---------|------|
| 1 | 检查 1 位数范围 | 1-9 占用 9 位，n > 9，继续检查 |
| 2 | n = 11 - 9 = 2 | 减去 1 位数占用的位数 |
| 3 | 现在在 2 位数范围内 | n = 2 表示是 2 位数范围内的第 2 位 |
| 4 | 定位具体数字 | 10 + (2-1)/2 = 10 |
| 5 | 确定位置 | (2-1)%2 = 1，即第二个位置 |
| 6 | 最终结果 | 10 的第二位是 0 |

再看 n = 15 的例子：

| 步骤 | 计算过程 | 说明 |
|-----|---------|------|
| 1 | 检查 1 位数范围 | 1-9 占用 9 位，n > 9，继续检查 |
| 2 | n = 15 - 9 = 6 | 减去 1 位数占用的位数 |
| 3 | 现在在 2 位数范围内 | n = 6 表示是 2 位数范围内的第 6 位 |
| 4 | 定位具体数字 | 10 + (6-1)/2 = 12 |
| 5 | 确定位置 | (6-1)%2 = 1，即第二个位置 |
| 6 | 最终结果 | 12 的第二位是 2 |

---

## 代码实现

完整的可运行代码：[L0400_NthDigit.java](../src/main/java/L0400_NthDigit.java)

```java
public class L0400_NthDigit {
    
    public int findNthDigit(int n) {
        // 处理特殊情况
        if (n < 10) {
            return n;
        }
        
        // 1. 确定 n 所在的数字的位数
        long length = 1;  // 数字的位数
        long count = 9;   // 当前位数的数字个数
        long start = 1;   // 当前位数的起始数字
        
        // n 减去前面的位数，直到找到所在的数字范围
        while (n > length * count) {
            n -= length * count;
            length++;
            count *= 10;
            start *= 10;
        }
        
        // 2. 确定 n 所在的具体数字
        // 减去 1 是因为要考虑从 0 开始计数
        start += (n - 1) / length;
        
        // 3. 从该数字中取出第 n 位
        // 将数字转为字符串，然后取出对应位置的数字
        String number = String.valueOf(start);
        return number.charAt((n - 1) % (int)length) - '0';
    }
}
```

---

## 复杂度分析

- **时间复杂度**：O(log n)
  - 需要循环找到 n 所在的数字范围，循环次数与 n 的位数相关
  - 数字转字符串的操作也是 O(log n)

- **空间复杂度**：O(log n)
  - 主要是将数字转换为字符串时占用的空间
  - 空间占用与数字的位数相关，即 log n

---

## LeetCode 题解

本题解是 LeetCode 系列题解的一部分。该系列题解致力于帮助程序员更好地理解和掌握算法思维，内容包含详细的解题思路分析、图文并茂的示例讲解和完整的代码实现。

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode 最全题解](https://github.com/LjyYano/LeetCode)：持续更新中，欢迎 Star ⭐️ 关注，一起探讨算法之美。 