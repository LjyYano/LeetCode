---
title: å…¨æ’åˆ— II
date: 2025-02-09
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[å…¨æ’åˆ— II](https://leetcode.cn/problems/permutations-ii/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`æ•°ç»„` `å›æº¯` `é€’å½’`  
**ğŸŸ¡ éš¾åº¦**ï¼š`ä¸­ç­‰`  

ç»™å®šä¸€ä¸ªå¯åŒ…å«é‡å¤æ•°å­—çš„åºåˆ— nums ï¼ŒæŒ‰ä»»æ„é¡ºåº è¿”å›æ‰€æœ‰ä¸é‡å¤çš„å…¨æ’åˆ—ã€‚

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šnums = [1,1,2]
è¾“å‡ºï¼š[[1,1,2], [1,2,1], [2,1,1]]
```

ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šnums = [1,2,3]
è¾“å‡ºï¼š[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]
```

æç¤ºï¼š
- 1 <= nums.length <= 8
- -10 <= nums[i] <= 10

---

## è§£é¢˜æ€è·¯
### å›æº¯ + å»é‡

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
1. ä½¿ç”¨å›æº¯ç®—æ³•ï¼Œä»ä¸€ä¸ªåˆå§‹çŠ¶æ€å‡ºå‘ï¼Œæš´åŠ›æœç´¢æ‰€æœ‰å¯èƒ½çš„è§£å†³æ–¹æ¡ˆ
2. é€šè¿‡æ’åºå’Œå‰ªææ¥é¿å…ç”Ÿæˆé‡å¤çš„æ’åˆ—
3. ä½¿ç”¨ used æ•°ç»„è®°å½•æ¯ä¸ªä½ç½®çš„æ•°å­—æ˜¯å¦å·²ç»ä½¿ç”¨
4. å¯¹äºé‡å¤çš„æ•°å­—ï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯å®ƒä»¬åœ¨æ’åˆ—ä¸­çš„ç›¸å¯¹é¡ºåºï¼Œä»¥é¿å…é‡å¤

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. å¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œè®©ç›¸åŒçš„æ•°å­—ç›¸é‚»ï¼Œæ–¹ä¾¿å»é‡
2. ä½¿ç”¨ boolean æ•°ç»„ used æ ‡è®°å·²ä½¿ç”¨çš„æ•°å­—
3. ä½¿ç”¨å›æº¯æ³•ç”Ÿæˆæ‰€æœ‰æ’åˆ—ï¼š
   - å½“ä¸´æ—¶åˆ—è¡¨é•¿åº¦ç­‰äºæ•°ç»„é•¿åº¦æ—¶ï¼Œæ‰¾åˆ°ä¸€ä¸ªæœ‰æ•ˆæ’åˆ—
   - å¯¹äºæ¯ä¸ªå¯é€‰çš„æ•°å­—ï¼š
     - å¦‚æœå½“å‰æ•°å­—å·²ä½¿ç”¨ï¼Œè·³è¿‡
     - å¦‚æœå½“å‰æ•°å­—ä¸å‰ä¸€ä¸ªæ•°å­—ç›¸åŒä¸”å‰ä¸€ä¸ªæ•°å­—æœªä½¿ç”¨ï¼Œè·³è¿‡ï¼ˆå»é‡å…³é”®ï¼‰
     - é€‰æ‹©å½“å‰æ•°å­—ï¼Œç»§ç»­é€’å½’
     - å›æº¯ï¼Œæ’¤é”€é€‰æ‹©

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ nums = [1,1,2] ä¸ºä¾‹ï¼Œå±•ç¤ºå›æº¯è¿‡ç¨‹ï¼š

```
åˆå§‹çŠ¶æ€ï¼šnums = [1,1,2]ï¼ˆå·²æ’åºï¼‰
used = [false,false,false]

é€’å½’æ ‘ï¼ˆâœ“è¡¨ç¤ºæœ‰æ•ˆè·¯å¾„ï¼Œâœ—è¡¨ç¤ºå‰ªæï¼‰ï¼š
                    []
        1/          1âœ—         2\
      [1]          [1]        [2]
   1/    2\       å‰ªæ       1/  1\
[1,1]   [1,2]           [2,1]   å‰ªæ
  2|      1|             1|
[1,1,2] [1,2,1]       [2,1,1]
  âœ“        âœ“             âœ“

å‰ªæè¯´æ˜ï¼š
1. ç¬¬ä¸€å±‚ï¼š
   - é€‰æ‹©ç¬¬ä¸€ä¸ª 1ï¼š[1] âœ“
   - é€‰æ‹©ç¬¬äºŒä¸ª 1ï¼š[1] âœ—ï¼ˆä¸å‰ä¸€ä¸ª 1 ç›¸åŒä¸”å‰ä¸€ä¸ª 1 æœªä½¿ç”¨ï¼‰
   - é€‰æ‹© 2ï¼š[2] âœ“

2. ç¬¬äºŒå±‚ï¼ˆä»¥ [1] ä¸ºä¾‹ï¼‰ï¼š
   - é€‰æ‹©ç¬¬äºŒä¸ª 1ï¼š[1,1] âœ“
   - é€‰æ‹© 2ï¼š[1,2] âœ“

3. ç¬¬äºŒå±‚ï¼ˆä»¥ [2] ä¸ºä¾‹ï¼‰ï¼š
   - é€‰æ‹©ç¬¬ä¸€ä¸ª 1ï¼š[2,1] âœ“
   - é€‰æ‹©ç¬¬äºŒä¸ª 1ï¼š[2,1] âœ—ï¼ˆä¸å‰ä¸€ä¸ª 1 ç›¸åŒä¸”å‰ä¸€ä¸ª 1 æœªä½¿ç”¨ï¼‰

çŠ¶æ€å˜åŒ–è¡¨ï¼š
| æ­¥éª¤ | å½“å‰æ’åˆ— | used æ•°ç»„ | å¯é€‰æ•°å­— | æ“ä½œ |
|-----|---------|-----------|---------|------|
| 1 | [] | [F,F,F] | [1,1,2] | é€‰æ‹© nums[0]=1 |
| 2 | [1] | [T,F,F] | [1,2] | é€‰æ‹© nums[1]=1 |
| 3 | [1,1] | [T,T,F] | [2] | é€‰æ‹© nums[2]=2 |
| 4 | [1,1,2] | [T,T,T] | [] | æ‰¾åˆ°è§£ âœ“ |
| 5 | [1,1] | [T,T,F] | [2] | å›æº¯ |
| ... | ... | ... | ... | ... |

å»é‡æœºåˆ¶ï¼š
1. æ•°ç»„å·²æ’åºï¼š[1,1,2]
2. å¯¹äºç›¸åŒçš„æ•°å­—ï¼ˆä¸¤ä¸ª 1ï¼‰ï¼š
   - åªæœ‰å½“å‰é¢çš„ 1 å·²ç»ä½¿ç”¨ï¼ˆused[i-1]=trueï¼‰æ—¶
   - æ‰èƒ½ä½¿ç”¨åé¢çš„ 1
3. è¿™æ ·ç¡®ä¿ç›¸åŒæ•°å­—åœ¨æ’åˆ—ä¸­çš„ç›¸å¯¹é¡ºåºä¸€è‡´
4. é¿å…ç”Ÿæˆé‡å¤çš„æ’åˆ—
```

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0047_PermuteUnique.java](../src/main/java/L0047_PermuteUnique.java)

```java
public List<List<Integer>> permuteUnique(int[] nums) {
    List<List<Integer>> result = new ArrayList<>();
    // å…ˆæ’åºï¼Œè®©ç›¸åŒçš„æ•°å­—ç›¸é‚»ï¼Œæ–¹ä¾¿å»é‡
    Arrays.sort(nums);
    // ä½¿ç”¨ boolean æ•°ç»„æ ‡è®°å·²ä½¿ç”¨çš„æ•°å­—
    boolean[] used = new boolean[nums.length];
    backtrack(result, new ArrayList<>(), nums, used);
    return result;
}

private void backtrack(List<List<Integer>> result, List<Integer> tempList, int[] nums, boolean[] used) {
    // å½“ä¸´æ—¶åˆ—è¡¨çš„å¤§å°ç­‰äºæ•°ç»„é•¿åº¦æ—¶ï¼Œè¯´æ˜æ‰¾åˆ°äº†ä¸€ä¸ªæ’åˆ—
    if (tempList.size() == nums.length) {
        result.add(new ArrayList<>(tempList));
        return;
    }
    
    // å°è¯•å°†æ¯ä¸ªæ•°å­—åŠ å…¥ä¸´æ—¶åˆ—è¡¨
    for (int i = 0; i < nums.length; i++) {
        // å¦‚æœå½“å‰æ•°å­—å·²ç»ä½¿ç”¨è¿‡ï¼Œè·³è¿‡
        if (used[i]) {
            continue;
        }
        
        // å»é‡ï¼šå¦‚æœå½“å‰æ•°å­—ä¸å‰ä¸€ä¸ªæ•°å­—ç›¸åŒï¼Œä¸”å‰ä¸€ä¸ªæ•°å­—æœªè¢«ä½¿ç”¨ï¼Œè·³è¿‡
        // è¿™æ ·å¯ä»¥ç¡®ä¿ç›¸åŒæ•°å­—æŒ‰ç…§é¡ºåºä½¿ç”¨ï¼Œé¿å…äº§ç”Ÿé‡å¤æ’åˆ—
        if (i > 0 && nums[i] == nums[i - 1] && !used[i - 1]) {
            continue;
        }
        
        // å°†å½“å‰æ•°å­—æ ‡è®°ä¸ºå·²ä½¿ç”¨
        used[i] = true;
        // å°†å½“å‰æ•°å­—åŠ å…¥ä¸´æ—¶åˆ—è¡¨
        tempList.add(nums[i]);
        // é€’å½’è°ƒç”¨
        backtrack(result, tempList, nums, used);
        // å›æº¯ï¼Œç§»é™¤æœ€åæ·»åŠ çš„æ•°å­—ï¼Œå¹¶æ ‡è®°ä¸ºæœªä½¿ç”¨
        tempList.remove(tempList.size() - 1);
        used[i] = false;
    }
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(n Ã— n!)`
  - n æ˜¯æ•°ç»„çš„é•¿åº¦
  - å¯¹äºæ¯ä¸ªä½ç½®ï¼Œæœ€å¤šéœ€è¦å°è¯• n ä¸ªæ•°å­—
  - æ€»å…±æœ‰ n! ç§å¯èƒ½çš„æ’åˆ—
  - å®é™…å¤æ‚åº¦ä¼šå› ä¸ºå‰ªæè€Œé™ä½

- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(n)`
  - é€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦æœ€å¤§ä¸º n
  - used æ•°ç»„éœ€è¦ O(n) çš„ç©ºé—´
  - ä¸è€ƒè™‘å­˜å‚¨ç»“æœæ‰€éœ€çš„ç©ºé—´

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 