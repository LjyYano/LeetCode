---
title: æ·»åŠ ä¸æœç´¢å•è¯
date: 2024-02-09
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[æ·»åŠ ä¸æœç´¢å•è¯](https://leetcode.cn/problems/design-add-and-search-words-data-structure/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`è®¾è®¡` `å­—å…¸æ ‘` `æ·±åº¦ä¼˜å…ˆæœç´¢` `å­—ç¬¦ä¸²`  
**ğŸŸ¡ éš¾åº¦**ï¼š`ä¸­ç­‰`  

è¯·ä½ è®¾è®¡ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œæ”¯æŒ æ·»åŠ æ–°å•è¯ å’Œ æŸ¥æ‰¾å­—ç¬¦ä¸²æ˜¯å¦ä¸ä»»ä½•å…ˆå‰æ·»åŠ çš„å­—ç¬¦ä¸²åŒ¹é… ã€‚

å®ç°è¯å…¸ç±» WordDictionary ï¼š
- WordDictionary() åˆå§‹åŒ–è¯å…¸å¯¹è±¡
- void addWord(word) å°† word æ·»åŠ åˆ°æ•°æ®ç»“æ„ä¸­ï¼Œä¹‹åå¯ä»¥å¯¹å®ƒè¿›è¡ŒåŒ¹é…
- boolean search(word) å¦‚æœæ•°æ®ç»“æ„ä¸­å­˜åœ¨å­—ç¬¦ä¸²ä¸ word åŒ¹é…ï¼Œåˆ™è¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚word ä¸­å¯èƒ½åŒ…å«ä¸€äº› '.' ï¼Œæ¯ä¸ª . éƒ½å¯ä»¥è¡¨ç¤ºä»»ä½•ä¸€ä¸ªå­—æ¯ã€‚

ç¤ºä¾‹ï¼š
```
è¾“å…¥ï¼š
["WordDictionary","addWord","addWord","addWord","search","search","search","search"]
[[],["bad"],["dad"],["mad"],["pad"],["bad"],[".ad"],["b.."]]
è¾“å‡ºï¼š
[null,null,null,null,false,true,true,true]

è§£é‡Šï¼š
WordDictionary wordDictionary = new WordDictionary();
wordDictionary.addWord("bad");
wordDictionary.addWord("dad");
wordDictionary.addWord("mad");
wordDictionary.search("pad"); // è¿”å› False
wordDictionary.search("bad"); // è¿”å› True
wordDictionary.search(".ad"); // è¿”å› True
wordDictionary.search("b.."); // è¿”å› True
```

æç¤ºï¼š
- 1 <= word.length <= 25
- addWord ä¸­çš„ word ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
- search ä¸­çš„ word ç”± '.' æˆ–å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
- æœ€å¤šè°ƒç”¨ 10â´ æ¬¡ addWord å’Œ search

---

## è§£é¢˜æ€è·¯

### Trie æ ‘ + DFS

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
ä½¿ç”¨ Trie æ ‘ï¼ˆå‰ç¼€æ ‘ï¼‰æ¥å­˜å‚¨å•è¯ï¼Œå¹¶é€šè¿‡æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰æ¥æ”¯æŒé€šé…ç¬¦åŒ¹é…ã€‚Trie æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªå­—ç¬¦ï¼Œä»æ ¹èŠ‚ç‚¹åˆ°æŸä¸€èŠ‚ç‚¹çš„è·¯å¾„ä¸Šçš„å­—ç¬¦è¿æ¥èµ·æ¥å°±æ˜¯è¯¥èŠ‚ç‚¹å¯¹åº”çš„å­—ç¬¦ä¸²ã€‚

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. è®¾è®¡ Trie èŠ‚ç‚¹ç»“æ„ï¼š
   - children æ•°ç»„å­˜å‚¨å­èŠ‚ç‚¹ï¼ˆ26 ä¸ªå°å†™å­—æ¯ï¼‰
   - isEnd æ ‡è®°æ˜¯å¦æ˜¯å•è¯ç»“å°¾
2. å®ç° addWord æ–¹æ³•ï¼š
   - ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œä¸ºæ¯ä¸ªå­—ç¬¦åˆ›å»ºæˆ–æ›´æ–°èŠ‚ç‚¹
   - æœ€åä¸€ä¸ªå­—ç¬¦å¯¹åº”çš„èŠ‚ç‚¹æ ‡è®°ä¸ºå•è¯ç»“å°¾
3. å®ç° search æ–¹æ³•ï¼š
   - ä½¿ç”¨ DFS é€’å½’æœç´¢
   - é‡åˆ°é€šé…ç¬¦ '.' æ—¶ï¼Œå°è¯•æ‰€æœ‰å¯èƒ½çš„å­—ç¬¦
   - é‡åˆ°æ™®é€šå­—ç¬¦æ—¶ï¼ŒæŒ‰æ­£å¸¸è·¯å¾„æœç´¢

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ç¤ºä¾‹è¾“å…¥ä¸ºä¾‹ï¼Œåˆ†æ Trie æ ‘çš„æ„å»ºå’Œæœç´¢è¿‡ç¨‹ï¼š

1. æ·»åŠ å•è¯ "bad"ã€"dad"ã€"mad"ï¼š
```
root
â”œâ”€â”€ b
â”‚   â””â”€â”€ a
â”‚       â””â”€â”€ d*
â”œâ”€â”€ d
â”‚   â””â”€â”€ a
â”‚       â””â”€â”€ d*
â””â”€â”€ m
    â””â”€â”€ a
        â””â”€â”€ d*
```
ï¼ˆ* è¡¨ç¤ºå•è¯ç»“å°¾ï¼‰

2. æœç´¢è¿‡ç¨‹åˆ†æï¼š

| æœç´¢è¯ | æœç´¢è·¯å¾„ | ç»“æœ | è¯´æ˜ |
|-------|---------|------|------|
| "pad" | p â†’ null | false | 'p' ä¸å­˜åœ¨äºæ ‘ä¸­ |
| "bad" | b â†’ a â†’ d* | true | å®Œæ•´åŒ¹é…åˆ°å•è¯ |
| ".ad" | (b/d/m) â†’ a â†’ d* | true | '.' åŒ¹é… b/d/m ä»»ä¸€å­—ç¬¦ |
| "b.." | b â†’ (ä»»æ„) â†’ (ä»»æ„) | true | ä¸¤ä¸ª '.' éƒ½èƒ½æ‰¾åˆ°åŒ¹é… |

3. é€šé…ç¬¦æœç´¢ç¤ºæ„ï¼š
```
æœç´¢ ".ad" æ—¶ï¼š
1. ç¬¬ä¸€å±‚ï¼šå°è¯• [a-z] ä¸­çš„æ¯ä¸ªå­—ç¬¦
2. æ‰¾åˆ° b/d/m ä¸‰ä¸ªå¯èƒ½çš„åˆ†æ”¯
3. ç»§ç»­åŒ¹é… "ad"
4. æœ€ç»ˆæ‰¾åˆ°åŒ¹é…çš„å•è¯
```

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0211_WordDictionary.java](../src/main/java/L0211_WordDictionary.java)

```java
public class L0211_WordDictionary {
    private class TrieNode {
        private TrieNode[] children;
        private boolean isEnd;
        
        public TrieNode() {
            children = new TrieNode[26];
            isEnd = false;
        }
    }
    
    private TrieNode root;
    
    public L0211_WordDictionary() {
        root = new TrieNode();
    }
    
    public void addWord(String word) {
        TrieNode node = root;
        for (char c : word.toCharArray()) {
            int index = c - 'a';
            if (node.children[index] == null) {
                node.children[index] = new TrieNode();
            }
            node = node.children[index];
        }
        node.isEnd = true;
    }
    
    public boolean search(String word) {
        return searchHelper(word, 0, root);
    }
    
    private boolean searchHelper(String word, int index, TrieNode node) {
        if (index == word.length()) {
            return node.isEnd;
        }
        
        char c = word.charAt(index);
        if (c == '.') {
            for (TrieNode child : node.children) {
                if (child != null && searchHelper(word, index + 1, child)) {
                    return true;
                }
            }
            return false;
        } else {
            int childIndex = c - 'a';
            TrieNode child = node.children[childIndex];
            return child != null && searchHelper(word, index + 1, child);
        }
    }
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š
  - addWordï¼šO(m)ï¼Œå…¶ä¸­ m æ˜¯å•è¯é•¿åº¦
  - searchï¼š
    - æœ€å¥½æƒ…å†µï¼ˆæ— é€šé…ç¬¦ï¼‰ï¼šO(m)
    - æœ€åæƒ…å†µï¼ˆå…¨æ˜¯é€šé…ç¬¦ï¼‰ï¼šO(26áµ)ï¼Œéœ€è¦å°è¯•æ‰€æœ‰å¯èƒ½çš„è·¯å¾„

- **ç©ºé—´å¤æ‚åº¦**ï¼šO(N)
  - N æ˜¯æ‰€æœ‰å·²æ’å…¥å•è¯çš„å­—ç¬¦æ€»æ•°
  - æ¯ä¸ªå­—ç¬¦éœ€è¦ä¸€ä¸ª TrieNode å¯¹è±¡
  - é€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦ä¸ºå•è¯é•¿åº¦ m

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 