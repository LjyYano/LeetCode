---
title: å›æ–‡æ’åˆ— II
date: 2025-02-10
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[å›æ–‡æ’åˆ— II](https://leetcode.cn/problems/palindrome-permutation-ii/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`å“ˆå¸Œè¡¨` `å­—ç¬¦ä¸²` `å›æº¯`  
**ğŸŸ¡ éš¾åº¦**ï¼š`ä¸­ç­‰`  

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œè¿”å›å…¶é€šè¿‡é‡æ–°æ’åˆ—ç»„åˆåæ‰€æœ‰å¯èƒ½çš„å›æ–‡å­—ç¬¦ä¸²ï¼Œå¹¶å»é™¤é‡å¤çš„ç»„åˆã€‚
å¦‚ä¸èƒ½å½¢æˆä»»ä½•å›æ–‡æ’åˆ—æ—¶ï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºåˆ—è¡¨ã€‚

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥: "aabb"
è¾“å‡º: ["abba", "baab"]
```

ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥: "abc"
è¾“å‡º: []
```

---

## è§£é¢˜æ€è·¯
### å›æº¯ + å“ˆå¸Œè¡¨

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
1. é¦–å…ˆåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦èƒ½æ„æˆå›æ–‡ä¸²ï¼šæœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªå­—ç¬¦å‡ºç°å¥‡æ•°æ¬¡
2. å¦‚æœå¯ä»¥æ„æˆå›æ–‡ä¸²ï¼Œæˆ‘ä»¬åªéœ€è¦ç”Ÿæˆå›æ–‡ä¸²çš„ä¸€åŠï¼Œå¦ä¸€åŠæ˜¯å…¶é•œåƒ
3. ä½¿ç”¨å›æº¯æ³•ç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„æ’åˆ—ç»„åˆ

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. ç»Ÿè®¡å­—ç¬¦é¢‘ç‡ï¼š
   - ä½¿ç”¨ HashMap ç»Ÿè®¡æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°
   - æ£€æŸ¥æ˜¯å¦æœ€å¤šåªæœ‰ä¸€ä¸ªå­—ç¬¦å‡ºç°å¥‡æ•°æ¬¡
2. å‡†å¤‡å›æ–‡ä¸²çš„ä¸€åŠï¼š
   - å°†æ¯ä¸ªå­—ç¬¦çš„ä¸€åŠæ•°é‡åŠ å…¥åˆ—è¡¨
   - è®°å½•å‡ºç°å¥‡æ•°æ¬¡çš„å­—ç¬¦ï¼ˆå¦‚æœæœ‰ï¼‰
3. ä½¿ç”¨å›æº¯ç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„æ’åˆ—ï¼š
   - ä½¿ç”¨ Set å»é‡
   - å¯¹äºæ¯ä¸ªä½ç½®ï¼Œå°è¯•æ”¾ç½®æ¯ä¸ªå¯ç”¨çš„å­—ç¬¦
   - ç”Ÿæˆæ’åˆ—æ—¶æ³¨æ„é¿å…é‡å¤ï¼ˆç›¸åŒå­—ç¬¦è¦æŒ‰é¡ºåºä½¿ç”¨ï¼‰
4. æ„å»ºå®Œæ•´çš„å›æ–‡ä¸²ï¼š
   - ç”Ÿæˆä¸€åŠåï¼ŒåŠ ä¸Šä¸­é—´å­—ç¬¦ï¼ˆå¦‚æœæœ‰ï¼‰
   - å†åŠ ä¸Šå‰åŠéƒ¨åˆ†çš„é•œåƒ

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥è¾“å…¥ "aabbc" ä¸ºä¾‹ï¼Œæ¼”ç¤ºè§£é¢˜è¿‡ç¨‹ï¼š

1. ç»Ÿè®¡å­—ç¬¦é¢‘ç‡ï¼š
   ```
   a: 2 æ¬¡ï¼ˆå¶æ•°ï¼‰
   b: 2 æ¬¡ï¼ˆå¶æ•°ï¼‰
   c: 1 æ¬¡ï¼ˆå¥‡æ•°ï¼‰
   ```

2. æ£€æŸ¥æ˜¯å¦å¯ä»¥æ„æˆå›æ–‡ä¸²ï¼š
   ```
   åªæœ‰ c å‡ºç°å¥‡æ•°æ¬¡ â†’ å¯ä»¥æ„æˆå›æ–‡ä¸²
   c å°†ä½œä¸ºä¸­å¿ƒå­—ç¬¦
   ```

3. å‡†å¤‡å›æ–‡ä¸²çš„ä¸€åŠï¼š
   ```
   halfChars = [a, b]  // æ¯ä¸ªå­—ç¬¦å–ä¸€åŠæ•°é‡
   oddChar = 'c'       // ä¸­å¿ƒå­—ç¬¦
   ```

4. ç”Ÿæˆæ’åˆ—ï¼ˆå›æº¯è¿‡ç¨‹ï¼‰ï¼š
   | æ­¥éª¤ | å½“å‰æ’åˆ— | å‰©ä½™å­—ç¬¦ | æ“ä½œ |
   |-----|---------|----------|------|
   | 1 | [] | [a, b] | å¼€å§‹å›æº¯ |
   | 2 | [a] | [b] | é€‰æ‹© a |
   | 3 | [a, b] | [] | é€‰æ‹© b |
   | 4 | [b] | [a] | å›æº¯ï¼Œé€‰æ‹© b |
   | 5 | [b, a] | [] | é€‰æ‹© a |

5. æ„å»ºå®Œæ•´å›æ–‡ä¸²ï¼š
   ```
   [a, b] â†’ abcba   // half + oddChar + reversed(half)
   [b, a] â†’ bacab   // half + oddChar + reversed(half)
   ```

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0267_PalindromePermutationII.java](../src/main/java/L0267_PalindromePermutationII.java)

```java
public List<String> generatePalindromes(String s) {
    // ç»Ÿè®¡æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°
    Map<Character, Integer> countMap = new HashMap<>();
    for (char c : s.toCharArray()) {
        countMap.put(c, countMap.getOrDefault(c, 0) + 1);
    }
    
    // æ£€æŸ¥æ˜¯å¦å¯ä»¥å½¢æˆå›æ–‡ä¸²
    // æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªå­—ç¬¦å‡ºç°å¥‡æ•°æ¬¡
    char oddChar = 0;
    int oddCount = 0;
    List<Character> halfChars = new ArrayList<>();
    
    for (Map.Entry<Character, Integer> entry : countMap.entrySet()) {
        char c = entry.getKey();
        int count = entry.getValue();
        
        if (count % 2 == 1) {
            oddChar = c;
            oddCount++;
            if (oddCount > 1) {
                return new ArrayList<>(); // ä¸èƒ½å½¢æˆå›æ–‡ä¸²
            }
        }
        // å°†ä¸€åŠçš„å­—ç¬¦åŠ å…¥åˆ—è¡¨
        for (int i = 0; i < count / 2; i++) {
            halfChars.add(c);
        }
    }
    
    // ç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„æ’åˆ—
    Set<String> result = new HashSet<>();
    boolean[] used = new boolean[halfChars.size()];
    backtrack(halfChars, used, new StringBuilder(), oddChar, result);
    
    return new ArrayList<>(result);
}

private void backtrack(List<Character> halfChars, boolean[] used, 
        StringBuilder current, char oddChar, Set<String> result) {
    if (current.length() == halfChars.size()) {
        // æ„å»ºå›æ–‡ä¸²
        String half = current.toString();
        String reversedHalf = new StringBuilder(half).reverse().toString();
        if (oddChar != 0) {
            result.add(half + oddChar + reversedHalf);
        } else {
            result.add(half + reversedHalf);
        }
        return;
    }
    
    for (int i = 0; i < halfChars.size(); i++) {
        if (used[i] || (i > 0 && halfChars.get(i) == halfChars.get(i-1) && !used[i-1])) {
            continue;
        }
        used[i] = true;
        current.append(halfChars.get(i));
        backtrack(halfChars, used, current, oddChar, result);
        current.setLength(current.length() - 1);
        used[i] = false;
    }
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(n Ã— n!)ï¼Œå…¶ä¸­ n æ˜¯å­—ç¬¦ä¸²çš„ä¸€åŠé•¿åº¦ã€‚éœ€è¦ç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„æ’åˆ—ï¼Œæ¯ä¸ªæ’åˆ—éœ€è¦ O(n) çš„æ—¶é—´æ„å»ºå›æ–‡ä¸²ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼šO(n)ã€‚éœ€è¦å­˜å‚¨å­—ç¬¦é¢‘ç‡ç»Ÿè®¡ã€ä¸´æ—¶æ’åˆ—å’Œç»“æœé›†ã€‚é€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦ä¹Ÿæ˜¯ O(n)ã€‚

---

## LeetCode é¢˜è§£
     
æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚
     
<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 