---
title: ç”¨ Rand7() å®ç° Rand10()
date: 2024-03-19
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[ç”¨ Rand7() å®ç° Rand10()](https://leetcode.cn/problems/implement-rand10-using-rand7/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`éšæœº` `æ¦‚ç‡` `æ‹’ç»é‡‡æ ·`  
**ğŸŸ¡ éš¾åº¦**ï¼š`ä¸­ç­‰`  

ç»™å®šæ–¹æ³• rand7() å¯ç”Ÿæˆ [1,7] èŒƒå›´å†…çš„å‡åŒ€éšæœºæ•´æ•°ï¼Œè¯•å†™ä¸€ä¸ªæ–¹æ³• rand10() ç”Ÿæˆ [1,10] èŒƒå›´å†…çš„å‡åŒ€éšæœºæ•´æ•°ã€‚

ä½ åªèƒ½è°ƒç”¨ rand7() ä¸”ä¸èƒ½è°ƒç”¨å…¶ä»–æ–¹æ³•ã€‚è¯·ä¸è¦ä½¿ç”¨ç³»ç»Ÿçš„ Math.random() æ–¹æ³•ã€‚

æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹å°†æœ‰ä¸€ä¸ªå†…éƒ¨å‚æ•° nï¼Œå³ä½ å®ç°çš„å‡½æ•° rand10() åœ¨æµ‹è¯•æ—¶å°†è¢«è°ƒç”¨çš„æ¬¡æ•°ã€‚è¯·æ³¨æ„ï¼Œè¿™ä¸æ˜¯ä¼ é€’ç»™ rand10() çš„å‚æ•°ã€‚

ç¤ºä¾‹ 1ï¼š
è¾“å…¥: 1
è¾“å‡º: [2]

ç¤ºä¾‹ 2ï¼š
è¾“å…¥: 2
è¾“å‡º: [2,8]

ç¤ºä¾‹ 3ï¼š
è¾“å…¥: 3
è¾“å‡º: [3,8,10]

æç¤ºï¼š
1 <= n <= 10âµ

è¿›é˜¶ï¼š
rand7() è°ƒç”¨æ¬¡æ•°çš„ æœŸæœ›å€¼ æ˜¯å¤šå°‘ï¼Ÿ
ä½ èƒ½å¦å°½é‡å°‘è°ƒç”¨ rand7()?

---

## è§£é¢˜æ€è·¯
### æ‹’ç»é‡‡æ ·æ³•

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
æœ¬é¢˜çš„å…³é”®æ˜¯å¦‚ä½•åˆ©ç”¨ rand7() ç”Ÿæˆä¸€ä¸ªå‡åŒ€åˆ†å¸ƒçš„ rand10()ã€‚æˆ‘ä»¬éœ€è¦å…ˆç”Ÿæˆä¸€ä¸ªæ›´å¤§èŒƒå›´çš„å‡åŒ€éšæœºæ•°ï¼Œç„¶åé€šè¿‡æ‹’ç»é‡‡æ ·çš„æ–¹å¼å°†å…¶æ˜ å°„åˆ° [1,10] èŒƒå›´ã€‚

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. ä½¿ç”¨ (rand7() - 1) * 7 + rand7() ç”Ÿæˆ [1,49] èŒƒå›´çš„éšæœºæ•°
2. å¦‚æœç”Ÿæˆçš„æ•°å¤§äº 40ï¼Œåˆ™æ‹’ç»å¹¶é‡æ–°ç”Ÿæˆ
3. å°† [1,40] èŒƒå›´å†…çš„æ•°æ˜ å°„åˆ° [1,10] èŒƒå›´

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ç”Ÿæˆä¸€ä¸ª [1,10] èŒƒå›´çš„éšæœºæ•°ä¸ºä¾‹ï¼š

1. ç¬¬ä¸€æ¬¡å°è¯•ï¼š
```
rand7() = 3, (3-1)*7 = 14
rand7() = 5, 14+5 = 19
19 â‰¤ 40ï¼Œå¯ä»¥ä½¿ç”¨
æ˜ å°„ï¼š1 + (19-1)%10 = 9
```

2. ç¬¬äºŒæ¬¡å°è¯•ï¼ˆå‡è®¾ï¼‰ï¼š
```
rand7() = 7, (7-1)*7 = 42
rand7() = 6, 42+6 = 48
48 > 40ï¼Œæ‹’ç»ï¼Œé‡æ–°ç”Ÿæˆ
```

3. ç¬¬ä¸‰æ¬¡å°è¯•ï¼ˆå‡è®¾ï¼‰ï¼š
```
rand7() = 4, (4-1)*7 = 21
rand7() = 3, 21+3 = 24
24 â‰¤ 40ï¼Œå¯ä»¥ä½¿ç”¨
æ˜ å°„ï¼š1 + (24-1)%10 = 4
```

æ˜ å°„è¿‡ç¨‹è¡¨æ ¼å±•ç¤ºï¼š
| åŸå§‹èŒƒå›´ | æ˜ å°„åçš„å€¼ | è®¡ç®—æ–¹å¼ |
|---------|-----------|---------|
| 1-10 | 1-10 | 1 + (num-1)%10 |
| 11-20 | 1-10 | 1 + (num-1)%10 |
| 21-30 | 1-10 | 1 + (num-1)%10 |
| 31-40 | 1-10 | 1 + (num-1)%10 |
| 41-49 | æ‹’ç» | é‡æ–°ç”Ÿæˆ |

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0470_ImplementRand10UsingRand7.java](../src/main/java/L0470_ImplementRand10UsingRand7.java)

```java
public int rand10() {
    while (true) {
        // é¦–å…ˆä½¿ç”¨ rand7() ç”Ÿæˆ [1,49] èŒƒå›´å†…çš„éšæœºæ•°
        // (rand7() - 1) * 7 ç”Ÿæˆ [0,42] èŒƒå›´å†…çš„éšæœºæ•°
        // rand7() ç”Ÿæˆ [1,7] èŒƒå›´å†…çš„éšæœºæ•°
        int num = (rand7() - 1) * 7 + rand7();
        // å¦‚æœç”Ÿæˆçš„æ•°å¤§äº 40ï¼Œåˆ™é‡æ–°ç”Ÿæˆ
        // å› ä¸º 41-49 è¿™äº›æ•°ä¸èƒ½å‡åŒ€åœ°æ˜ å°„åˆ° 1-10
        if (num <= 40) {
            // å°† [1,40] æ˜ å°„åˆ° [1,10]
            return 1 + (num - 1) % 10;
        }
    }
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šæœŸæœ› O(1)ï¼Œæœ€åæƒ…å†µä¸‹ä¸º O(âˆ)
  - åœ¨ä¸€æ¬¡å¾ªç¯ä¸­ç”Ÿæˆæ‰€éœ€æ•°å­—çš„æ¦‚ç‡æ˜¯ 40/49
  - æœŸæœ›çš„å¾ªç¯æ¬¡æ•°æ˜¯ 49/40 â‰ˆ 1.23
  - æ‰€ä»¥å¹³å‡æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦å°‘é‡çš„å¾ªç¯å°±èƒ½å¾—åˆ°ç»“æœ

- **ç©ºé—´å¤æ‚åº¦**ï¼šO(1)
  - åªéœ€è¦å¸¸æ•°çº§çš„é¢å¤–ç©ºé—´å­˜å‚¨å˜é‡

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚