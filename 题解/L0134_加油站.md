---
title: 加油站
date: 2024-02-09
---

## 题目描述

**🔗 题目**：[加油站](https://leetcode.cn/problems/gas-station/)  
**🏷️ 标签**：`贪心` `数组`  
**🟡 难度**：`中等`  

在一条环路上有 n 个加油站，其中第 i 个加油站有汽油 gas[i] 升。你有一辆油箱容量无限的的汽车，从第 i 个加油站开往第 i+1 个加油站需要消耗汽油 cost[i] 升。你从其中的一个加油站出发，开始时油箱为空。

给定两个整数数组 gas 和 cost ，如果你可以按顺序绕环路行驶一周，则返回出发时加油站的编号，否则返回 -1 。如果存在解，则 保证 它是 唯一 的。

**示例 1：**
```
输入: gas = [1,2,3,4,5], cost = [3,4,5,1,2]
输出: 3
解释:
从 3 号加油站(索引为 3 处)出发，可获得 4 升汽油。此时油箱有 = 0 + 4 = 4 升汽油
开往 4 号加油站，此时油箱有 4 - 1 + 5 = 8 升汽油
开往 0 号加油站，此时油箱有 8 - 2 + 1 = 7 升汽油
开往 1 号加油站，此时油箱有 7 - 3 + 2 = 6 升汽油
开往 2 号加油站，此时油箱有 6 - 4 + 3 = 5 升汽油
开往 3 号加油站，此时油箱有 5 - 5 + 4 = 4 升汽油
你可以返回 3 号加油站，因为此时油箱中有 4 升汽油，足以返回 3 号加油站。
```

**示例 2：**
```
输入: gas = [2,3,4], cost = [3,4,3]
输出: -1
解释:
你不能从 0 号或 1 号加油站出发，因为没有足够的汽油可以让你行驶到下一个加油站。
我们从 2 号加油站出发，可以获得 4 升汽油。 此时油箱有 = 0 + 4 = 4 升汽油
开往 0 号加油站，此时油箱有 4 - 3 + 2 = 3 升汽油
开往 1 号加油站，此时油箱有 3 - 3 + 3 = 3 升汽油
你无法返回 2 号加油站，因为返程需要消耗 4 升汽油，但是你的油箱只有 3 升汽油。
因此，无论怎样，你都不可能绕环路行驶一周。
```

**提示：**
- gas.length == n
- cost.length == n
- 1 <= n <= 10⁵
- 0 <= gas[i], cost[i] <= 10⁴

---

## 解题思路

### 贪心算法

#### 📝 核心思想

这道题可以使用贪心算法来解决。关键在于理解以下几点：

1. 如果总油量小于总消耗，那么无论从哪个加油站出发都不可能绕一圈
2. 如果总油量大于等于总消耗，那么一定存在一个起始加油站可以绕一圈
3. 如果从加油站 i 出发无法到达加油站 j，那么从 i 和 j 之间的任何一个加油站出发，都无法到达加油站 j

#### 🛠️ 实现步骤

1. 初始化变量：
   - totalGas：记录总的剩余油量（gas[i] - cost[i] 的总和）
   - currGas：记录当前剩余油量
   - startStation：记录可能的起始加油站

2. 遍历所有加油站：
   - 更新 totalGas 和 currGas
   - 如果 currGas < 0，说明当前路线不可行：
     * 将起始站点设为下一个加油站
     * 重置 currGas 为 0

3. 最后判断：
   - 如果 totalGas >= 0，返回 startStation
   - 否则返回 -1

#### 🧩 示例分析

以示例 1 为例，分析整个过程：
```
gas  = [1,2,3,4,5]
cost = [3,4,5,1,2]
```

遍历过程：

| 位置 | gas[i]-cost[i] | currGas | totalGas | startStation | 说明 |
|-----|---------------|---------|----------|--------------|-----|
| 0 | -2 | -2 | -2 | 1 | currGas < 0，更新起点 |
| 1 | -2 | -2 | -4 | 2 | currGas < 0，更新起点 |
| 2 | -2 | -2 | -6 | 3 | currGas < 0，更新起点 |
| 3 | 3 | 3 | -3 | 3 | currGas >= 0，继续 |
| 4 | 3 | 6 | 0 | 3 | 遍历结束 |

最终 totalGas = 0 >= 0，说明存在解，返回 startStation = 3。

验证从 3 号站出发是否可行：
```
位置 3：获得 4 升油，消耗 1 升，剩余 3 升
位置 4：获得 5 升油，消耗 2 升，剩余 6 升
位置 0：获得 1 升油，消耗 3 升，剩余 4 升
位置 1：获得 2 升油，消耗 4 升，剩余 2 升
位置 2：获得 3 升油，消耗 5 升，剩余 0 升
回到位置 3：可以完成循环
```

---

## 代码实现

完整的可运行代码：[L0134_GasStation.java](../src/main/java/L0134_GasStation.java)

```java
public int canCompleteCircuit(int[] gas, int[] cost) {
    int n = gas.length;
    int totalGas = 0;    // 总油量
    int currGas = 0;     // 当前油量
    int startStation = 0; // 起始加油站
    
    for (int i = 0; i < n; i++) {
        totalGas += gas[i] - cost[i];
        currGas += gas[i] - cost[i];
        
        // 如果当前油量小于0，说明从起始加油站到当前加油站的路线不可行
        if (currGas < 0) {
            // 将起始加油站设为下一个加油站
            startStation = i + 1;
            // 重置当前油量
            currGas = 0;
        }
    }
    
    // 如果总油量小于0，说明无论从哪个加油站出发都不可能绕一圈
    return totalGas >= 0 ? startStation : -1;
}
```

---

## 复杂度分析

- **时间复杂度**：O(n)
  - 只需要遍历一次数组
  - n 是加油站的数量

- **空间复杂度**：O(1)
  - 只使用了几个变量来存储状态
  - 不需要额外的空间

---

## LeetCode 题解

本题解是 LeetCode 系列题解的一部分。该系列题解致力于帮助程序员更好地理解和掌握算法思维，内容包含详细的解题思路分析、图文并茂的示例讲解和完整的代码实现。

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode 最全题解](https://github.com/LjyYano/LeetCode)：持续更新中，欢迎 Star ⭐️ 关注，一起探讨算法之美。 