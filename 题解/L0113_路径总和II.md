---
title: è·¯å¾„æ€»å’Œ II
date: 2025-02-09
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[è·¯å¾„æ€»å’Œ II](https://leetcode.cn/problems/path-sum-ii/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`æ ‘` `æ·±åº¦ä¼˜å…ˆæœç´¢` `å›æº¯` `äºŒå‰æ ‘`  
**ğŸŸ¡ éš¾åº¦**ï¼š`ä¸­ç­‰`  

ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å’Œ targetSumï¼Œæ‰¾å‡ºæ‰€æœ‰ ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹ è·¯å¾„æ€»å’Œç­‰äºç»™å®šç›®æ ‡å’Œçš„è·¯å¾„ã€‚

å¶å­èŠ‚ç‚¹ æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚

ç¤ºä¾‹ 1ï¼š
![img](https://assets.leetcode.com/uploads/2021/01/18/pathsumii1.jpg)
```
è¾“å…¥ï¼šroot = [5,4,8,11,null,13,4,7,2,null,null,5,1], targetSum = 22
è¾“å‡ºï¼š[[5,4,11,2],[5,8,4,5]]
```

ç¤ºä¾‹ 2ï¼š
![img](https://assets.leetcode.com/uploads/2021/01/18/pathsum2.jpg)
```
è¾“å…¥ï¼šroot = [1,2,3], targetSum = 5
è¾“å‡ºï¼š[]
```

ç¤ºä¾‹ 3ï¼š
```
è¾“å…¥ï¼šroot = [1,2], targetSum = 0
è¾“å‡ºï¼š[]
```

æç¤ºï¼š
- æ ‘ä¸­èŠ‚ç‚¹æ€»æ•°åœ¨èŒƒå›´ [0, 5000] å†…
- -1000 <= Node.val <= 1000
- -1000 <= targetSum <= 1000

---

## è§£é¢˜æ€è·¯
### æ·±åº¦ä¼˜å…ˆæœç´¢ + å›æº¯

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
æœ¬é¢˜æ˜¯"è·¯å¾„æ€»å’Œ"çš„æ‰©å±•ï¼Œéœ€è¦æ‰¾å‡ºæ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„è·¯å¾„ï¼Œè€Œä¸ä»…ä»…æ˜¯åˆ¤æ–­æ˜¯å¦å­˜åœ¨è¿™æ ·çš„è·¯å¾„ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰é…åˆå›æº¯çš„æ–¹æ³•æ¥è§£å†³ï¼š

1. ç»´æŠ¤ä¸€ä¸ªè·¯å¾„åˆ—è¡¨ï¼Œè®°å½•ä»æ ¹èŠ‚ç‚¹åˆ°å½“å‰èŠ‚ç‚¹çš„è·¯å¾„
2. ä½¿ç”¨ DFS éå†äºŒå‰æ ‘ï¼ŒåŒæ—¶æ›´æ–°ç›®æ ‡å’Œ
3. å½“é‡åˆ°å¶å­èŠ‚ç‚¹ä¸”è·¯å¾„å’Œç­‰äºç›®æ ‡å€¼æ—¶ï¼Œå°†å½“å‰è·¯å¾„åŠ å…¥ç»“æœé›†
4. ä½¿ç”¨å›æº¯æ³•åœ¨éå†å®Œä¸€ä¸ªèŠ‚ç‚¹åï¼Œå°†å…¶ä»å½“å‰è·¯å¾„ä¸­åˆ é™¤

å…³é”®ç‚¹ï¼š
- éœ€è¦è®°å½•å®Œæ•´è·¯å¾„ï¼Œè€Œä¸ä»…ä»…æ˜¯åˆ¤æ–­æ˜¯å¦å­˜åœ¨
- ä½¿ç”¨å›æº¯æ³•æ¥ç»´æŠ¤å½“å‰è·¯å¾„
- åªæœ‰åœ¨å¶å­èŠ‚ç‚¹æ‰åˆ¤æ–­è·¯å¾„å’Œæ˜¯å¦ç¬¦åˆè¦æ±‚
- æ¯æ¬¡åŠ å…¥ç»“æœé›†æ—¶è¦åˆ›å»ºå½“å‰è·¯å¾„çš„å‰¯æœ¬

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. ç‰¹æ®Šæƒ…å†µå¤„ç†ï¼š
   - å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œè¿”å›ç©ºåˆ—è¡¨

2. åˆå§‹åŒ–ï¼š
   - åˆ›å»ºç»“æœåˆ—è¡¨ result å­˜å‚¨æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„è·¯å¾„
   - åˆ›å»ºå½“å‰è·¯å¾„åˆ—è¡¨ currentPath è®°å½•éå†è·¯å¾„

3. DFS + å›æº¯è¿‡ç¨‹ï¼š
   - å°†å½“å‰èŠ‚ç‚¹åŠ å…¥è·¯å¾„
   - åˆ¤æ–­æ˜¯å¦æ˜¯å¶å­èŠ‚ç‚¹ä¸”è·¯å¾„å’Œç­‰äºç›®æ ‡å€¼
   - é€’å½’å¤„ç†å·¦å³å­æ ‘
   - å›æº¯ï¼šç§»é™¤å½“å‰èŠ‚ç‚¹

4. è¿”å›ç»“æœï¼š
   - è¿”å›åŒ…å«æ‰€æœ‰æ»¡è¶³æ¡ä»¶è·¯å¾„çš„åˆ—è¡¨

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ç¤ºä¾‹ 1 ä¸ºä¾‹ï¼Œåˆ†æé€’å½’è¿‡ç¨‹ï¼š
```
       5
      / \
     4   8
    /   / \
   11  13  4
  /  \    / \
 7    2  5   1

ç›®æ ‡å’Œï¼š22

é€’å½’è¿‡ç¨‹ï¼ˆä»¥æ‰¾åˆ°ç¬¬ä¸€æ¡è·¯å¾„ä¸ºä¾‹ï¼‰ï¼š

1. è®¿é—®èŠ‚ç‚¹ 5ï¼š
   currentPath = [5]
   targetSum = 22 - 5 = 17

2. è®¿é—®å·¦å­èŠ‚ç‚¹ 4ï¼š
   currentPath = [5, 4]
   targetSum = 17 - 4 = 13

3. è®¿é—®èŠ‚ç‚¹ 11ï¼š
   currentPath = [5, 4, 11]
   targetSum = 13 - 11 = 2

4. è®¿é—®å³å­èŠ‚ç‚¹ 2ï¼š
   currentPath = [5, 4, 11, 2]
   targetSum = 2 - 2 = 0
   âœ… æ‰¾åˆ°ä¸€æ¡è·¯å¾„ï¼ŒåŠ å…¥ç»“æœé›†

5. å›æº¯è¿‡ç¨‹ï¼š
   - ç§»é™¤èŠ‚ç‚¹ 2ï¼šcurrentPath = [5, 4, 11]
   - ç§»é™¤èŠ‚ç‚¹ 11ï¼šcurrentPath = [5, 4]
   - ç§»é™¤èŠ‚ç‚¹ 4ï¼šcurrentPath = [5]
   ç»§ç»­æœç´¢å³å­æ ‘...
```

å¯¹äºç¤ºä¾‹ 2ï¼š
```
     1
    / \
   2   3

ç›®æ ‡å’Œï¼š5

1. è®¿é—®èŠ‚ç‚¹ 1ï¼š
   currentPath = [1]
   targetSum = 5 - 1 = 4

2. è®¿é—®å·¦å­èŠ‚ç‚¹ 2ï¼š
   currentPath = [1, 2]
   targetSum = 4 - 2 = 2
   âŒ æ˜¯å¶å­èŠ‚ç‚¹ä½†å’Œä¸ç­‰äºç›®æ ‡å€¼

3. è®¿é—®å³å­èŠ‚ç‚¹ 3ï¼š
   currentPath = [1, 3]
   targetSum = 4 - 3 = 1
   âŒ æ˜¯å¶å­èŠ‚ç‚¹ä½†å’Œä¸ç­‰äºç›®æ ‡å€¼

4. ç»“æœï¼š
   æ²¡æœ‰æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„è·¯å¾„ï¼Œè¿”å›ç©ºåˆ—è¡¨
```

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0113_PathSumII.java](../src/main/java/L0113_PathSumII.java)

```java
public List<List<Integer>> pathSum(TreeNode root, int targetSum) {
    List<List<Integer>> result = new ArrayList<>();
    // å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œç›´æ¥è¿”å›ç©ºåˆ—è¡¨
    if (root == null) {
        return result;
    }
    
    // ç”¨äºå­˜å‚¨å½“å‰è·¯å¾„
    List<Integer> currentPath = new ArrayList<>();
    // é€’å½’æŸ¥æ‰¾æ‰€æœ‰è·¯å¾„
    dfs(root, targetSum, currentPath, result);
    return result;
}

private void dfs(TreeNode node, int targetSum, List<Integer> currentPath, List<List<Integer>> result) {
    // å°†å½“å‰èŠ‚ç‚¹åŠ å…¥è·¯å¾„
    currentPath.add(node.val);
    
    // å¦‚æœæ˜¯å¶å­èŠ‚ç‚¹ï¼Œä¸”è·¯å¾„å’Œç­‰äºç›®æ ‡å’Œï¼Œå°†å½“å‰è·¯å¾„åŠ å…¥ç»“æœé›†
    if (node.left == null && node.right == null && targetSum == node.val) {
        result.add(new ArrayList<>(currentPath));
    }
    
    // é€’å½’éå†å·¦å­æ ‘
    if (node.left != null) {
        dfs(node.left, targetSum - node.val, currentPath, result);
    }
    
    // é€’å½’éå†å³å­æ ‘
    if (node.right != null) {
        dfs(node.right, targetSum - node.val, currentPath, result);
    }
    
    // å›æº¯ï¼šç§»é™¤å½“å‰èŠ‚ç‚¹
    currentPath.remove(currentPath.size() - 1);
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(nÂ²)
  - éœ€è¦éå†æ‰€æœ‰èŠ‚ç‚¹ä¸€æ¬¡ï¼Œn æ˜¯äºŒå‰æ ‘ä¸­çš„èŠ‚ç‚¹æ•°
  - å¯¹äºæ¯ä¸ªå¶å­èŠ‚ç‚¹ï¼Œéœ€è¦å¤åˆ¶å½“å‰è·¯å¾„ï¼Œå¤åˆ¶è·¯å¾„çš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)
  - æœ€åæƒ…å†µä¸‹ï¼Œæ‰€æœ‰èŠ‚ç‚¹éƒ½åœ¨ä¸€æ¡è·¯å¾„ä¸Šï¼Œä¸”éƒ½æ˜¯æ»¡è¶³æ¡ä»¶çš„è·¯å¾„

- **ç©ºé—´å¤æ‚åº¦**ï¼šO(n)
  - é€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦ç­‰äºæ ‘çš„é«˜åº¦ï¼Œæœ€åæƒ…å†µä¸‹ä¸º O(n)
  - å­˜å‚¨å½“å‰è·¯å¾„çš„ç©ºé—´ä¸º O(n)
  - ä¸è€ƒè™‘å­˜å‚¨æœ€ç»ˆç»“æœæ‰€éœ€çš„ç©ºé—´

---

## ç›¸å…³é¢˜ç›®

- [112. è·¯å¾„æ€»å’Œ](https://leetcode.cn/problems/path-sum/)
- [437. è·¯å¾„æ€»å’Œ III](https://leetcode.cn/problems/path-sum-iii/)
- [129. æ±‚æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹æ•°å­—ä¹‹å’Œ](https://leetcode.cn/problems/sum-root-to-leaf-numbers/)

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 