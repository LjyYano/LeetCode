---
title: 数字的补数
date: 2024-02-12
---

## 题目描述

**🔗 题目**：[476. 数字的补数](https://leetcode.cn/problems/number-complement/)  
**🏷️ 标签**：`位运算` `数学`  
**🟢 难度**：`简单`  

对整数的二进制表示取反（0 变 1 ，1 变 0）后，再转换为十进制表示，可以得到这个整数的补数。

例如，整数 `5` 的二进制表示是 `"101"` ，取反后得到 `"010"` ，再转回十进制表示得到补数 `2` 。

给你一个整数 `num` ，输出它的补数。

**示例 1：**
```
输入：num = 5
输出：2
解释：5 的二进制表示为 101（没有前导零位），其补数为 010。所以你需要输出 2 。
```

**示例 2：**
```
输入：num = 1
输出：0
解释：1 的二进制表示为 1（没有前导零位），其补数为 0。所以你需要输出 0 。
```

**提示：**
- `1 <= num < 2^31`

---

## 解题思路

### 位运算法

#### 📝 核心思想
这道题的关键在于找到一个掩码（mask），使得这个掩码的所有位都是 1，并且位数与 num 的有效位数相同。然后用这个掩码与 num 进行异或运算，就能得到补数。

#### 🛠️ 实现步骤
1. 找到 num 的最高位 1 的位置
2. 构造一个掩码，使得掩码的所有位都是 1，位数与 num 相同
3. 用掩码与 num 进行异或运算

#### 🧩 示例分析
以示例 1 为例：`num = 5`

1. 5 的二进制表示为 `101`
2. 构造掩码 `111` (即 7)
3. 5 ^ 7 = 101 ^ 111 = 010 = 2

### 方法一：找最高位

我们可以通过不断右移找到最高位的位置，然后构造掩码。

### 方法二：使用 highestOneBit

Java 提供了 `Integer.highestOneBit()` 方法，可以直接找到最高位的 1。

---

## 代码实现

```java
public class L0476_NumberComplement {
    // 解法一：构造掩码
    public int findComplement(int num) {
        // 找到最高位
        int mask = num;
        mask |= mask >> 1;
        mask |= mask >> 2;
        mask |= mask >> 4;
        mask |= mask >> 8;
        mask |= mask >> 16;
        
        // 异或得到补数
        return num ^ mask;
    }
    
    // 解法二：使用 highestOneBit
    public int findComplementV2(int num) {
        // 找到最高位的位置
        int highestBit = Integer.highestOneBit(num);
        // 构造掩码：(highestBit << 1) - 1
        int mask = (highestBit << 1) - 1;
        // 异或得到补数
        return num ^ mask;
    }
}
```

---

## 复杂度分析

- **时间复杂度**：O(1)，位运算的次数是固定的。
- **空间复杂度**：O(1)，只使用了常数额外空间。

---

## 相关题目

- [🔗 191. 位1的个数](https://leetcode.cn/problems/number-of-1-bits/)
- [🔗 231. 2的幂](https://leetcode.cn/problems/power-of-two/)
- [🔗 1009. 十进制整数的反码](https://leetcode.cn/problems/complement-of-base-10-integer/)

---

## 总结

这道题是位运算的一个简单应用。解题的关键在于：
1. 理解补数的定义：对二进制表示取反
2. 构造合适的掩码来进行异或运算
3. 掌握位运算的技巧

通过这道题，我们可以学习到：
1. 如何使用位运算找到最高位
2. 如何构造掩码
3. 异或运算的应用

---

## LeetCode 题解

本题解是 LeetCode 系列题解的一部分。该系列题解致力于帮助程序员更好地理解和掌握算法思维，内容包含详细的解题思路分析、图文并茂的示例讲解和完整的代码实现。

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode 最全题解](https://github.com/LjyYano/LeetCode)：持续更新中，欢迎 Star ⭐️ 关注，一起探讨算法之美。 