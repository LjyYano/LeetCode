---
title: æ—‹è½¬å‡½æ•°
date: 2024-03-27
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[æ—‹è½¬å‡½æ•°](https://leetcode.cn/problems/rotate-function/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`æ•°ç»„` `æ•°å­¦` `åŠ¨æ€è§„åˆ’`  
**ğŸŸ¡ éš¾åº¦**ï¼š`ä¸­ç­‰`  

ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•´æ•°æ•°ç»„ numsã€‚

å‡è®¾ arrk æ˜¯æ•°ç»„ nums é¡ºæ—¶é’ˆæ—‹è½¬ k ä¸ªä½ç½®åçš„æ•°ç»„ï¼Œæˆ‘ä»¬å®šä¹‰ nums çš„ "æ—‹è½¬å‡½æ•°" F ä¸ºï¼š
- F(k) = 0 * arrk[0] + 1 * arrk[1] + ... + (n - 1) * arrk[n - 1]

è¿”å› F(0), F(1), ..., F(n-1) ä¸­çš„æœ€å¤§å€¼ã€‚

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥: nums = [4,3,2,6]
è¾“å‡º: 26
è§£é‡Š:
F(0) = (0 * 4) + (1 * 3) + (2 * 2) + (3 * 6) = 0 + 3 + 4 + 18 = 25
F(1) = (0 * 6) + (1 * 4) + (2 * 3) + (3 * 2) = 0 + 4 + 6 + 6 = 16
F(2) = (0 * 2) + (1 * 6) + (2 * 4) + (3 * 3) = 0 + 6 + 8 + 9 = 23
F(3) = (0 * 3) + (1 * 2) + (2 * 6) + (3 * 4) = 0 + 2 + 12 + 12 = 26
```

ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥: nums = [100]
è¾“å‡º: 0
```

æç¤ºï¼š
- n == nums.length
- 1 <= n <= 10âµ
- -100 <= nums[i] <= 100

---

## è§£é¢˜æ€è·¯

### æ•°å­¦æ¨å¯¼æ³•

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
è¿™é“é¢˜çš„å…³é”®åœ¨äºæ‰¾å‡º F(k) å’Œ F(k-1) ä¹‹é—´çš„å…³ç³»ã€‚é€šè¿‡è§‚å¯Ÿå¯ä»¥å‘ç°ï¼Œæ¯æ¬¡æ—‹è½¬åï¼Œæ¯ä¸ªæ•°å­—çš„ç³»æ•°éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä½†å˜åŒ–æ˜¯æœ‰è§„å¾‹çš„ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ•°å­¦æ¨å¯¼æ‰¾å‡ºè¿™ä¸ªè§„å¾‹ï¼Œä»è€Œé¿å…é‡å¤è®¡ç®—ã€‚

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. è®¡ç®—åˆå§‹çŠ¶æ€ F(0) å’Œæ•°ç»„å…ƒç´ ä¹‹å’Œ sum
2. æ¨å¯¼ F(k) å’Œ F(k-1) çš„å…³ç³»
3. ä½¿ç”¨æ¨å¯¼å‡ºçš„å…¬å¼è®¡ç®—æ‰€æœ‰ F(k)
4. è¿”å›æœ€å¤§å€¼

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ç¤ºä¾‹ 1 ä¸ºä¾‹ï¼šnums = [4,3,2,6]ï¼Œn = 4

1. é¦–å…ˆè®¡ç®— F(0)ï¼š
   ```
   F(0) = 0*4 + 1*3 + 2*2 + 3*6 = 25
   sum = 4 + 3 + 2 + 6 = 15
   ```

2. è§‚å¯Ÿ F(0) åˆ° F(1) çš„å˜åŒ–ï¼š
   | ä½ç½® | F(0) | F(1) | å˜åŒ– |
   |-----|------|------|------|
   | 0 | 0*4 | 0*6 | 0 |
   | 1 | 1*3 | 1*4 | +1 |
   | 2 | 2*2 | 2*3 | +2 |
   | 3 | 3*6 | 3*2 | -12 |
   
   å¯ä»¥å‘ç°ï¼šF(1) = F(0) + sum - n*nums[n-1]

3. ç»§ç»­æ¨å¯¼ï¼š
   ```
   F(0) = 25
   F(1) = F(0) + 15 - 4*6 = 25 + 15 - 24 = 16
   F(2) = F(1) + 15 - 4*2 = 16 + 15 - 8 = 23
   F(3) = F(2) + 15 - 4*3 = 23 + 15 - 12 = 26
   ```

4. æ‰¾åˆ°æœ€å¤§å€¼ï¼š
   ```
   F(0) = 25
   F(1) = 16
   F(2) = 23
   F(3) = 26
   æœ€å¤§å€¼ä¸º 26
   ```

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0396_RotateFunction.java](../src/main/java/L0396_RotateFunction.java)

```java
public int maxRotateFunction(int[] nums) {
    // è®¡ç®—æ•°ç»„çš„é•¿åº¦å’Œæ‰€æœ‰å…ƒç´ çš„å’Œ
    int n = nums.length;
    int sum = 0;
    int F = 0;
    
    // è®¡ç®— F(0) å’Œæ•°ç»„å…ƒç´ å’Œ
    for (int i = 0; i < n; i++) {
        F += i * nums[i];
        sum += nums[i];
    }
    
    // è®°å½•æœ€å¤§å€¼ï¼Œåˆå§‹ä¸º F(0)
    int maxF = F;
    
    // è®¡ç®— F(1) åˆ° F(n-1)
    // F(k) = F(k-1) + sum - n * nums[n-k]
    for (int k = 1; k < n; k++) {
        F = F + sum - n * nums[n - k];
        maxF = Math.max(maxF, F);
    }
    
    return maxF;
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(n)
  - ç¬¬ä¸€æ¬¡éå†è®¡ç®— F(0) å’Œ sumï¼šO(n)
  - ç¬¬äºŒæ¬¡éå†è®¡ç®— F(1) åˆ° F(n-1)ï¼šO(n)
  - æ€»ä½“æ—¶é—´å¤æ‚åº¦ä¸º O(n)

- **ç©ºé—´å¤æ‚åº¦**ï¼šO(1)
  - åªä½¿ç”¨äº†å‡ ä¸ªå˜é‡æ¥å­˜å‚¨ä¸­é—´ç»“æœ
  - ä¸éœ€è¦é¢å¤–çš„æ•°ç»„ç©ºé—´

---

## ç®—æ³•ä¼˜åŒ–

1. **é¢„å¤„ç†ä¼˜åŒ–**
   ```java
   public int maxRotateFunction(int[] nums) {
       int n = nums.length;
       long sum = 0, weightedSum = 0;
       for (int i = 0; i < n; i++) {
           sum += nums[i];
           weightedSum += (long) i * nums[i];
       }
       long max = weightedSum;
       for (int i = n - 1; i > 0; i--) {
           weightedSum = weightedSum + sum - (long) n * nums[i];
           max = Math.max(max, weightedSum);
       }
       return (int) max;
   }
   ```
   ä½¿ç”¨ long ç±»å‹é¿å…æ•´æ•°æº¢å‡ºã€‚

2. **ç©ºé—´æ¢æ—¶é—´**
   ```java
   public int maxRotateFunction(int[] nums) {
       int n = nums.length;
       int[] prefixSum = new int[n + 1];
       for (int i = 0; i < n; i++) {
           prefixSum[i + 1] = prefixSum[i] + nums[i];
       }
       // ... ä½¿ç”¨å‰ç¼€å’Œæ•°ç»„åŠ é€Ÿè®¡ç®—
   }
   ```
   ä½¿ç”¨å‰ç¼€å’Œæ•°ç»„å¯ä»¥ä¼˜åŒ–æŸäº›åœºæ™¯ä¸‹çš„è®¡ç®—ã€‚

3. **å¾ªç¯ä¼˜åŒ–**
   ```java
   public int maxRotateFunction(int[] nums) {
       int n = nums.length;
       if (n == 1) return 0;
       // ... å…¶ä»–ä¼˜åŒ–é€»è¾‘
   }
   ```
   æ·»åŠ ç‰¹æ®Šæƒ…å†µçš„å¤„ç†å¯ä»¥æå‰è¿”å›ç»“æœã€‚

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 