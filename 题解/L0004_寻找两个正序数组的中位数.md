---
title: å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°
date: 2024-02-06
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°](https://leetcode.cn/problems/median-of-two-sorted-arrays/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`æ•°ç»„` `äºŒåˆ†æŸ¥æ‰¾` `åˆ†æ²»`  
**ğŸ”´ éš¾åº¦**ï¼š`å›°éš¾`  

ç»™å®šä¸¤ä¸ªå¤§å°åˆ†åˆ«ä¸º `m` å’Œ `n` çš„æ­£åºï¼ˆä»å°åˆ°å¤§ï¼‰æ•°ç»„ `nums1` å’Œ `nums2`ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›è¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ **ä¸­ä½æ•°** ã€‚

ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åº”è¯¥ä¸º `O(log (m+n))` ã€‚

**ç¤ºä¾‹ 1ï¼š**
```
è¾“å…¥ï¼šnums1 = [1,3], nums2 = [2]
è¾“å‡ºï¼š2.00000
è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3] ï¼Œä¸­ä½æ•° 2
```

**ç¤ºä¾‹ 2ï¼š**
```
è¾“å…¥ï¼šnums1 = [1,2], nums2 = [3,4]
è¾“å‡ºï¼š2.50000
è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3,4] ï¼Œä¸­ä½æ•° (2 + 3) / 2 = 2.5
```

**æç¤ºï¼š**
- `nums1.length == m`
- `nums2.length == n`
- `0 <= m <= 1000`
- `0 <= n <= 1000`
- `1 <= m + n <= 2000`
- `-106 <= nums1[i], nums2[i] <= 106`

---

## è§£é¢˜æ€è·¯

### äºŒåˆ†æŸ¥æ‰¾æ³•

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
é€šè¿‡äºŒåˆ†æŸ¥æ‰¾åœ¨è¾ƒçŸ­çš„æ•°ç»„ä¸­æ‰¾åˆ°ä¸€ä¸ªåˆ†å‰²ç‚¹ï¼Œä½¿å¾—ï¼š
1. åˆ†å‰²ç‚¹å·¦è¾¹çš„æ‰€æœ‰å…ƒç´ å°äºç­‰äºåˆ†å‰²ç‚¹å³è¾¹çš„æ‰€æœ‰å…ƒç´ 
2. å·¦å³ä¸¤è¾¹çš„å…ƒç´ ä¸ªæ•°ç›¸ç­‰ï¼ˆæˆ–å·¦è¾¹æ¯”å³è¾¹å¤šä¸€ä¸ªï¼‰

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. ç¡®ä¿ nums1 æ˜¯è¾ƒçŸ­çš„æ•°ç»„ï¼ˆå¦‚æœä¸æ˜¯åˆ™äº¤æ¢ï¼‰ï¼Œè¿™æ ·å¯ä»¥å‡å°‘äºŒåˆ†æŸ¥æ‰¾çš„æ¬¡æ•°
2. åœ¨ nums1 ä¸­è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œå¯¹äºæ¯ä¸ªåˆ†å‰²ç‚¹ iï¼š
   - è®¡ç®— nums2 ä¸­å¯¹åº”çš„åˆ†å‰²ç‚¹ j = (m + n + 1) / 2 - i
   - åˆ¤æ–­åˆ†å‰²æ˜¯å¦åˆé€‚ï¼š
     * nums1[i-1] <= nums2[j] ä¸” nums2[j-1] <= nums1[i]
   - å¦‚æœä¸åˆé€‚ï¼Œè°ƒæ•´äºŒåˆ†æŸ¥æ‰¾çš„èŒƒå›´
3. æ ¹æ®æ•°ç»„æ€»é•¿åº¦çš„å¥‡å¶æ€§è¿”å›ä¸­ä½æ•°ï¼š
   - å¥‡æ•°ï¼šè¿”å›å·¦åŠéƒ¨åˆ†çš„æœ€å¤§å€¼
   - å¶æ•°ï¼šè¿”å›å·¦åŠéƒ¨åˆ†æœ€å¤§å€¼å’Œå³åŠéƒ¨åˆ†æœ€å°å€¼çš„å¹³å‡å€¼

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ `nums1 = [1,3], nums2 = [2]` ä¸ºä¾‹ï¼š

| æ­¥éª¤ | nums1 åˆ†å‰²ç‚¹ | nums2 åˆ†å‰²ç‚¹ | å·¦åŠéƒ¨åˆ† | å³åŠéƒ¨åˆ† | ä¸­ä½æ•°åˆ¤æ–­ | è¯´æ˜ |
|------|-------------|-------------|-----------|-----------|------------|------|
| åˆå§‹çŠ¶æ€ | - | - | - | - | - | ç¡®ä¿ nums1 æ˜¯è¾ƒçŸ­æ•°ç»„ |
| Step 1 | i=1 | j=1 | nums1_left=[1]<br>nums2_left=[2] | nums1_right=[3]<br>nums2_right=[] | 1 < âˆ ä¸” 2 < 3 | åˆ†å‰²æœ‰æ•ˆ |

**åˆ†å‰²ç¤ºæ„å›¾**ï¼š
```
nums1: [1 | 3]
       â†‘
nums2: [2 |]
       â†‘
å·¦åŠéƒ¨åˆ†æœ€å¤§å€¼ï¼šmax(1,2) = 2
å³åŠéƒ¨åˆ†æœ€å°å€¼ï¼šmin(3,âˆ) = 3
```

**è¯¦ç»†åˆ†æ**ï¼š
1. æ•°ç»„é•¿åº¦ï¼š
   - nums1 é•¿åº¦ m = 2
   - nums2 é•¿åº¦ n = 1
   - æ€»é•¿åº¦ m + n = 3ï¼ˆå¥‡æ•°ï¼‰

2. åˆ†å‰²ä½ç½®è®¡ç®—ï¼š
   - i = 1ï¼ˆnums1 çš„åˆ†å‰²ç‚¹ï¼‰
   - j = (m + n + 1)/2 - i = (3 + 1)/2 - 1 = 1

3. è¾¹ç•Œå€¼æ¯”è¾ƒï¼š
   ```
   nums1_left_max = nums1[i-1] = 1
   nums1_right_min = nums1[i] = 3
   nums2_left_max = nums2[j-1] = 2
   nums2_right_min = âˆ (j å·²åˆ°æœ«å°¾)
   ```

4. éªŒè¯åˆ†å‰²çš„æœ‰æ•ˆæ€§ï¼š
   - nums1_left_max(1) â‰¤ nums2_right_min(âˆ)
   - nums2_left_max(2) â‰¤ nums1_right_min(3)

**ç‰¹æ®Šæƒ…å†µç¤ºä¾‹**ï¼š
1. å¶æ•°é•¿åº¦æ•°ç»„ï¼š
ä»¥ `nums1 = [1,2], nums2 = [3,4]` ä¸ºä¾‹ï¼š

| æ­¥éª¤ | nums1 åˆ†å‰²ç‚¹ | nums2 åˆ†å‰²ç‚¹ | å·¦åŠéƒ¨åˆ† | å³åŠéƒ¨åˆ† | ä¸­ä½æ•°è®¡ç®— | è¯´æ˜ |
|------|-------------|-------------|-----------|-----------|------------|------|
| Step 1 | i=1 | j=1 | nums1_left=[1]<br>nums2_left=[3] | nums1_right=[2]<br>nums2_right=[4] | (max(1,3) + min(2,4))/2 = 2.5 | åˆ†å‰²æœ‰æ•ˆ |

```
nums1: [1 | 2]
       â†‘
nums2: [3 | 4]
       â†‘
å·¦åŠéƒ¨åˆ†æœ€å¤§å€¼ï¼šmax(1,3) = 3
å³åŠéƒ¨åˆ†æœ€å°å€¼ï¼šmin(2,4) = 2
ä¸­ä½æ•°ï¼š(3 + 2)/2 = 2.5
```

2. ä¸€ä¸ªæ•°ç»„ä¸ºç©ºï¼š
ä»¥ `nums1 = [], nums2 = [1]` ä¸ºä¾‹ï¼š

| æ­¥éª¤ | nums1 åˆ†å‰²ç‚¹ | nums2 åˆ†å‰²ç‚¹ | å·¦åŠéƒ¨åˆ† | å³åŠéƒ¨åˆ† | ä¸­ä½æ•° | è¯´æ˜ |
|------|-------------|-------------|-----------|-----------|--------|------|
| Step 1 | i=0 | j=1 | nums2_left=[1] | nums2_right=[] | 1 | ç›´æ¥è¿”å› nums2 çš„ä¸­ä½æ•° |

```
nums1: [|]
nums2: [1|]
       â†‘
ä¸­ä½æ•°ï¼š1
```

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0004_MedianOfTwoSortedArrays.java](../src/main/java/L0004_MedianOfTwoSortedArrays.java)

```java
public double findMedianSortedArrays(int[] nums1, int[] nums2) {
    // ç¡®ä¿ nums1 æ˜¯è¾ƒçŸ­çš„æ•°ç»„ï¼Œä¼˜åŒ–æ—¶é—´å¤æ‚åº¦
    if (nums1.length > nums2.length) {
        int[] temp = nums1;
        nums1 = nums2;
        nums2 = temp;
    }
    
    int m = nums1.length;
    int n = nums2.length;
    
    // åœ¨ nums1 çš„åŒºé—´ [0, m] ä¸­æŸ¥æ‰¾æ°å½“çš„åˆ†å‰²ç‚¹
    int left = 0;
    int right = m;
    
    while (left <= right) {
        // nums1 çš„åˆ†å‰²ç‚¹
        int i = (left + right) / 2;
        // nums2 çš„åˆ†å‰²ç‚¹
        int j = (m + n + 1) / 2 - i;
        
        // nums1 åˆ†å‰²ç‚¹å·¦è¾¹çš„å…ƒç´ 
        int nums1LeftMax = (i == 0) ? Integer.MIN_VALUE : nums1[i - 1];
        // nums1 åˆ†å‰²ç‚¹å³è¾¹çš„å…ƒç´ 
        int nums1RightMin = (i == m) ? Integer.MAX_VALUE : nums1[i];
        // nums2 åˆ†å‰²ç‚¹å·¦è¾¹çš„å…ƒç´ 
        int nums2LeftMax = (j == 0) ? Integer.MIN_VALUE : nums2[j - 1];
        // nums2 åˆ†å‰²ç‚¹å³è¾¹çš„å…ƒç´ 
        int nums2RightMin = (j == n) ? Integer.MAX_VALUE : nums2[j];
        
        // æ‰¾åˆ°åˆé€‚çš„åˆ†å‰²ç‚¹
        if (nums1LeftMax <= nums2RightMin && nums2LeftMax <= nums1RightMin) {
            // å¦‚æœæ€»é•¿åº¦ä¸ºå¥‡æ•°
            if ((m + n) % 2 == 1) {
                return Math.max(nums1LeftMax, nums2LeftMax);
            }
            // å¦‚æœæ€»é•¿åº¦ä¸ºå¶æ•°
            else {
                return (Math.max(nums1LeftMax, nums2LeftMax) + 
                       Math.min(nums1RightMin, nums2RightMin)) / 2.0;
            }
        }
        // éœ€è¦è°ƒæ•´åˆ†å‰²ç‚¹
        else if (nums1LeftMax > nums2RightMin) {
            right = i - 1;
        }
        else {
            left = i + 1;
        }
    }
    
    throw new IllegalArgumentException("è¾“å…¥æ•°ç»„ä¸æ˜¯æœ‰åºçš„");
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š`O(log(min(m,n)))`ï¼Œå…¶ä¸­ m å’Œ n åˆ†åˆ«æ˜¯ä¸¤ä¸ªæ•°ç»„çš„é•¿åº¦ã€‚æˆ‘ä»¬å¯¹è¾ƒçŸ­çš„æ•°ç»„è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦å–å†³äºè¾ƒçŸ­æ•°ç»„çš„é•¿åº¦ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼š`O(1)`ï¼Œæˆ‘ä»¬åªéœ€è¦å¸¸æ•°çº§åˆ«çš„é¢å¤–ç©ºé—´æ¥å­˜å‚¨å˜é‡ã€‚

---

## LeetCode é¢˜è§£

[LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode) 