---
title: 加一
date: 2025-02-09
---

## 题目描述

**🔗 题目**：[加一](https://leetcode.cn/problems/plus-one/)  
**🏷️ 标签**：`数组` `数学`  
**🟢 难度**：`简单`  

给定一个由 整数 组成的 非空 数组所表示的非负整数，在该数的基础上加一。

最高位数字存放在数组的首位， 数组中每个元素只存储单个数字。

你可以假设除了整数 0 之外，这个整数不会以零开头。

示例 1：
```
输入：digits = [1,2,3]
输出：[1,2,4]
解释：输入数组表示数字 123，加 1 得到 124。
```

示例 2：
```
输入：digits = [4,3,2,1]
输出：[4,3,2,2]
解释：输入数组表示数字 4321，加 1 得到 4322。
```

示例 3：
```
输入：digits = [9]
输出：[1,0]
解释：输入数组表示数字 9，加 1 得到 10。
```

提示：
- 1 <= digits.length <= 100
- 0 <= digits[i] <= 9

---

## 解题思路

### 数组操作

#### 📝 核心思想
这道题本质上是模拟数字加法的过程，特别是处理进位的情况。我们从数组的最后一位开始处理，如果当前位小于 9，直接加 1 并返回；如果是 9，需要进位处理。

#### 🛠️ 实现步骤
1. 从数组最后一位开始向前遍历
2. 对于每一位数字：
   - 如果小于 9，直接加 1 并返回结果
   - 如果等于 9，将当前位置为 0，继续处理前一位
3. 如果遍历完整个数组都没有返回：
   - 说明原数组全是 9
   - 需要创建一个新数组，长度比原数组多 1
   - 将新数组的首位置为 1，其余位置默认为 0

#### 🧩 示例分析
以几个典型示例来说明算法的工作过程：

1. 普通情况 `[1,2,3]`：
```
初始状态：[1,2,3]
最后一位 3 < 9：
  3 + 1 = 4
直接返回：[1,2,4]
```

2. 有进位情况 `[1,2,9]`：
```
初始状态：[1,2,9]
最后一位是 9：
  将 9 置为 0，继续处理前一位
前一位 2 < 9：
  2 + 1 = 3
返回：[1,3,0]
```

3. 全是 9 的情况 `[9,9,9]`：
```
初始状态：[9,9,9]
处理最后一位：9 → 0
处理倒数第二位：9 → 0
处理第一位：9 → 0
所有位都处理完了还没返回：
  创建新数组 [1,0,0,0]
返回：[1,0,0,0]
```

**特殊情况处理**：
1. 单个数字：
```
输入：[5]
输出：[6]
说明：直接加 1 即可
```

2. 末尾连续的 9：
```
输入：[2,3,9,9]
输出：[2,4,0,0]
说明：需要处理连续进位
```

3. 全是 9：
```
输入：[9,9,9]
输出：[1,0,0,0]
说明：需要扩展数组长度
```

---

## 代码实现

完整的可运行代码：[L0066_PlusOne.java](../src/main/java/L0066_PlusOne.java)

```java
public int[] plusOne(int[] digits) {
    // 从最后一位开始处理
    for (int i = digits.length - 1; i >= 0; i--) {
        // 如果当前位小于 9，直接加 1 并返回
        if (digits[i] < 9) {
            digits[i]++;
            return digits;
        }
        // 当前位是 9，加 1 后需要进位，将当前位置为 0
        digits[i] = 0;
    }
    
    // 如果程序执行到这里，说明所有位都是 9
    // 需要创建一个新数组，长度比原数组多 1，首位为 1，其余为 0
    int[] result = new int[digits.length + 1];
    result[0] = 1;
    return result;
}
```

---

## 复杂度分析

- **时间复杂度**：O(n)
  - 最坏情况下需要遍历整个数组一次（当数组中所有数字都是 9 时）
  - 最好情况下只需要访问最后一个元素（当最后一个数字小于 9 时）

- **空间复杂度**：O(1)
  - 大多数情况下，我们只需要在原数组上进行修改，不需要额外空间
  - 只有在输入数组全是 9 的情况下，才需要创建一个新数组，这种情况的空间复杂度是 O(n)
  - 但由于这种情况非常特殊，我们通常认为空间复杂度是 O(1)

---

## LeetCode 题解

本题解是 LeetCode 系列题解的一部分。该系列题解致力于帮助程序员更好地理解和掌握算法思维，内容包含详细的解题思路分析、图文并茂的示例讲解和完整的代码实现。

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode 最全题解](https://github.com/LjyYano/LeetCode)：持续更新中，欢迎 Star ⭐️ 关注，一起探讨算法之美。 