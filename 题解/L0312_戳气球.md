---
title: æˆ³æ°”çƒ
date: 2025-02-10
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[æˆ³æ°”çƒ](https://leetcode.cn/problems/burst-balloons/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`æ•°ç»„` `åŠ¨æ€è§„åˆ’`  
**ğŸ”´ éš¾åº¦**ï¼š`å›°éš¾`  

æœ‰ n ä¸ªæ°”çƒï¼Œç¼–å·ä¸º 0 åˆ° n - 1ï¼Œæ¯ä¸ªæ°”çƒä¸Šéƒ½æ ‡æœ‰ä¸€ä¸ªæ•°å­—ï¼Œè¿™äº›æ•°å­—å­˜åœ¨æ•°ç»„ nums ä¸­ã€‚

ç°åœ¨è¦æ±‚ä½ æˆ³ç ´æ‰€æœ‰çš„æ°”çƒã€‚æˆ³ç ´ç¬¬ i ä¸ªæ°”çƒï¼Œä½ å¯ä»¥è·å¾— nums[i - 1] * nums[i] * nums[i + 1] æšç¡¬å¸ã€‚ è¿™é‡Œçš„ i - 1 å’Œ i + 1 ä»£è¡¨å’Œ i ç›¸é‚»çš„ä¸¤ä¸ªæ°”çƒçš„åºå·ã€‚å¦‚æœ i - 1 æˆ– i + 1 è¶…å‡ºäº†æ•°ç»„çš„è¾¹ç•Œï¼Œé‚£ä¹ˆå°±å½“å®ƒæ˜¯ä¸€ä¸ªæ•°å­—ä¸º 1 çš„æ°”çƒã€‚

æ±‚æ‰€èƒ½è·å¾—ç¡¬å¸çš„æœ€å¤§æ•°é‡ã€‚

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šnums = [3,1,5,8]
è¾“å‡ºï¼š167
è§£é‡Šï¼š
nums = [3,1,5,8] --> [3,5,8] --> [3,8] --> [8] --> []
coins =  3*1*5    +   3*5*8   +  1*3*8  + 1*8*1 = 15 + 120 + 24 + 8 = 167
```

ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šnums = [1,5]
è¾“å‡ºï¼š10
```

æç¤ºï¼š
- n == nums.length
- 1 <= n <= 300
- 0 <= nums[i] <= 100

---

## è§£é¢˜æ€è·¯
### åŒºé—´åŠ¨æ€è§„åˆ’

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
è¿™é“é¢˜çš„å…³é”®åœ¨äºç†è§£ï¼šæˆ‘ä»¬åº”è¯¥ä»"æœ€åä¸€ä¸ªæˆ³ç ´çš„æ°”çƒ"çš„è§’åº¦æ¥æ€è€ƒï¼Œè€Œä¸æ˜¯"ç¬¬ä¸€ä¸ªæˆ³ç ´çš„æ°”çƒ"ã€‚åŸå› æ˜¯ï¼š
1. å¦‚æœæˆ‘ä»¬è€ƒè™‘ç¬¬ä¸€ä¸ªæˆ³ç ´çš„æ°”çƒï¼Œé‚£ä¹ˆæˆ³ç ´åï¼ŒåŸæ¥ç›¸é‚»çš„æ°”çƒå˜æˆæ–°çš„ç›¸é‚»æ°”çƒï¼ŒçŠ¶æ€å¾ˆéš¾è½¬ç§»
2. å¦‚æœæˆ‘ä»¬è€ƒè™‘æœ€åä¸€ä¸ªæˆ³ç ´çš„æ°”çƒï¼Œé‚£ä¹ˆè¿™ä¸ªæ°”çƒçš„å·¦å³ä¸¤è¾¹å·²ç»è¢«æˆ³ç ´ï¼Œå½¢æˆäº†ä¸¤ä¸ªç‹¬ç«‹çš„å­é—®é¢˜

å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒºé—´åŠ¨æ€è§„åˆ’ï¼Œå®šä¹‰çŠ¶æ€ dp[i][j] è¡¨ç¤ºæˆ³ç ´å¼€åŒºé—´ (i,j) å†…æ‰€æœ‰æ°”çƒèƒ½å¾—åˆ°çš„æœ€å¤§ç¡¬å¸æ•°ã€‚

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. æ•°ç»„é¢„å¤„ç†ï¼š
   - åœ¨åŸæ•°ç»„é¦–å°¾å„æ·»åŠ ä¸€ä¸ª 1ï¼Œç®€åŒ–è¾¹ç•Œå¤„ç†
   - æ–°æ•°ç»„ newNums é•¿åº¦ä¸º n+2

2. å®šä¹‰çŠ¶æ€ï¼š
   - dp[i][j] è¡¨ç¤ºæˆ³ç ´å¼€åŒºé—´ (i,j) å†…æ‰€æœ‰æ°”çƒèƒ½å¾—åˆ°çš„æœ€å¤§ç¡¬å¸æ•°
   - i å’Œ j æ˜¯å¼€åŒºé—´ï¼Œå³ä¸åŒ…å« i å’Œ j

3. çŠ¶æ€è½¬ç§»ï¼š
   - æšä¸¾åŒºé—´é•¿åº¦ lenï¼Œä»å°åˆ°å¤§
   - æšä¸¾åŒºé—´å·¦ç«¯ç‚¹ i
   - è®¡ç®—åŒºé—´å³ç«¯ç‚¹ j = i + len - 1
   - æšä¸¾æœ€åä¸€ä¸ªæˆ³ç ´çš„æ°”çƒ kï¼Œk çš„èŒƒå›´ä¸º [i+1, j]
   - çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š
     dp[i][j] = max(dp[i][j], dp[i][k-1] + dp[k+1][j] + nums[i] * nums[k] * nums[j])

4. è¿”å›ç»“æœï¼š
   - æœ€ç»ˆç»“æœä¸º dp[1][n]ï¼Œè¡¨ç¤ºæˆ³ç ´å¼€åŒºé—´ (1,n) å†…æ‰€æœ‰æ°”çƒçš„æœ€å¤§ç¡¬å¸æ•°

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ç¤ºä¾‹ 1ï¼šnums = [3,1,5,8] ä¸ºä¾‹ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ç®—æ³•æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š

1. é¢„å¤„ç†æ•°ç»„ï¼š
```
åŸæ•°ç»„ï¼š[3,1,5,8]
å¤„ç†åï¼š[1,3,1,5,8,1]  // é¦–å°¾æ·»åŠ  1
```

2. åŠ¨æ€è§„åˆ’è¿‡ç¨‹ï¼š

| åŒºé—´é•¿åº¦ | åŒºé—´ | æœ€åæˆ³ç ´çš„æ°”çƒ | è·å¾—çš„ç¡¬å¸ | è¯´æ˜ |
|---------|-----|--------------|-----------|-----|
| 1 | (1,2) | 2 | 3 | 1Ã—3Ã—1 = 3 |
| 1 | (2,3) | 3 | 5 | 1Ã—1Ã—5 = 5 |
| 1 | (3,4) | 4 | 40 | 1Ã—5Ã—8 = 40 |
| 1 | (4,5) | 5 | 8 | 5Ã—8Ã—1 = 40 |
| 2 | (1,3) | 2 | 15 | 1Ã—3Ã—5 = 15 |
| 2 | (2,4) | 3 | 40 | 1Ã—1Ã—8 = 8 |
| 2 | (3,5) | 4 | 120 | 1Ã—5Ã—1 = 5 |
| 3 | (1,4) | 3 | 135 | åŒ…å«å¤šç§æƒ…å†µ |
| 3 | (2,5) | 4 | 48 | åŒ…å«å¤šç§æƒ…å†µ |
| 4 | (1,5) | 3 | 167 | æœ€ç»ˆç»“æœ |

è®©æˆ‘ä»¬è¯¦ç»†åˆ†æä¸€ä¸ªå…·ä½“çš„çŠ¶æ€è½¬ç§»è¿‡ç¨‹ã€‚ä»¥åŒºé—´ (1,4) ä¸ºä¾‹ï¼š
1. å¯ä»¥é€‰æ‹©çš„æœ€åä¸€ä¸ªæ°”çƒæ˜¯ 2ã€3
2. å¦‚æœé€‰æ‹© 3 ä½œä¸ºæœ€åæˆ³ç ´çš„æ°”çƒï¼š
   - å·¦è¾¹åŒºé—´ (1,2) çš„æœ€å¤§å€¼ï¼š3
   - å³è¾¹åŒºé—´ (3,4) çš„æœ€å¤§å€¼ï¼š40
   - æˆ³ç ´ 3 è·å¾—çš„ç¡¬å¸ï¼š1Ã—1Ã—8 = 8
   - æ€»å’Œï¼š3 + 40 + 8 = 51

3. é€šè¿‡æšä¸¾æ‰€æœ‰å¯èƒ½çš„æœ€åä¸€ä¸ªæ°”çƒï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°æœ€ä¼˜è§£ã€‚

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0312_BurstBalloons.java](../src/main/java/L0312_BurstBalloons.java)

```java
public class L0312_BurstBalloons {
    
    public int maxCoins(int[] nums) {
        int n = nums.length;
        // åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œåœ¨é¦–å°¾å„æ·»åŠ ä¸€ä¸ª 1
        int[] newNums = new int[n + 2];
        newNums[0] = 1;
        newNums[n + 1] = 1;
        for (int i = 0; i < n; i++) {
            newNums[i + 1] = nums[i];
        }
        
        // dp[i][j] è¡¨ç¤ºæˆ³ç ´ (i,j) å¼€åŒºé—´å†…çš„æ‰€æœ‰æ°”çƒèƒ½å¾—åˆ°çš„æœ€å¤§ç¡¬å¸æ•°
        int[][] dp = new int[n + 2][n + 2];
        
        // len è¡¨ç¤ºå¼€åŒºé—´çš„é•¿åº¦
        for (int len = 1; len <= n; len++) {
            // i è¡¨ç¤ºå¼€åŒºé—´çš„å·¦ç«¯ç‚¹
            for (int i = 1; i <= n - len + 1; i++) {
                int j = i + len - 1;  // j è¡¨ç¤ºå¼€åŒºé—´çš„å³ç«¯ç‚¹
                // k è¡¨ç¤ºæœ€åä¸€ä¸ªè¢«æˆ³ç ´çš„æ°”çƒ
                for (int k = i; k <= j; k++) {
                    // è®¡ç®—æˆ³ç ´æ°”çƒ k æ—¶è·å¾—çš„ç¡¬å¸æ•°
                    int coins = newNums[i - 1] * newNums[k] * newNums[j + 1];
                    // åŠ ä¸Šæˆ³ç ´å·¦å³ä¸¤è¾¹æ°”çƒèƒ½å¾—åˆ°çš„æœ€å¤§ç¡¬å¸æ•°
                    coins += dp[i][k - 1] + dp[k + 1][j];
                    dp[i][j] = Math.max(dp[i][j], coins);
                }
            }
        }
        
        return dp[1][n];
    }
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(nÂ³)ï¼Œå…¶ä¸­ n æ˜¯æ°”çƒçš„æ•°é‡ã€‚æˆ‘ä»¬éœ€è¦è®¡ç®— O(nÂ²) ä¸ªçŠ¶æ€ï¼Œæ¯ä¸ªçŠ¶æ€éœ€è¦ O(n) çš„æ—¶é—´æšä¸¾æœ€åä¸€ä¸ªæˆ³ç ´çš„æ°”çƒã€‚

- **ç©ºé—´å¤æ‚åº¦**ï¼šO(nÂ²)ã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ª nÃ—n çš„äºŒç»´æ•°ç»„æ¥å­˜å‚¨æ‰€æœ‰çŠ¶æ€ã€‚

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 