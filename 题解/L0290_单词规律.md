---
title: å•è¯è§„å¾‹
date: 2024-03-24
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[å•è¯è§„å¾‹](https://leetcode.cn/problems/word-pattern/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`å“ˆå¸Œè¡¨` `å­—ç¬¦ä¸²`  
**ğŸŸ¢ éš¾åº¦**ï¼š`ç®€å•`  

ç»™å®šä¸€ç§è§„å¾‹ pattern å’Œä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œåˆ¤æ–­ s æ˜¯å¦éµå¾ªç›¸åŒçš„è§„å¾‹ã€‚

è¿™é‡Œçš„ éµå¾ª æŒ‡å®Œå…¨åŒ¹é…ï¼Œä¾‹å¦‚ï¼Œ pattern é‡Œçš„æ¯ä¸ªå­—æ¯å’Œå­—ç¬¦ä¸² s ä¸­çš„æ¯ä¸ªéç©ºå•è¯ä¹‹é—´å­˜åœ¨ç€åŒå‘è¿æ¥çš„å¯¹åº”è§„å¾‹ã€‚

ç¤ºä¾‹ 1:
```
è¾“å…¥: pattern = "abba", s = "dog cat cat dog"
è¾“å‡º: true
```

ç¤ºä¾‹ 2:
```
è¾“å…¥: pattern = "abba", s = "dog cat cat fish"
è¾“å‡º: false
```

ç¤ºä¾‹ 3:
```
è¾“å…¥: pattern = "aaaa", s = "dog dog dog dog"
è¾“å‡º: true
```

æç¤º:
- 1 <= pattern.length <= 300
- pattern åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯
- 1 <= s.length <= 3000
- s åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯å’Œ ' '
- s ä¸åŒ…å«ä»»ä½•å‰å¯¼æˆ–å°¾éšå¯¹ç©ºæ ¼
- s ä¸­æ¯ä¸ªå•è¯éƒ½è¢« å•ä¸ªç©ºæ ¼ åˆ†éš”

---

## è§£é¢˜æ€è·¯
### åŒå‘æ˜ å°„

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
ä½¿ç”¨ä¸¤ä¸ªå“ˆå¸Œè¡¨æ¥ç»´æŠ¤å­—ç¬¦å’Œå•è¯ä¹‹é—´çš„åŒå‘æ˜ å°„å…³ç³»ã€‚éœ€è¦ç¡®ä¿ï¼š
1. æ¯ä¸ªå­—ç¬¦åªèƒ½æ˜ å°„åˆ°ä¸€ä¸ªå•è¯
2. æ¯ä¸ªå•è¯åªèƒ½æ˜ å°„åˆ°ä¸€ä¸ªå­—ç¬¦
3. æ˜ å°„å¿…é¡»æ˜¯ä¸€ä¸€å¯¹åº”çš„

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. å°†å­—ç¬¦ä¸² s æŒ‰ç©ºæ ¼åˆ†å‰²æˆå•è¯æ•°ç»„
2. æ£€æŸ¥æ¨¡å¼é•¿åº¦å’Œå•è¯æ•°ç»„é•¿åº¦æ˜¯å¦ç›¸ç­‰
3. åˆ›å»ºä¸¤ä¸ªå“ˆå¸Œè¡¨ï¼š
   - charToWordï¼šå­˜å‚¨å­—ç¬¦åˆ°å•è¯çš„æ˜ å°„
   - wordToCharï¼šå­˜å‚¨å•è¯åˆ°å­—ç¬¦çš„æ˜ å°„
4. éå†æ¨¡å¼å’Œå•è¯æ•°ç»„ï¼š
   - æ£€æŸ¥å½“å‰å­—ç¬¦åˆ°å•è¯çš„æ˜ å°„æ˜¯å¦ä¸€è‡´
   - æ£€æŸ¥å½“å‰å•è¯åˆ°å­—ç¬¦çš„æ˜ å°„æ˜¯å¦ä¸€è‡´
5. å¦‚æœæ‰€æœ‰æ˜ å°„éƒ½ä¸€è‡´ï¼Œè¿”å› trueï¼›å¦åˆ™è¿”å› false

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ç¤ºä¾‹ 1 ä¸ºä¾‹ï¼špattern = "abba", s = "dog cat cat dog"

1. åˆå§‹çŠ¶æ€ï¼š
```
charToWord = {}
wordToChar = {}
```

2. å¤„ç†ç¬¬ä¸€ä¸ªå­—ç¬¦ 'a' å’Œå•è¯ "dog"ï¼š
```
charToWord = {'a' -> "dog"}
wordToChar = {"dog" -> 'a'}
```

3. å¤„ç†ç¬¬äºŒä¸ªå­—ç¬¦ 'b' å’Œå•è¯ "cat"ï¼š
```
charToWord = {'a' -> "dog", 'b' -> "cat"}
wordToChar = {"dog" -> 'a', "cat" -> 'b'}
```

4. å¤„ç†ç¬¬ä¸‰ä¸ªå­—ç¬¦ 'b' å’Œå•è¯ "cat"ï¼š
```
æ£€æŸ¥ charToWord['b'] == "cat" âœ“
æ£€æŸ¥ wordToChar["cat"] == 'b' âœ“
æ˜ å°„ä¸€è‡´ï¼Œç»§ç»­
```

5. å¤„ç†ç¬¬å››ä¸ªå­—ç¬¦ 'a' å’Œå•è¯ "dog"ï¼š
```
æ£€æŸ¥ charToWord['a'] == "dog" âœ“
æ£€æŸ¥ wordToChar["dog"] == 'a' âœ“
æ˜ å°„ä¸€è‡´ï¼Œè¿”å› true
```

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0290_WordPattern.java](../src/main/java/L0290_WordPattern.java)

```java
public boolean wordPattern(String pattern, String s) {
    // å°†å­—ç¬¦ä¸²æŒ‰ç©ºæ ¼åˆ†å‰²æˆå•è¯æ•°ç»„
    String[] words = s.split(" ");
    
    // å¦‚æœæ¨¡å¼å’Œå•è¯æ•°é‡ä¸ç›¸ç­‰ï¼Œç›´æ¥è¿”å› false
    if (pattern.length() != words.length) {
        return false;
    }
    
    // åˆ›å»ºä¸¤ä¸ªæ˜ å°„ï¼Œåˆ†åˆ«å­˜å‚¨å­—ç¬¦åˆ°å•è¯å’Œå•è¯åˆ°å­—ç¬¦çš„æ˜ å°„å…³ç³»
    Map<Character, String> charToWord = new HashMap<>();
    Map<String, Character> wordToChar = new HashMap<>();
    
    // éå†æ¨¡å¼å’Œå•è¯æ•°ç»„
    for (int i = 0; i < pattern.length(); i++) {
        char c = pattern.charAt(i);
        String word = words[i];
        
        // æ£€æŸ¥å­—ç¬¦åˆ°å•è¯çš„æ˜ å°„
        if (charToWord.containsKey(c)) {
            if (!charToWord.get(c).equals(word)) {
                return false;
            }
        } else {
            charToWord.put(c, word);
        }
        
        // æ£€æŸ¥å•è¯åˆ°å­—ç¬¦çš„æ˜ å°„
        if (wordToChar.containsKey(word)) {
            if (wordToChar.get(word) != c) {
                return false;
            }
        } else {
            wordToChar.put(word, c);
        }
    }
    
    return true;
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯å­—ç¬¦ä¸² s çš„é•¿åº¦
  - åˆ†å‰²å­—ç¬¦ä¸²éœ€è¦ O(n) æ—¶é—´
  - éå†æ¨¡å¼å’Œå•è¯æ•°ç»„éœ€è¦ O(m) æ—¶é—´ï¼Œå…¶ä¸­ m æ˜¯æ¨¡å¼çš„é•¿åº¦
  - å“ˆå¸Œè¡¨çš„æ“ä½œæ—¶é—´å¤æ‚åº¦ä¸º O(1)

- **ç©ºé—´å¤æ‚åº¦**ï¼šO(m)ï¼Œå…¶ä¸­ m æ˜¯æ¨¡å¼çš„é•¿åº¦
  - éœ€è¦å­˜å‚¨å­—ç¬¦åˆ°å•è¯å’Œå•è¯åˆ°å­—ç¬¦çš„æ˜ å°„
  - æ¯ä¸ªå­—ç¬¦å’Œå•è¯æœ€å¤šåªä¼šè¢«å­˜å‚¨ä¸€æ¬¡

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 