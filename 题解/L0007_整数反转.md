---
title: 整数反转
date: 2024-02-06
---

## 题目描述

**🔗 题目**：[整数反转](https://leetcode.cn/problems/reverse-integer/)  
**🏷️ 标签**：`数学`  
**🟡 难度**：`中等`  

给你一个 32 位的有符号整数 `x` ，返回将 `x` 中的数字部分反转后的结果。

如果反转后整数超过 32 位的有符号整数的范围 `[−2^31, 2^31 − 1]` ，就返回 `0`。

**假设环境不允许存储 64 位整数（有符号或无符号）。**

**示例 1：**
```
输入：x = 123
输出：321
```

**示例 2：**
```
输入：x = -123
输出：-321
```

**示例 3：**
```
输入：x = 120
输出：21
```

**示例 4：**
```
输入：x = 0
输出：0
```

**提示：**
- `-2^31 <= x <= 2^31 - 1`

---

## 解题思路

### 数学方法

#### 📝 核心思想
通过不断取出数字的最后一位并构建反转后的数字，同时需要处理溢出的情况。由于不能使用 64 位整数，我们需要在计算过程中判断是否会溢出。

#### 🛠️ 实现步骤
1. 初始化结果变量 result = 0
2. 当输入数字 x 不为 0 时：
   - 通过 x % 10 获取最后一位数字 digit
   - 判断 result * 10 + digit 是否会导致溢出
   - 如果不会溢出，则更新 result = result * 10 + digit
   - 更新 x = x / 10 去掉最后一位
3. 返回最终结果

#### 🧩 示例分析
以 `x = 123` 为例：

```text
初始状态：
x = 123, result = 0

第一步：
digit = 123 % 10 = 3
result = 0 * 10 + 3 = 3
x = 123 / 10 = 12

第二步：
digit = 12 % 10 = 2
result = 3 * 10 + 2 = 32
x = 12 / 10 = 1

第三步：
digit = 1 % 10 = 1
result = 32 * 10 + 1 = 321
x = 1 / 10 = 0

结束，返回 321
```

#### 溢出处理
对于 32 位整数：
- 最大值 (2^31 - 1) = 2147483647
- 最小值 (-2^31) = -2147483648

因此，在添加新的数字之前，我们需要检查：
1. 对于正数，如果 result > Integer.MAX_VALUE/10 或者 result == Integer.MAX_VALUE/10 且 digit > 7，会溢出
2. 对于负数，如果 result < Integer.MIN_VALUE/10 或者 result == Integer.MIN_VALUE/10 且 digit < -8，会溢出

---

## 代码实现

完整的可运行代码：[L0007_ReverseInteger.java](../src/main/java/L0007_ReverseInteger.java)

```java
public int reverse(int x) {
    // 结果
    int result = 0;
    
    // 当 x 不为 0 时继续处理
    while (x != 0) {
        // 取出最后一位数字
        int digit = x % 10;
        
        // 判断是否会溢出
        // 对于正数，result > Integer.MAX_VALUE/10 或者 result == Integer.MAX_VALUE/10 且 digit > 7 时会溢出
        // 对于负数，result < Integer.MIN_VALUE/10 或者 result == Integer.MIN_VALUE/10 且 digit < -8 时会溢出
        if (result > Integer.MAX_VALUE / 10 || (result == Integer.MAX_VALUE / 10 && digit > 7)) {
            return 0;
        }
        if (result < Integer.MIN_VALUE / 10 || (result == Integer.MIN_VALUE / 10 && digit < -8)) {
            return 0;
        }
        
        // 将当前数字加入结果
        result = result * 10 + digit;
        
        // 去掉已处理的最后一位
        x /= 10;
    }
    
    return result;
}
```

---

## 复杂度分析

- **时间复杂度**：`O(log|x|)`，其中 |x| 是输入整数的绝对值。我们需要遍历 x 的每一位数字，而 x 的位数就是 log|x|。
- **空间复杂度**：`O(1)`，我们只需要常数级别的额外空间来存储变量。

---

## LeetCode 题解

[LeetCode 最全题解](https://github.com/LjyYano/LeetCode) 