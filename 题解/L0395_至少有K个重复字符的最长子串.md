---
title: è‡³å°‘æœ‰ K ä¸ªé‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²
date: 2024-03-27
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[è‡³å°‘æœ‰ K ä¸ªé‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²](https://leetcode.cn/problems/longest-substring-with-at-least-k-repeating-characters/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`é€’å½’` `åˆ†æ²»` `å­—ç¬¦ä¸²` `æ»‘åŠ¨çª—å£`  
**ğŸŸ¡ éš¾åº¦**ï¼š`ä¸­ç­‰`  

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s å’Œä¸€ä¸ªæ•´æ•° k ï¼Œè¯·ä½ æ‰¾å‡º s ä¸­çš„æœ€é•¿å­ä¸²ï¼Œè¦æ±‚è¯¥å­ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦å‡ºç°æ¬¡æ•°éƒ½ä¸å°‘äº k ã€‚è¿”å›è¿™ä¸€å­ä¸²çš„é•¿åº¦ã€‚

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šs = "aaabb", k = 3
è¾“å‡ºï¼š3
è§£é‡Šï¼šæœ€é•¿å­ä¸²ä¸º "aaa" ï¼Œå…¶ä¸­ 'a' é‡å¤äº† 3 æ¬¡ã€‚
```

ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šs = "ababbc", k = 2
è¾“å‡ºï¼š5
è§£é‡Šï¼šæœ€é•¿å­ä¸²ä¸º "ababb" ï¼Œå…¶ä¸­ 'a' é‡å¤äº† 2 æ¬¡ï¼Œ 'b' é‡å¤äº† 3 æ¬¡ã€‚
```

æç¤ºï¼š
- 1 <= s.length <= 10â´
- s ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
- 1 <= k <= 10âµ

---

## è§£é¢˜æ€è·¯

### åˆ†æ²»æ³•

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
è¿™é“é¢˜å¯ä»¥ä½¿ç”¨åˆ†æ²»æ³•æ¥è§£å†³ã€‚æ ¸å¿ƒæ€è·¯æ˜¯ï¼š
1. å¦‚æœä¸€ä¸ªå­—ç¬¦åœ¨å­ä¸²ä¸­å‡ºç°çš„æ¬¡æ•°å°äº kï¼Œé‚£ä¹ˆåŒ…å«è¿™ä¸ªå­—ç¬¦çš„å­ä¸²ä¸€å®šä¸æ˜¯ç­”æ¡ˆ
2. å¯ä»¥ç”¨è¿™ä¸ªå­—ç¬¦ä½œä¸ºåˆ†å‰²ç‚¹ï¼Œå°†å­—ç¬¦ä¸²åˆ†æˆå¤šä¸ªå­ä¸²
3. é€’å½’å¤„ç†æ¯ä¸ªå­ä¸²ï¼Œæ‰¾åˆ°æœ€é•¿çš„æ»¡è¶³æ¡ä»¶çš„å­ä¸²

å…³é”®ç‚¹ï¼š
- å¦‚æœä¸€ä¸ªå­—ç¬¦å‡ºç°æ¬¡æ•°å°äº kï¼Œé‚£ä¹ˆå®ƒå¿…é¡»è¢«æ’é™¤
- å¦‚æœæ‰€æœ‰å­—ç¬¦å‡ºç°æ¬¡æ•°éƒ½å¤§äºç­‰äº kï¼Œæ•´ä¸ªå­—ç¬¦ä¸²å°±æ˜¯ç­”æ¡ˆ
- å¯ä»¥ç”¨åˆ†æ²»çš„æ–¹æ³•ï¼Œå°†é—®é¢˜åˆ†è§£æˆæ›´å°çš„å­é—®é¢˜

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. ç»Ÿè®¡å­—ç¬¦å‡ºç°æ¬¡æ•°ï¼š
   - ä½¿ç”¨æ•°ç»„è®°å½•æ¯ä¸ªå­—ç¬¦çš„å‡ºç°æ¬¡æ•°
   - æ‰¾åˆ°ç¬¬ä¸€ä¸ªå‡ºç°æ¬¡æ•°å°äº k çš„å­—ç¬¦

2. é€’å½’å¤„ç†ï¼š
   - å¦‚æœæ²¡æœ‰å‡ºç°æ¬¡æ•°å°äº k çš„å­—ç¬¦ï¼Œè¿”å›å½“å‰å­—ç¬¦ä¸²é•¿åº¦
   - å¦‚æœæ‰¾åˆ°è¿™æ ·çš„å­—ç¬¦ï¼Œä»¥å®ƒä¸ºåˆ†å‰²ç‚¹åˆ†å‰²å­—ç¬¦ä¸²
   - é€’å½’å¤„ç†æ¯ä¸ªå­ä¸²

3. è¿”å›ç»“æœï¼š
   - è¿”å›æ‰€æœ‰å­ä¸²ä¸­æœ€é•¿çš„æ»¡è¶³æ¡ä»¶çš„é•¿åº¦

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ç¤ºä¾‹ 2 ä¸ºä¾‹ï¼š`s = "ababbc", k = 2`

1. ç¬¬ä¸€æ¬¡ç»Ÿè®¡å­—ç¬¦é¢‘ç‡ï¼š
```
å­—ç¬¦é¢‘ç‡ç»Ÿè®¡ï¼š
a: 2 æ¬¡
b: 3 æ¬¡
c: 1 æ¬¡ â† å‡ºç°æ¬¡æ•° < kï¼Œä½œä¸ºåˆ†å‰²ç‚¹
```

2. åˆ†å‰²åå¾—åˆ°ï¼š`"ababb"` å’Œ `""`

3. é€’å½’å¤„ç† `"ababb"`ï¼š
```
å­—ç¬¦é¢‘ç‡ç»Ÿè®¡ï¼š
a: 2 æ¬¡ âœ“
b: 3 æ¬¡ âœ“
æ‰€æœ‰å­—ç¬¦å‡ºç°æ¬¡æ•°éƒ½ >= k
è¿”å›é•¿åº¦ 5
```

4. é€’å½’å¤„ç† `""`ï¼š
```
ç©ºå­—ç¬¦ä¸²ï¼Œè¿”å› 0
```

5. æœ€ç»ˆç»“æœï¼š
```
max(5, 0) = 5
```

è¯¦ç»†æ‰§è¡Œè¿‡ç¨‹ï¼š

| æ­¥éª¤ | å½“å‰å­—ç¬¦ä¸² | åˆ†å‰²å­—ç¬¦ | å­ä¸² | ç»“æœ | è¯´æ˜ |
|-----|-----------|---------|------|------|------|
| 1 | "ababbc" | 'c' | ["ababb", ""] | - | æ‰¾åˆ°é¢‘ç‡ < k çš„å­—ç¬¦ 'c' |
| 2 | "ababb" | - | - | 5 | æ‰€æœ‰å­—ç¬¦é¢‘ç‡ >= k |
| 3 | "" | - | - | 0 | ç©ºå­—ç¬¦ä¸² |
| 4 | - | - | - | 5 | å–æœ€å¤§å€¼ |

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0395_LongestSubstringWithAtLeastKRepeatingCharacters.java](../src/main/java/L0395_LongestSubstringWithAtLeastKRepeatingCharacters.java)

```java
public int longestSubstring(String s, int k) {
    // å¦‚æœå­—ç¬¦ä¸²é•¿åº¦å°äº kï¼Œç›´æ¥è¿”å› 0
    if (s.length() < k) {
        return 0;
    }
    
    // ç»Ÿè®¡æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°
    int[] count = new int[26];
    for (char c : s.toCharArray()) {
        count[c - 'a']++;
    }
    
    // æ‰¾åˆ°ç¬¬ä¸€ä¸ªå‡ºç°æ¬¡æ•°å°äº k çš„å­—ç¬¦
    char split = 0;
    for (int i = 0; i < s.length(); i++) {
        if (count[s.charAt(i) - 'a'] < k) {
            split = s.charAt(i);
            break;
        }
        // å¦‚æœéå†åˆ°æœ€åä¸€ä¸ªå­—ç¬¦éƒ½æ²¡æœ‰æ‰¾åˆ°å‡ºç°æ¬¡æ•°å°äº k çš„å­—ç¬¦
        // è¯´æ˜æ•´ä¸ªå­—ç¬¦ä¸²éƒ½æ»¡è¶³æ¡ä»¶
        if (i == s.length() - 1) {
            return s.length();
        }
    }
    
    // å¦‚æœæ‰¾åˆ°äº†è¿™æ ·çš„å­—ç¬¦ï¼Œä»¥è¿™ä¸ªå­—ç¬¦ä¸ºåˆ†å‰²ç‚¹ï¼Œé€’å½’å¤„ç†å­ä¸²
    int maxLength = 0;
    for (String subString : s.split(String.valueOf(split))) {
        maxLength = Math.max(maxLength, longestSubstring(subString, k));
    }
    
    return maxLength;
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(nÂ²)
  - æ¯æ¬¡é€’å½’éƒ½éœ€è¦éå†å­—ç¬¦ä¸²ç»Ÿè®¡é¢‘ç‡
  - æœ€åæƒ…å†µä¸‹ï¼Œæ¯æ¬¡åªæ’é™¤ä¸€ä¸ªå­—ç¬¦
  - é€’å½’æ·±åº¦å¯èƒ½è¾¾åˆ° n å±‚

- **ç©ºé—´å¤æ‚åº¦**ï¼šO(n)
  - é€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦æœ€å¤§ä¸º n
  - æ¯æ¬¡é€’å½’éœ€è¦å¸¸æ•°ç©ºé—´å­˜å‚¨å­—ç¬¦é¢‘ç‡æ•°ç»„

---

## ç®—æ³•ä¼˜åŒ–

1. **æ»‘åŠ¨çª—å£è§£æ³•**
   ```java
   public int longestSubstring(String s, int k) {
       int maxUnique = getMaxUniqueLetters(s);
       int result = 0;
       
       for (int currUnique = 1; currUnique <= maxUnique; currUnique++) {
           int[] map = new int[26];
           int windowStart = 0, windowEnd = 0;
           int unique = 0, countAtLeastK = 0;
           
           while (windowEnd < s.length()) {
               if (unique <= currUnique) {
                   int idx = s.charAt(windowEnd) - 'a';
                   map[idx]++;
                   if (map[idx] == 1) unique++;
                   if (map[idx] == k) countAtLeastK++;
                   windowEnd++;
               } else {
                   int idx = s.charAt(windowStart) - 'a';
                   map[idx]--;
                   if (map[idx] == 0) unique--;
                   if (map[idx] == k-1) countAtLeastK--;
                   windowStart++;
               }
               
               if (unique == currUnique && unique == countAtLeastK) {
                   result = Math.max(result, windowEnd - windowStart);
               }
           }
       }
       
       return result;
   }
   
   private int getMaxUniqueLetters(String s) {
       boolean[] map = new boolean[26];
       int maxUnique = 0;
       for (int i = 0; i < s.length(); i++) {
           if (!map[s.charAt(i) - 'a']) {
               maxUnique++;
               map[s.charAt(i) - 'a'] = true;
           }
       }
       return maxUnique;
   }
   ```
   è¿™ç§æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(maxUnique * n)ï¼Œå…¶ä¸­ maxUnique æ˜¯å­—ç¬¦ä¸²ä¸­ä¸åŒå­—ç¬¦çš„æ•°é‡ã€‚

2. **ä¼˜åŒ–çš„åˆ†æ²»æ³•**
   ```java
   public int longestSubstring(String s, int k) {
       return longestSubstringUtil(s.toCharArray(), 0, s.length(), k);
   }
   
   private int longestSubstringUtil(char[] str, int start, int end, int k) {
       if (end - start < k) return 0;
       
       int[] count = new int[26];
       for (int i = start; i < end; i++) {
           count[str[i] - 'a']++;
       }
       
       for (int i = start; i < end; i++) {
           if (count[str[i] - 'a'] < k) {
               int j = i + 1;
               while (j < end && count[str[j] - 'a'] < k) j++;
               return Math.max(longestSubstringUtil(str, start, i, k),
                             longestSubstringUtil(str, j, end, k));
           }
       }
       
       return end - start;
   }
   ```
   è¿™ç§æ–¹æ³•é¿å…äº†å­—ç¬¦ä¸²åˆ†å‰²æ“ä½œï¼Œç›´æ¥åœ¨åŸæ•°ç»„ä¸Šæ“ä½œã€‚

3. **åŠ¨æ€è§„åˆ’è§£æ³•**
   ```java
   public int longestSubstring(String s, int k) {
       int n = s.length();
       int[][] dp = new int[n][n];
       int[][] count = new int[n][26];
       
       // åˆå§‹åŒ–è®¡æ•°æ•°ç»„
       for (int i = 0; i < n; i++) {
           if (i > 0) {
               count[i] = count[i-1].clone();
           }
           count[i][s.charAt(i) - 'a']++;
       }
       
       // å¡«å…… dp æ•°ç»„
       for (int len = 1; len <= n; len++) {
           for (int i = 0; i + len <= n; i++) {
               int j = i + len - 1;
               // æ£€æŸ¥å­ä¸²æ˜¯å¦æ»¡è¶³æ¡ä»¶
               // ... å®ç°åŠ¨æ€è§„åˆ’é€»è¾‘
           }
       }
       
       return dp[0][n-1];
   }
   ```
   è¿™ç§æ–¹æ³•è™½ç„¶æ—¶é—´å¤æ‚åº¦è¾ƒé«˜ï¼ˆO(nÂ³)ï¼‰ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½æ›´å®¹æ˜“ç†è§£å’Œè°ƒè¯•ã€‚

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 