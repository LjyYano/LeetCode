---
title: ä¸åŒçš„å­åºåˆ—
date: 2025-02-09
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[ä¸åŒçš„å­åºåˆ—](https://leetcode.cn/problems/distinct-subsequences/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`å­—ç¬¦ä¸²` `åŠ¨æ€è§„åˆ’`  
**ğŸ”´ éš¾åº¦**ï¼š`å›°éš¾`  

ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸² s å’Œ t ï¼Œç»Ÿè®¡å¹¶è¿”å›åœ¨ s çš„å­åºåˆ—ä¸­ t å‡ºç°çš„ä¸ªæ•°ï¼Œç»“æœéœ€è¦å¯¹ 10â¹ + 7 å–æ¨¡ã€‚

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šs = "rabbbit", t = "rabbit"
è¾“å‡ºï¼š3
è§£é‡Šï¼š
å¦‚ä¸‹æ‰€ç¤º, æœ‰ 3 ç§å¯ä»¥ä» s ä¸­å¾—åˆ° "rabbit" çš„æ–¹æ¡ˆã€‚
rabbbit
rabbbit
rabbbit
```

ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šs = "babgbag", t = "bag"
è¾“å‡ºï¼š5
è§£é‡Šï¼š
å¦‚ä¸‹æ‰€ç¤º, æœ‰ 5 ç§å¯ä»¥ä» s ä¸­å¾—åˆ° "bag" çš„æ–¹æ¡ˆã€‚ 
babgbag
babgbag
babgbag
babgbag
babgbag
```

æç¤ºï¼š
- 1 <= s.length, t.length <= 1000
- s å’Œ t ç”±è‹±æ–‡å­—æ¯ç»„æˆ

---

## è§£é¢˜æ€è·¯
### åŠ¨æ€è§„åˆ’

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„åŠ¨æ€è§„åˆ’é—®é¢˜ã€‚å¯¹äºæ¯ä¸ªä½ç½®ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ä¸¤ç§æƒ…å†µï¼š
1. å½“å‰å­—ç¬¦ç›¸ç­‰æ—¶ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨æˆ–ä¸ä½¿ç”¨å½“å‰å­—ç¬¦
2. å½“å‰å­—ç¬¦ä¸ç›¸ç­‰æ—¶ï¼Œåªèƒ½ä¸ä½¿ç”¨å½“å‰å­—ç¬¦

ä½¿ç”¨ä¸€ä¸ªäºŒç»´ dp æ•°ç»„ï¼Œå…¶ä¸­ dp[i][j] è¡¨ç¤º s çš„å‰ i ä¸ªå­—ç¬¦çš„å­åºåˆ—ä¸­ï¼Œt çš„å‰ j ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°ã€‚

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. åˆå§‹åŒ–ï¼š
   - åˆ›å»º dp æ•°ç»„ï¼Œå¤§å°ä¸º (m+1) Ã— (n+1)
   - ç©ºå­—ç¬¦ä¸²æ˜¯ä»»ä½•å­—ç¬¦ä¸²çš„å­åºåˆ—ï¼Œæ¬¡æ•°ä¸º 1
   - åˆå§‹åŒ–ç¬¬ä¸€åˆ— dp[i][0] = 1

2. çŠ¶æ€è½¬ç§»ï¼š
   - éå† s å’Œ t çš„æ¯ä¸ªå­—ç¬¦
   - å¦‚æœå½“å‰å­—ç¬¦ç›¸ç­‰ï¼šdp[i][j] = dp[i-1][j] + dp[i-1][j-1]
   - å¦‚æœå½“å‰å­—ç¬¦ä¸ç›¸ç­‰ï¼šdp[i][j] = dp[i-1][j]

3. å¤„ç†æº¢å‡ºï¼š
   - ä½¿ç”¨ long ç±»å‹å­˜å‚¨ä¸­é—´ç»“æœ
   - æ¯æ¬¡è®¡ç®—åå¯¹ 10â¹ + 7 å–æ¨¡

4. è¿”å›ç»“æœï¼š
   - è¿”å› dp[m][n]ï¼Œå³ s ä¸­åŒ…å« t çš„å­åºåˆ—ä¸ªæ•°

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ s = "rabbbit", t = "rabbit" ä¸ºä¾‹ï¼š

| dp[i][j] | ""  | "r" | "ra" | "rab" | "rabb" | "rabbi" | "rabbit" |
|----------|-----|-----|------|-------|--------|---------|----------|
| ""       | 1   | 0   | 0    | 0     | 0      | 0       | 0        |
| "r"      | 1   | 1   | 0    | 0     | 0      | 0       | 0        |
| "ra"     | 1   | 1   | 1    | 0     | 0      | 0       | 0        |
| "rab"    | 1   | 1   | 1    | 1     | 0      | 0       | 0        |
| "rabb"   | 1   | 1   | 1    | 1     | 1      | 0       | 0        |
| "rabbi"  | 1   | 1   | 1    | 1     | 1      | 1       | 0        |
| "rabbb"  | 1   | 1   | 1    | 1     | 2      | 1       | 0        |
| "rabbbi" | 1   | 1   | 1    | 1     | 2      | 3       | 0        |
| "rabbbit"| 1   | 1   | 1    | 1     | 2      | 3       | 3        |

åˆ†æè¿‡ç¨‹ï¼š
1. ç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—çš„åˆå§‹åŒ–ï¼š
   - dp[0][0] = 1ï¼ˆç©ºå­—ç¬¦ä¸²æ˜¯ç©ºå­—ç¬¦ä¸²çš„å­åºåˆ—ï¼‰
   - dp[i][0] = 1ï¼ˆç©ºå­—ç¬¦ä¸²æ˜¯ä»»ä½•å­—ç¬¦ä¸²çš„å­åºåˆ—ï¼‰
   - dp[0][j] = 0ï¼ˆéç©ºå­—ç¬¦ä¸²ä¸æ˜¯ç©ºå­—ç¬¦ä¸²çš„å­åºåˆ—ï¼‰

2. çŠ¶æ€è½¬ç§»ç¤ºä¾‹ï¼š
   - å½“ s[i-1] = t[j-1] æ—¶ï¼š
     ```
     ä¾‹å¦‚ï¼šdp[5][5]ï¼ˆ"rabbi" ä¸­ "rabbi" çš„ä¸ªæ•°ï¼‰
     = dp[4][5]ï¼ˆä¸ä½¿ç”¨å½“å‰å­—ç¬¦ 'i'ï¼‰
     + dp[4][4]ï¼ˆä½¿ç”¨å½“å‰å­—ç¬¦ 'i'ï¼‰
     = 0 + 1 = 1
     ```
   
   - å½“ s[i-1] â‰  t[j-1] æ—¶ï¼š
     ```
     ä¾‹å¦‚ï¼šdp[6][5]ï¼ˆ"rabbb" ä¸­ "rabbi" çš„ä¸ªæ•°ï¼‰
     = dp[5][5]ï¼ˆä¸ä½¿ç”¨å½“å‰å­—ç¬¦ 'b'ï¼‰
     = 1
     ```

3. æœ€ç»ˆç»“æœï¼š
   dp[8][6] = 3ï¼Œè¡¨ç¤ºåœ¨ "rabbbit" ä¸­ï¼Œ"rabbit" ä½œä¸ºå­åºåˆ—å‡ºç°äº† 3 æ¬¡ã€‚

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0115_DistinctSubsequences.java](../src/main/java/L0115_DistinctSubsequences.java)

```java
public int numDistinct(String s, String t) {
    int m = s.length(), n = t.length();
    // å¦‚æœ t çš„é•¿åº¦å¤§äº sï¼Œä¸å¯èƒ½å­˜åœ¨è¿™æ ·çš„å­åºåˆ—
    if (n > m) {
        return 0;
    }
    
    // åˆ›å»º dp æ•°ç»„ï¼Œä½¿ç”¨ long ç±»å‹é˜²æ­¢æº¢å‡º
    long[][] dp = new long[m + 1][n + 1];
    // ç©ºå­—ç¬¦ä¸²æ˜¯ä»»ä½•å­—ç¬¦ä¸²çš„å­åºåˆ—ï¼Œæ¬¡æ•°ä¸º 1
    for (int i = 0; i <= m; i++) {
        dp[i][0] = 1;
    }
    
    // å¡«å…… dp æ•°ç»„
    for (int i = 1; i <= m; i++) {
        for (int j = 1; j <= n; j++) {
            // å¦‚æœå½“å‰å­—ç¬¦ç›¸ç­‰ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨æˆ–ä¸ä½¿ç”¨å½“å‰å­—ç¬¦
            if (s.charAt(i - 1) == t.charAt(j - 1)) {
                dp[i][j] = (dp[i - 1][j] + dp[i - 1][j - 1]) % 1000000007;
            } else {
                // å¦‚æœå½“å‰å­—ç¬¦ä¸ç›¸ç­‰ï¼Œåªèƒ½ä¸ä½¿ç”¨å½“å‰å­—ç¬¦
                dp[i][j] = dp[i - 1][j];
            }
        }
    }
    
    return (int) dp[m][n];
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(mn)
  - éœ€è¦å¡«å……å¤§å°ä¸º (m+1) Ã— (n+1) çš„ dp æ•°ç»„
  - æ¯ä¸ªä½ç½®çš„è®¡ç®—æ—¶é—´ä¸º O(1)
  - æ€»æ—¶é—´å¤æ‚åº¦ä¸º O(mn)ï¼Œå…¶ä¸­ m å’Œ n åˆ†åˆ«æ˜¯å­—ç¬¦ä¸² s å’Œ t çš„é•¿åº¦

- **ç©ºé—´å¤æ‚åº¦**ï¼šO(mn)
  - éœ€è¦ä¸€ä¸ªå¤§å°ä¸º (m+1) Ã— (n+1) çš„äºŒç»´æ•°ç»„å­˜å‚¨ä¸­é—´ç»“æœ
  - å¯ä»¥ä¼˜åŒ–ä¸º O(n) çš„ç©ºé—´å¤æ‚åº¦ï¼Œå› ä¸ºæ¯æ¬¡è®¡ç®—åªéœ€è¦ä¸Šä¸€è¡Œçš„ç»“æœ

---

## ç›¸å…³é¢˜ç›®

- [72. ç¼–è¾‘è·ç¦»](https://leetcode.cn/problems/edit-distance/)
- [583. ä¸¤ä¸ªå­—ç¬¦ä¸²çš„åˆ é™¤æ“ä½œ](https://leetcode.cn/problems/delete-operation-for-two-strings/)
- [1143. æœ€é•¿å…¬å…±å­åºåˆ—](https://leetcode.cn/problems/longest-common-subsequence/)

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 