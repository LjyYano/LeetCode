---
title: 4 的幂
date: 2025-02-10
---

## 题目描述

**🔗 题目**：[4 的幂](https://leetcode.cn/problems/power-of-four/)  
**🏷️ 标签**：`位运算` `递归` `数学`  
**🟢 难度**：`简单`  

给定一个整数，写一个函数来判断它是否是 4 的幂次方。如果是，返回 true ；否则，返回 false 。

整数 n 是 4 的幂次方需满足：存在整数 x 使得 n == 4ˣ

示例 1：
```
输入：n = 16
输出：true
```

示例 2：
```
输入：n = 5
输出：false
```

示例 3：
```
输入：n = 1
输出：true
```

提示：
* -2³¹ <= n <= 2³¹ - 1

进阶：你能不使用循环或者递归来完成本题吗？

---

## 解题思路
### 位运算解法

#### 📝 核心思想
1. 4 的幂具有以下特点：
   - 它是正数
   - 它是 2 的幂（二进制表示中只有一个 1）
   - 这个 1 只能出现在奇数位置上（从右往左数，位置从 0 开始）

2. 判断步骤：
   - 首先判断是否为正数
   - 然后判断是否是 2 的幂
   - 最后判断这个 1 是否在正确的位置上

#### 🛠️ 实现步骤
1. 判断是否为正数：
   - 检查 n > 0

2. 判断是否为 2 的幂：
   - 使用位运算 n & (n - 1) == 0
   - 2 的幂的二进制表示中只有一个 1，减 1 后所有位都会反转
   - 按位与运算后结果为 0

3. 判断 1 是否在正确位置：
   - 使用掩码 0x55555555（二进制：01010101010101010101010101010101）
   - 与原数进行按位与运算
   - 结果不为 0 说明 1 在奇数位置上

#### 🧩 示例分析
让我们分析几个数字：

1. n = 16 (4²)
```
二进制表示：00000000000000000000000000010000
是否为正数：✓ (16 > 0)
是否为 2 的幂：
  n     = 00000000000000000000000000010000
  n - 1 = 00000000000000000000000000001111
  n & (n-1) = 00000000000000000000000000000000 ✓
1 的位置检查：
  n         = 00000000000000000000000000010000
  0x55555555 = 01010101010101010101010101010101
  按位与结果 ≠ 0 ✓
结论：是 4 的幂
```

2. n = 8 (2³)
```
二进制表示：00000000000000000000000000001000
是否为正数：✓ (8 > 0)
是否为 2 的幂：
  n     = 00000000000000000000000000001000
  n - 1 = 00000000000000000000000000000111
  n & (n-1) = 00000000000000000000000000000000 ✓
1 的位置检查：
  n         = 00000000000000000000000000001000
  0x55555555 = 01010101010101010101010101010101
  按位与结果 = 0 ✗
结论：不是 4 的幂
```

3. n = 5
```
二进制表示：00000000000000000000000000000101
是否为正数：✓ (5 > 0)
是否为 2 的幂：
  n     = 00000000000000000000000000000101
  n - 1 = 00000000000000000000000000000100
  n & (n-1) ≠ 0 ✗
结论：不是 4 的幂
```

---

## 代码实现

完整的可运行代码：[L0342_PowerOfFour.java](../src/main/java/L0342_PowerOfFour.java)

```java
public class L0342_PowerOfFour {
    public boolean isPowerOfFour(int n) {
        // 首先判断是否为正数且是 2 的幂
        // 2 的幂的二进制表示中只有一个 1
        if (n <= 0 || (n & (n - 1)) != 0) {
            return false;
        }
        
        // 4 的幂的二进制表示中，1 只出现在奇数位置
        // 0x55555555 是 01010101010101010101010101010101
        return (n & 0x55555555) != 0;
    }
}
```

---

## 复杂度分析

- **时间复杂度**：O(1)。所有操作都是位运算，且操作次数固定。

- **空间复杂度**：O(1)。只使用了常数个变量。

---

## LeetCode 题解

本题解是 LeetCode 系列题解的一部分。该系列题解致力于帮助程序员更好地理解和掌握算法思维，内容包含详细的解题思路分析、图文并茂的示例讲解和完整的代码实现。

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode 最全题解](https://github.com/LjyYano/LeetCode)：持续更新中，欢迎 Star ⭐️ 关注，一起探讨算法之美。 