---
title: ç»„åˆä¸¤ä¸ªè¡¨
date: 2024-02-10
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[ç»„åˆä¸¤ä¸ªè¡¨](https://leetcode.cn/problems/combine-two-tables/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`æ•°æ®åº“`  
**ğŸŸ¢ éš¾åº¦**ï¼š`ç®€å•`  

è¡¨: Person
```
+-------------+---------+
| Column Name | Type    |
+-------------+---------+
| personId    | int     |
| lastName    | varchar |
| firstName   | varchar |
+-------------+---------+
```
personId æ˜¯è¯¥è¡¨çš„ä¸»é”®ã€‚  
è¯¥è¡¨åŒ…å«ä¸€äº›äººçš„ IDã€å§“å’Œåçš„ä¿¡æ¯ã€‚  

è¡¨: Address
```
+-------------+---------+
| Column Name | Type    |
+-------------+---------+
| addressId   | int     |
| personId    | int     |
| city        | varchar |
| state       | varchar |
+-------------+---------+
```
addressId æ˜¯è¯¥è¡¨çš„ä¸»é”®ã€‚  
è¯¥è¡¨çš„æ¯ä¸€è¡Œéƒ½åŒ…å«ä¸€ä¸ª ID = personId çš„äººçš„åŸå¸‚å’Œå·çš„ä¿¡æ¯ã€‚  

ç¼–å†™ä¸€ä¸ª SQL æŸ¥è¯¢æ¥æŠ¥å‘Š Person è¡¨ä¸­æ¯ä¸ªäººçš„å§“ã€åã€åŸå¸‚å’Œå·ã€‚å¦‚æœ personId çš„åœ°å€ä¸åœ¨ Address è¡¨ä¸­ï¼Œåˆ™æŠ¥å‘Šä¸ºç©ºã€‚  

ä»¥ ä»»æ„é¡ºåº è¿”å›ç»“æœè¡¨ã€‚  

ç¤ºä¾‹ï¼š  
è¾“å…¥ï¼š  
Person è¡¨ï¼š
```
+----------+----------+-----------+
| personId | lastName | firstName |
+----------+----------+-----------+
| 1        | Wang     | Allen     |
| 2        | Alice    | Bob       |
+----------+----------+-----------+
```
Address è¡¨ï¼š
```
+-----------+----------+---------------+------------+
| addressId | personId | city          | state      |
+-----------+----------+---------------+------------+
| 1         | 2        | New York City | New York   |
| 2         | 3        | Leetcode      | California |
+-----------+----------+---------------+------------+
```
è¾“å‡ºï¼š
```
+-----------+----------+---------------+----------+
| firstName | lastName | city          | state    |
+-----------+----------+---------------+----------+
| Allen     | Wang     | null          | null     |
| Bob       | Alice    | New York City | New York |
+-----------+----------+---------------+----------+
```
è§£é‡Šï¼š  
åœ°å€è¡¨ä¸­æ²¡æœ‰ personId = 1 çš„åœ°å€ï¼Œæ‰€ä»¥å®ƒä»¬çš„åŸå¸‚å’Œå·è¿”å› nullã€‚  
addressId = 1 åŒ…å«äº† personId = 2 çš„åœ°å€ä¿¡æ¯ã€‚

---

## è§£é¢˜æ€è·¯

### LEFT JOIN å¤–è¿æ¥æŸ¥è¯¢

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
è¦è·å–æ¯ä¸ªäººçš„ä¿¡æ¯ä»¥åŠå¯èƒ½å­˜åœ¨çš„åœ°å€ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦ï¼š
1. ä»¥ Person è¡¨ä¸ºä¸»è¡¨ï¼Œä½¿ç”¨ LEFT JOIN è¿æ¥ Address è¡¨
2. å³ä½¿åœ¨ Address è¡¨ä¸­æ²¡æœ‰å¯¹åº”çš„è®°å½•ï¼Œä¹Ÿè¦ä¿ç•™ Person è¡¨ä¸­çš„è®°å½•
3. é€‰æ‹©éœ€è¦çš„å­—æ®µï¼šå§“åã€åŸå¸‚å’Œå·

LEFT JOIN å¯ä»¥ä¿ç•™å·¦è¡¨ï¼ˆPersonï¼‰ä¸­çš„æ‰€æœ‰è®°å½•ï¼Œå³ä½¿åœ¨å³è¡¨ï¼ˆAddressï¼‰ä¸­æ²¡æœ‰åŒ¹é…çš„è®°å½•ã€‚

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. ä½¿ç”¨ `FROM Person p` é€‰æ‹©äººå‘˜è¡¨
2. ä½¿ç”¨ `LEFT JOIN Address a ON p.personId = a.personId` è¿æ¥åœ°å€è¡¨
3. ä½¿ç”¨ `SELECT` é€‰æ‹©éœ€è¦çš„å­—æ®µï¼šfirstNameã€lastNameã€cityã€state

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ç¤ºä¾‹æ•°æ®ä¸ºä¾‹ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æŸ¥è¯¢æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š

1. åŸå§‹æ•°æ®ï¼š
   | Person è¡¨ | Address è¡¨ |
   |-----------|------------|
   | 1 Wang Allen | 2 NYC NY |
   | 2 Alice Bob | 3 LC CA |

2. LEFT JOIN åçš„ç»“æœï¼š
   | personId | lastName | firstName | city | state |
   |----------|----------|-----------|------|-------|
   | 1        | Wang     | Allen     | null | null  |
   | 2        | Alice    | Bob       | NYC  | NY    |

3. æœ€ç»ˆè¾“å‡ºï¼š
   ```
   +-----------+----------+---------------+----------+
   | firstName | lastName | city          | state    |
   +-----------+----------+---------------+----------+
   | Allen     | Wang     | null          | null     |
   | Bob       | Alice    | New York City | New York |
   +-----------+----------+---------------+----------+
   ```

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0175_CombineTwoTables.sql](../src/main/sql/L0175_CombineTwoTables.sql)

```sql
SELECT p.firstName, p.lastName, a.city, a.state
FROM Person p
LEFT JOIN Address a ON p.personId = a.personId
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(n + m)ï¼Œå…¶ä¸­ n æ˜¯ Person è¡¨çš„è®°å½•æ•°ï¼Œm æ˜¯ Address è¡¨çš„è®°å½•æ•°
  - éœ€è¦éå† Person è¡¨çš„æ‰€æœ‰è®°å½•
  - å¯¹æ¯ä¸ªäººï¼Œéœ€è¦åœ¨ Address è¡¨ä¸­æŸ¥æ‰¾åŒ¹é…çš„è®°å½•
  - ä½¿ç”¨ç´¢å¼•å¯ä»¥ä¼˜åŒ–æŸ¥æ‰¾æ€§èƒ½

- **ç©ºé—´å¤æ‚åº¦**ï¼šO(n)
  - éœ€è¦å­˜å‚¨è¿æ¥æ“ä½œçš„ä¸­é—´ç»“æœ
  - n æ˜¯ Person è¡¨çš„è®°å½•æ•°

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 