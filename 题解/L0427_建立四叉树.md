---
title: å»ºç«‹å››å‰æ ‘
date: 2024-03-27
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[å»ºç«‹å››å‰æ ‘](https://leetcode.cn/problems/construct-quad-tree/description/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`æ ‘` `æ•°ç»„` `åˆ†æ²»` `çŸ©é˜µ`  
**ğŸŸ¡ éš¾åº¦**ï¼š`ä¸­ç­‰`  

ç»™ä½ ä¸€ä¸ª n * n çŸ©é˜µ grid ï¼ŒçŸ©é˜µç”±è‹¥å¹² 0 å’Œ 1 ç»„æˆã€‚è¯·ä½ ç”¨å››å‰æ ‘è¡¨ç¤ºè¯¥çŸ©é˜µ grid ã€‚

ä½ éœ€è¦è¿”å›èƒ½è¡¨ç¤ºçŸ©é˜µçš„ å››å‰æ ‘ çš„æ ¹ç»“ç‚¹ã€‚

æ³¨æ„ï¼Œå½“ isLeaf ä¸º False æ—¶ï¼Œä½ å¯ä»¥æŠŠ True æˆ–è€… False èµ‹å€¼ç»™èŠ‚ç‚¹ï¼Œä¸¤ç§å€¼éƒ½ä¼šè¢«åˆ¤é¢˜æœºåˆ¶ æ¥å— ã€‚

å››å‰æ ‘æ•°æ®ç»“æ„ä¸­ï¼Œæ¯ä¸ªå†…éƒ¨èŠ‚ç‚¹åªæœ‰å››ä¸ªå­èŠ‚ç‚¹ã€‚æ­¤å¤–ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸¤ä¸ªå±æ€§ï¼š
- valï¼šå‚¨å­˜å¶å­ç»“ç‚¹æ‰€ä»£è¡¨çš„åŒºåŸŸçš„å€¼ã€‚1 å¯¹åº” Trueï¼Œ0 å¯¹åº” Falseï¼›
- isLeafï¼šå½“è¿™ä¸ªèŠ‚ç‚¹æ˜¯ä¸€ä¸ªå¶å­ç»“ç‚¹æ—¶ä¸º Trueï¼Œå¦‚æœå®ƒæœ‰ 4 ä¸ªå­èŠ‚ç‚¹åˆ™ä¸º False ã€‚

ç¤ºä¾‹ 1ï¼š
![img](https://assets.leetcode.com/uploads/2020/02/11/grid1.png)
è¾“å…¥ï¼šgrid = [[0,1],[1,0]]
è¾“å‡ºï¼š[[0,1],[1,0],[1,1],[1,1],[1,0]]
è§£é‡Šï¼šæ­¤ç¤ºä¾‹çš„è§£é‡Šå¦‚ä¸‹ï¼š
è¯·æ³¨æ„ï¼Œåœ¨ä¸‹é¢å››å‰æ ‘çš„å›¾ç¤ºä¸­ï¼Œ0 è¡¨ç¤º falseï¼Œ1 è¡¨ç¤º True ã€‚
![img](https://assets.leetcode.com/uploads/2020/02/12/e1tree.png)

ç¤ºä¾‹ 2ï¼š
![img](https://assets.leetcode.com/uploads/2020/02/12/e2mat.png)
è¾“å…¥ï¼šgrid = [[1,1,1,1,0,0,0,0],[1,1,1,1,0,0,0,0],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,0,0,0,0],[1,1,1,1,0,0,0,0],[1,1,1,1,0,0,0,0],[1,1,1,1,0,0,0,0]]
è¾“å‡ºï¼š[[0,1],[1,1],[0,1],[1,1],[1,0],null,null,null,null,[1,0],[1,0],[1,1],[1,1]]
è§£é‡Šï¼šç½‘æ ¼ä¸­çš„æ‰€æœ‰å€¼éƒ½ä¸ç›¸åŒã€‚æˆ‘ä»¬å°†ç½‘æ ¼åˆ’åˆ†ä¸ºå››ä¸ªå­ç½‘æ ¼ã€‚
![img](https://assets.leetcode.com/uploads/2020/02/12/e2tree.png)

---

## è§£é¢˜æ€è·¯

### åˆ†æ²»æ³•

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
ä½¿ç”¨åˆ†æ²»æ³•é€’å½’æ„å»ºå››å‰æ ‘ã€‚å¯¹äºæ¯ä¸ªåŒºåŸŸï¼š
1. æ£€æŸ¥æ˜¯å¦æ‰€æœ‰å€¼éƒ½ç›¸åŒï¼Œå¦‚æœæ˜¯ï¼Œåˆ›å»ºå¶å­èŠ‚ç‚¹
2. å¦‚æœä¸æ˜¯ï¼Œå°†åŒºåŸŸåˆ†æˆå››ä¸ªç›¸ç­‰çš„å­åŒºåŸŸï¼Œé€’å½’æ„å»ºå­èŠ‚ç‚¹

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. æ£€æŸ¥å½“å‰åŒºåŸŸæ˜¯å¦éƒ½æ˜¯ç›¸åŒçš„å€¼ï¼š
   - éå†åŒºåŸŸå†…æ‰€æœ‰æ ¼å­
   - å¦‚æœå‘ç°ä¸åŒçš„å€¼ï¼Œæ ‡è®°ä¸ºéå¶å­èŠ‚ç‚¹
2. å¦‚æœæ˜¯å¶å­èŠ‚ç‚¹ï¼š
   - åˆ›å»ºæ–°èŠ‚ç‚¹ï¼Œå€¼ä¸ºåŒºåŸŸå†…çš„å€¼ï¼ŒisLeaf ä¸º true
3. å¦‚æœä¸æ˜¯å¶å­èŠ‚ç‚¹ï¼š
   - åˆ›å»ºæ–°èŠ‚ç‚¹ï¼ŒisLeaf ä¸º false
   - å°†åŒºåŸŸåˆ†æˆå››ä¸ªç›¸ç­‰çš„å­åŒºåŸŸ
   - é€’å½’æ„å»ºå››ä¸ªå­èŠ‚ç‚¹

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ç¤ºä¾‹ 1 ä¸ºä¾‹ï¼Œåˆ†ææ„å»ºè¿‡ç¨‹ï¼š
```
åˆå§‹çŸ©é˜µï¼š
[0 1]
[1 0]

1. æ£€æŸ¥æ•´ä¸ªçŸ©é˜µï¼š
   - å‘ç°ä¸åŒçš„å€¼ï¼Œéœ€è¦åˆ†å‰²
   - åˆ›å»ºæ ¹èŠ‚ç‚¹ï¼š(val=ä»»æ„å€¼, isLeaf=false)

2. åˆ†å‰²æˆå››ä¸ªå­åŒºåŸŸï¼š
   topLeft: [0]     -> åˆ›å»ºå¶å­èŠ‚ç‚¹ (val=false, isLeaf=true)
   topRight: [1]    -> åˆ›å»ºå¶å­èŠ‚ç‚¹ (val=true, isLeaf=true)
   bottomLeft: [1]  -> åˆ›å»ºå¶å­èŠ‚ç‚¹ (val=true, isLeaf=true)
   bottomRight: [0] -> åˆ›å»ºå¶å­èŠ‚ç‚¹ (val=false, isLeaf=true)

æœ€ç»ˆå››å‰æ ‘ç»“æ„ï¼š
         (*, false)
        /   |   |   \
   (0,t) (1,t) (1,t) (0,t)
```

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0427_ConstructQuadTree.java](../src/main/java/L0427_ConstructQuadTree.java)

```java
public Node construct(int[][] grid) {
    return construct(grid, 0, 0, grid.length);
}

private Node construct(int[][] grid, int row, int col, int size) {
    // æ£€æŸ¥å½“å‰åŒºåŸŸæ˜¯å¦éƒ½æ˜¯ç›¸åŒçš„å€¼
    boolean isLeaf = true;
    int val = grid[row][col];
    
    for (int i = row; i < row + size; i++) {
        for (int j = col; j < col + size; j++) {
            if (grid[i][j] != val) {
                isLeaf = false;
                break;
            }
        }
        if (!isLeaf) break;
    }
    
    // å¦‚æœæ˜¯å¶å­èŠ‚ç‚¹ï¼Œç›´æ¥è¿”å›
    if (isLeaf) {
        return new Node(val == 1, true);
    }
    
    // ä¸æ˜¯å¶å­èŠ‚ç‚¹ï¼Œé€’å½’æ„å»ºå››ä¸ªå­èŠ‚ç‚¹
    int newSize = size / 2;
    Node node = new Node(true, false);
    node.topLeft = construct(grid, row, col, newSize);
    node.topRight = construct(grid, row, col + newSize, newSize);
    node.bottomLeft = construct(grid, row + newSize, col, newSize);
    node.bottomRight = construct(grid, row + newSize, col + newSize, newSize);
    
    return node;
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(nÂ²)ï¼Œå…¶ä¸­ n æ˜¯çŸ©é˜µçš„è¾¹é•¿ã€‚éœ€è¦éå†æ•´ä¸ªçŸ©é˜µæ¥æ£€æŸ¥æ¯ä¸ªåŒºåŸŸçš„å€¼æ˜¯å¦ç›¸åŒã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼šO(log n)ï¼Œé€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦ä¸º log nã€‚

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 