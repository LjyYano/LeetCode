---
title: ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘
date: 2025-02-09
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘](https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-inorder-traversal/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`æ ‘` `æ•°ç»„` `å“ˆå¸Œè¡¨` `åˆ†æ²»` `äºŒå‰æ ‘`  
**ğŸŸ¡ éš¾åº¦**ï¼š`ä¸­ç­‰`  

ç»™å®šä¸¤ä¸ªæ•´æ•°æ•°ç»„ preorder å’Œ inorder ï¼Œå…¶ä¸­ preorder æ˜¯äºŒå‰æ ‘çš„å…ˆåºéå†ï¼Œ inorder æ˜¯åŒä¸€æ£µæ ‘çš„ä¸­åºéå†ï¼Œè¯·æ„é€ äºŒå‰æ ‘å¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚

ç¤ºä¾‹ 1ï¼š
![img](https://assets.leetcode.com/uploads/2021/02/19/tree.jpg)
```
è¾“å…¥: preorder = [3,9,20,15,7], inorder = [9,3,15,20,7]
è¾“å‡º: [3,9,20,null,null,15,7]
```

ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥: preorder = [-1], inorder = [-1]
è¾“å‡º: [-1]
```

æç¤º:
- 1 <= preorder.length <= 3000
- inorder.length == preorder.length
- -3000 <= preorder[i], inorder[i] <= 3000
- preorder å’Œ inorder å‡ æ— é‡å¤ å…ƒç´ 
- inorder å‡å‡ºç°åœ¨ preorder
- preorder ä¿è¯ ä¸ºäºŒå‰æ ‘çš„å‰åºéå†åºåˆ—
- inorder ä¿è¯ ä¸ºäºŒå‰æ ‘çš„ä¸­åºéå†åºåˆ—

---

## è§£é¢˜æ€è·¯
### é€’å½’åˆ†æ²»æ³•

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
æœ¬é¢˜çš„å…³é”®åœ¨äºç†è§£å‰åºéå†å’Œä¸­åºéå†çš„ç‰¹ç‚¹ï¼š
1. å‰åºéå†çš„é¡ºåºæ˜¯ï¼šæ ¹èŠ‚ç‚¹ -> å·¦å­æ ‘ -> å³å­æ ‘
2. ä¸­åºéå†çš„é¡ºåºæ˜¯ï¼šå·¦å­æ ‘ -> æ ¹èŠ‚ç‚¹ -> å³å­æ ‘

åˆ©ç”¨è¿™ä¸¤ä¸ªç‰¹ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š
1. ä»å‰åºéå†ä¸­è·å–æ ¹èŠ‚ç‚¹ï¼ˆç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰
2. åœ¨ä¸­åºéå†ä¸­æ‰¾åˆ°æ ¹èŠ‚ç‚¹çš„ä½ç½®ï¼Œä»è€Œç¡®å®šå·¦å³å­æ ‘çš„èŒƒå›´
3. é€’å½’åœ°æ„å»ºå·¦å³å­æ ‘

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. åŸºæœ¬æƒ…å†µå¤„ç†ï¼š
   - å¦‚æœèµ·å§‹ä½ç½®å¤§äºç»“æŸä½ç½®ï¼Œè¿”å› null

2. æ„å»ºæ ¹èŠ‚ç‚¹ï¼š
   - å‰åºéå†çš„ç¬¬ä¸€ä¸ªå…ƒç´ å°±æ˜¯æ ¹èŠ‚ç‚¹çš„å€¼
   - åˆ›å»ºæ ¹èŠ‚ç‚¹

3. å®šä½æ ¹èŠ‚ç‚¹ï¼š
   - åœ¨ä¸­åºéå†ä¸­æ‰¾åˆ°æ ¹èŠ‚ç‚¹çš„ä½ç½®
   - è®¡ç®—å·¦å­æ ‘çš„èŠ‚ç‚¹æ•°é‡

4. é€’å½’æ„å»ºï¼š
   - é€’å½’æ„å»ºå·¦å­æ ‘
   - é€’å½’æ„å»ºå³å­æ ‘

5. è¿”å›ç»“æœï¼š
   - è¿”å›æ„å»ºå¥½çš„æ ¹èŠ‚ç‚¹

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ç¤ºä¾‹ 1 ä¸ºä¾‹ï¼Œåˆ†ææ„å»ºè¿‡ç¨‹ï¼š
```
å‰åºéå†ï¼š[3,9,20,15,7]
ä¸­åºéå†ï¼š[9,3,15,20,7]
```

æ„å»ºè¿‡ç¨‹ï¼š

1. æ ¹èŠ‚ç‚¹æ„å»ºï¼š
   ```
   å‰åºéå†ç¬¬ä¸€ä¸ªå…ƒç´  3 æ˜¯æ ¹èŠ‚ç‚¹
   åœ¨ä¸­åºéå†ä¸­æ‰¾åˆ° 3 çš„ä½ç½®ï¼Œå°†æ•°ç»„åˆ†æˆå·¦å³ä¸¤éƒ¨åˆ†
   å·¦å­æ ‘ï¼š[9]
   å³å­æ ‘ï¼š[15,20,7]
   ```

2. æ„å»ºå·¦å­æ ‘ï¼š
   ```
   å‰åºéå†å­æ•°ç»„ï¼š[9]
   ä¸­åºéå†å­æ•°ç»„ï¼š[9]
   æ„å»ºèŠ‚ç‚¹ 9
   ```

3. æ„å»ºå³å­æ ‘ï¼š
   ```
   å‰åºéå†å­æ•°ç»„ï¼š[20,15,7]
   ä¸­åºéå†å­æ•°ç»„ï¼š[15,20,7]
   
   é€’å½’æ„å»ºï¼š
   - æ ¹èŠ‚ç‚¹ï¼š20
   - å·¦å­æ ‘ï¼š[15]
   - å³å­æ ‘ï¼š[7]
   ```

4. æœ€ç»ˆæ„å»ºçš„æ ‘ï¼š
   ```
       3
      / \
     9  20
        /  \
       15   7
   ```

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0105_ConstructBinaryTreeFromPreorderAndInorderTraversal.java](../src/main/java/L0105_ConstructBinaryTreeFromPreorderAndInorderTraversal.java)

```java
public class L0105_ConstructBinaryTreeFromPreorderAndInorderTraversal {
    public TreeNode buildTree(int[] preorder, int[] inorder) {
        return buildTreeHelper(preorder, 0, preorder.length - 1, inorder, 0, inorder.length - 1);
    }
    
    private TreeNode buildTreeHelper(int[] preorder, int preStart, int preEnd, 
                                   int[] inorder, int inStart, int inEnd) {
        // å¦‚æœèµ·å§‹ä½ç½®å¤§äºç»“æŸä½ç½®ï¼Œè¯´æ˜æ²¡æœ‰èŠ‚ç‚¹éœ€è¦å¤„ç†
        if (preStart > preEnd || inStart > inEnd) {
            return null;
        }
        
        // å‰åºéå†çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹æ˜¯æ ¹èŠ‚ç‚¹
        TreeNode root = new TreeNode(preorder[preStart]);
        
        // åœ¨ä¸­åºéå†ä¸­æ‰¾åˆ°æ ¹èŠ‚ç‚¹çš„ä½ç½®
        int rootIndex = inStart;
        while (rootIndex <= inEnd && inorder[rootIndex] != root.val) {
            rootIndex++;
        }
        
        // è®¡ç®—å·¦å­æ ‘çš„èŠ‚ç‚¹æ•°
        int leftSubtreeSize = rootIndex - inStart;
        
        // é€’å½’æ„å»ºå·¦å­æ ‘å’Œå³å­æ ‘
        root.left = buildTreeHelper(preorder, preStart + 1, preStart + leftSubtreeSize,
                                  inorder, inStart, rootIndex - 1);
        root.right = buildTreeHelper(preorder, preStart + leftSubtreeSize + 1, preEnd,
                                   inorder, rootIndex + 1, inEnd);
        
        return root;
    }
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(nÂ²)
  - å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬éƒ½éœ€è¦åœ¨ä¸­åºéå†æ•°ç»„ä¸­æŸ¥æ‰¾å…¶ä½ç½®
  - æ¯æ¬¡æŸ¥æ‰¾éœ€è¦ O(n) çš„æ—¶é—´
  - æ€»å…±æœ‰ n ä¸ªèŠ‚ç‚¹éœ€è¦å¤„ç†
  - å¯ä»¥é€šè¿‡ä½¿ç”¨å“ˆå¸Œè¡¨ä¼˜åŒ–åˆ° O(n)

- **ç©ºé—´å¤æ‚åº¦**ï¼šO(n)
  - é€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦æœ€å¤§ä¸º nï¼ˆæ ‘å‘ˆç°é“¾çŠ¶ï¼‰
  - å¹³å‡æƒ…å†µä¸‹ä¸º O(log n)ï¼ˆå¹³è¡¡äºŒå‰æ ‘ï¼‰
  - ä¸è€ƒè™‘è¿”å›å€¼å ç”¨çš„ç©ºé—´

---

## ä¼˜åŒ–æ–¹æ¡ˆ

å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¼˜åŒ–ç®—æ³•ï¼š

1. ä½¿ç”¨å“ˆå¸Œè¡¨å­˜å‚¨ä¸­åºéå†ä¸­å€¼åˆ°ç´¢å¼•çš„æ˜ å°„ï¼š
   ```java
   Map<Integer, Integer> inorderMap = new HashMap<>();
   for (int i = 0; i < inorder.length; i++) {
       inorderMap.put(inorder[i], i);
   }
   ```

2. è¿™æ ·å¯ä»¥å°†æŸ¥æ‰¾æ ¹èŠ‚ç‚¹ä½ç½®çš„æ—¶é—´ä» O(n) ä¼˜åŒ–åˆ° O(1)ï¼š
   ```java
   int rootIndex = inorderMap.get(root.val);
   ```

ä¼˜åŒ–åçš„æ—¶é—´å¤æ‚åº¦å¯ä»¥é™ä½åˆ° O(n)ã€‚

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 