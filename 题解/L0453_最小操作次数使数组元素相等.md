---
title: 最小操作次数使数组元素相等
date: 2025-02-11
---

## 题目描述

**🔗 题目**：[最小操作次数使数组元素相等](https://leetcode.cn/problems/minimum-moves-to-equal-array-elements/)  
**🏷️ 标签**：`数组` `数学`  
**🟡 难度**：`中等`  

给你一个长度为 n 的整数数组，每次操作将会使 n - 1 个元素增加 1。返回让数组所有元素相等的最小操作次数。

示例 1：
输入：nums = [1,2,3]
输出：3
解释：
只需要3次操作（注意每次操作会增加两个元素的值）：
[1,2,3]  =>  [2,3,3]  =>  [3,4,3]  =>  [4,4,4]

示例 2：
输入：nums = [1,1,1]
输出：0

提示：
- n == nums.length
- 1 <= nums.length <= 10⁵
- -10⁹ <= nums[i] <= 10⁹

---

## 解题思路
### 数学方法

#### 📝 核心思想
这道题的关键是要转换思维：每次操作使 n-1 个元素加 1，等价于每次操作使 1 个元素减 1。为什么？因为相对差值不变。

我们可以这样理解：
1. 如果每次操作将 n-1 个元素加 1，那么未被选中的那个元素相对于其他元素就减少了 1
2. 因此，我们可以将问题转换为：每次操作将一个元素减 1，最少需要多少次操作才能使所有元素相等
3. 显然，最终所有元素都会等于数组中的最小值，因为我们只能减小元素

#### 🛠️ 实现步骤
1. 找到数组中的最小值 min
2. 对于每个元素，计算它与最小值的差值
3. 所有差值的和就是需要的最小操作次数

#### 🧩 示例分析
以示例 1：nums = [1,2,3] 为例：

1. 原始思路分析：
```
初始状态：[1,2,3]
操作 1：  [2,3,3]  选择 1,2 加 1
操作 2：  [3,4,3]  选择 2,3 加 1
操作 3：  [4,4,4]  选择 1,3 加 1
```

2. 转换思路分析：
```
最小值 min = 1
每个元素需要的操作次数：
- 1：0 次 (已经是最小值)
- 2：1 次 (减 1 次到 1)
- 3：2 次 (减 2 次到 1)
总操作次数 = 0 + 1 + 2 = 3
```

对于示例 2：nums = [1,1,1]
```
最小值 min = 1
所有元素都等于最小值，不需要操作
总操作次数 = 0
```

对于更复杂的例子 [1,2,3,4,5]：
| 元素 | 与最小值的差 | 需要的操作次数 |
|-----|------------|--------------|
| 1 | 0 | 0 |
| 2 | 1 | 1 |
| 3 | 2 | 2 |
| 4 | 3 | 3 |
| 5 | 4 | 4 |
总操作次数 = 0 + 1 + 2 + 3 + 4 = 10

---

## 代码实现

完整的可运行代码：[L0453_MinimumMovesToEqualArrayElements.java](../src/main/java/L0453_MinimumMovesToEqualArrayElements.java)

```java
public int minMoves(int[] nums) {
    // 找到数组中的最小值
    int min = nums[0];
    for (int num : nums) {
        min = Math.min(min, num);
    }
    
    // 计算将所有元素减到最小值需要的操作次数
    int moves = 0;
    for (int num : nums) {
        moves += num - min;
    }
    
    return moves;
}
```

---

## 复杂度分析

- **时间复杂度**：O(n)，其中 n 是数组的长度。我们需要遍历数组两次：一次找最小值，一次计算操作次数。
- **空间复杂度**：O(1)，只使用了常数额外空间。

---

## LeetCode 题解
     
本题解是 LeetCode 系列题解的一部分。该系列题解致力于帮助程序员更好地理解和掌握算法思维，内容包含详细的解题思路分析、图文并茂的示例讲解和完整的代码实现。
     
<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode 最全题解](https://github.com/LjyYano/LeetCode)：持续更新中，欢迎 Star ⭐️ 关注，一起探讨算法之美。 