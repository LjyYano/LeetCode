---
title: æ‰å¹³åŒ–åµŒå¥—åˆ—è¡¨è¿­ä»£å™¨
date: 2025-02-10
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[æ‰å¹³åŒ–åµŒå¥—åˆ—è¡¨è¿­ä»£å™¨](https://leetcode.cn/problems/flatten-nested-list-iterator/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`æ ˆ` `æ ‘` `æ·±åº¦ä¼˜å…ˆæœç´¢` `è®¾è®¡` `é˜Ÿåˆ—` `è¿­ä»£å™¨`  
**ğŸŸ¡ éš¾åº¦**ï¼š`ä¸­ç­‰`  

ç»™ä½ ä¸€ä¸ªåµŒå¥—çš„æ•´æ•°åˆ—è¡¨ nestedList ã€‚æ¯ä¸ªå…ƒç´ è¦ä¹ˆæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¦ä¹ˆæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼›è¯¥åˆ—è¡¨çš„å…ƒç´ ä¹Ÿå¯èƒ½æ˜¯æ•´æ•°æˆ–è€…æ˜¯å…¶ä»–åˆ—è¡¨ã€‚è¯·ä½ å®ç°ä¸€ä¸ªè¿­ä»£å™¨å°†å…¶æ‰å¹³åŒ–ï¼Œä½¿ä¹‹èƒ½å¤Ÿéå†è¿™ä¸ªåˆ—è¡¨ä¸­çš„æ‰€æœ‰æ•´æ•°ã€‚

å®ç°æ‰å¹³è¿­ä»£å™¨ç±» NestedIterator ï¼š

* NestedIterator(List<NestedInteger> nestedList) ç”¨åµŒå¥—åˆ—è¡¨ nestedList åˆå§‹åŒ–è¿­ä»£å™¨ã€‚
* int next() è¿”å›åµŒå¥—åˆ—è¡¨çš„ä¸‹ä¸€ä¸ªæ•´æ•°ã€‚
* boolean hasNext() å¦‚æœä»ç„¶å­˜åœ¨å¾…è¿­ä»£çš„æ•´æ•°ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚

ä½ çš„ä»£ç å°†ä¼šç”¨ä¸‹è¿°ä¼ªä»£ç æ£€æµ‹ï¼š

```
initialize iterator with nestedList
res = []
while iterator.hasNext()
    append iterator.next() to the end of res
return res
```

å¦‚æœ res ä¸é¢„æœŸçš„æ‰å¹³åŒ–åˆ—è¡¨åŒ¹é…ï¼Œé‚£ä¹ˆä½ çš„ä»£ç å°†ä¼šè¢«åˆ¤ä¸ºæ­£ç¡®ã€‚

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šnestedList = [[1,1],2,[1,1]]
è¾“å‡ºï¼š[1,1,2,1,1]
è§£é‡Šï¼šé€šè¿‡é‡å¤è°ƒç”¨ next ç›´åˆ° hasNext è¿”å› falseï¼Œnext è¿”å›çš„å…ƒç´ çš„é¡ºåºåº”è¯¥æ˜¯: [1,1,2,1,1]ã€‚
```

ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šnestedList = [1,[4,[6]]]
è¾“å‡ºï¼š[1,4,6]
è§£é‡Šï¼šé€šè¿‡é‡å¤è°ƒç”¨ next ç›´åˆ° hasNext è¿”å› falseï¼Œnext è¿”å›çš„å…ƒç´ çš„é¡ºåºåº”è¯¥æ˜¯: [1,4,6]ã€‚
```

æç¤ºï¼š
* 1 <= nestedList.length <= 500
* åµŒå¥—åˆ—è¡¨ä¸­çš„æ•´æ•°å€¼åœ¨èŒƒå›´ [-10â¶, 10â¶] å†…

---

## è§£é¢˜æ€è·¯
### æ ˆå®ç°çš„è¿­ä»£å™¨

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
1. ä½¿ç”¨æ ˆæ¥å­˜å‚¨å’Œå¤„ç†åµŒå¥—åˆ—è¡¨ä¸­çš„å…ƒç´ 
2. å°†åˆ—è¡¨å…ƒç´ å€’åºå‹å…¥æ ˆä¸­ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æŒ‰ç…§æ­£ç¡®çš„é¡ºåºå¼¹å‡º
3. åœ¨éœ€è¦æ—¶æ‰å±•å¼€åµŒå¥—åˆ—è¡¨ï¼Œå®ç°æƒ°æ€§æ±‚å€¼
4. é€šè¿‡ hasNext() æ–¹æ³•ç¡®ä¿æ ˆé¡¶å§‹ç»ˆæ˜¯ä¸€ä¸ªæ•´æ•°å€¼

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. åˆå§‹åŒ–ï¼š
   - åˆ›å»ºä¸€ä¸ªæ ˆæ¥å­˜å‚¨ NestedInteger å…ƒç´ 
   - å°†è¾“å…¥åˆ—è¡¨ä¸­çš„å…ƒç´ ä»åå¾€å‰å‹å…¥æ ˆä¸­

2. hasNext() æ–¹æ³•ï¼š
   - æ£€æŸ¥æ ˆæ˜¯å¦ä¸ºç©º
   - å¦‚æœæ ˆé¡¶æ˜¯æ•´æ•°ï¼Œç›´æ¥è¿”å› true
   - å¦‚æœæ ˆé¡¶æ˜¯åˆ—è¡¨ï¼Œå¼¹å‡ºå¹¶å°†å…¶ä¸­çš„å…ƒç´ ä»åå¾€å‰å‹å…¥æ ˆä¸­
   - é‡å¤ä¸Šè¿°è¿‡ç¨‹ç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªæ•´æ•°æˆ–æ ˆä¸ºç©º

3. next() æ–¹æ³•ï¼š
   - è°ƒç”¨ hasNext() ç¡®ä¿æ ˆé¡¶æ˜¯æ•´æ•°
   - å¼¹å‡ºå¹¶è¿”å›æ ˆé¡¶çš„æ•´æ•°å€¼

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ç¤ºä¾‹ 1ï¼šnestedList = [[1,1],2,[1,1]] ä¸ºä¾‹ï¼š

1. åˆå§‹åŒ–é˜¶æ®µï¼š
```
åŸå§‹åˆ—è¡¨ï¼š[[1,1], 2, [1,1]]
æ ˆåº• â†’ æ ˆé¡¶ï¼š[1,1] â†’ 2 â†’ [1,1]
```

2. è¿­ä»£è¿‡ç¨‹ï¼š
| æ­¥éª¤ | æ“ä½œ | æ ˆçš„çŠ¶æ€ | è¿”å›å€¼ | è¯´æ˜ |
|-----|------|---------|-------|-----|
| 1 | hasNext() | [1,1] â†’ 2 â†’ [1,1] | true | æ ˆé¡¶æ˜¯åˆ—è¡¨ï¼Œéœ€è¦å±•å¼€ |
| 2 | å±•å¼€æ ˆé¡¶ | [1,1] â†’ 2 â†’ 1 â†’ 1 | - | å°† [1,1] å±•å¼€ä¸ºä¸¤ä¸ª 1 |
| 3 | next() | [1,1] â†’ 2 â†’ 1 | 1 | è¿”å›ç¬¬ä¸€ä¸ª 1 |
| 4 | next() | [1,1] â†’ 2 | 1 | è¿”å›ç¬¬äºŒä¸ª 1 |
| 5 | next() | [1,1] | 2 | è¿”å› 2 |
| 6 | hasNext() | [1,1] | true | æ ˆé¡¶æ˜¯åˆ—è¡¨ï¼Œéœ€è¦å±•å¼€ |
| 7 | å±•å¼€æ ˆé¡¶ | 1 â†’ 1 | - | å°† [1,1] å±•å¼€ä¸ºä¸¤ä¸ª 1 |
| 8 | next() | 1 | 1 | è¿”å›ç¬¬ä¸€ä¸ª 1 |
| 9 | next() | ç©º | 1 | è¿”å›æœ€åä¸€ä¸ª 1 |
| 10 | hasNext() | ç©º | false | æ ˆä¸ºç©ºï¼Œè¿­ä»£ç»“æŸ |

æœ€ç»ˆè¾“å‡ºï¼š[1,1,2,1,1]

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0341_FlattenNestedListIterator.java](../src/main/java/L0341_FlattenNestedListIterator.java)

```java
public class L0341_FlattenNestedListIterator implements Iterator<Integer> {
    // ä½¿ç”¨æ ˆæ¥å­˜å‚¨åˆ—è¡¨å…ƒç´ 
    private Stack<NestedInteger> stack;

    public L0341_FlattenNestedListIterator(List<NestedInteger> nestedList) {
        stack = new Stack<>();
        // å°†åˆ—è¡¨å…ƒç´ å€’åºå‹å…¥æ ˆä¸­
        for (int i = nestedList.size() - 1; i >= 0; i--) {
            stack.push(nestedList.get(i));
        }
    }

    @Override
    public Integer next() {
        // ç¡®ä¿æ ˆé¡¶å…ƒç´ æ˜¯æ•´æ•°
        if (!hasNext()) {
            return null;
        }
        return stack.pop().getInteger();
    }

    @Override
    public boolean hasNext() {
        // å¤„ç†æ ˆé¡¶çš„åµŒå¥—åˆ—è¡¨ï¼Œç›´åˆ°æ ˆé¡¶ä¸ºæ•´æ•°æˆ–æ ˆä¸ºç©º
        while (!stack.isEmpty()) {
            NestedInteger current = stack.peek();
            if (current.isInteger()) {
                return true;
            }
            // å¦‚æœæ˜¯åˆ—è¡¨ï¼Œå±•å¼€å®ƒ
            stack.pop();
            List<NestedInteger> list = current.getList();
            for (int i = list.size() - 1; i >= 0; i--) {
                stack.push(list.get(i));
            }
        }
        return false;
    }
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼š
  - æ„é€ å‡½æ•°ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯åµŒå¥—åˆ—è¡¨ä¸­çš„å…ƒç´ æ€»æ•°
  - next()ï¼šO(1)
  - hasNext()ï¼šå‡æ‘Š O(1)ã€‚è™½ç„¶å•æ¬¡è°ƒç”¨å¯èƒ½éœ€è¦ O(n) çš„æ—¶é—´æ¥å±•å¼€åµŒå¥—åˆ—è¡¨ï¼Œä½†æ¯ä¸ªå…ƒç´ æœ€å¤šåªä¼šè¢«å±•å¼€ä¸€æ¬¡

- **ç©ºé—´å¤æ‚åº¦**ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯åµŒå¥—åˆ—è¡¨ä¸­çš„å…ƒç´ æ€»æ•°ã€‚åœ¨æœ€åæƒ…å†µä¸‹ï¼Œæ‰€æœ‰å…ƒç´ éƒ½åœ¨æ ˆä¸­

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 