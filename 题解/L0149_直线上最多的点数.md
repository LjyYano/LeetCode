---
title: ç›´çº¿ä¸Šæœ€å¤šçš„ç‚¹æ•°
date: 2025-02-09
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[ç›´çº¿ä¸Šæœ€å¤šçš„ç‚¹æ•°](https://leetcode.cn/problems/max-points-on-a-line/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`å‡ ä½•` `å“ˆå¸Œè¡¨` `æ•°å­¦`  
**ğŸŸ¡ éš¾åº¦**ï¼š`ä¸­ç­‰`  

ç»™ä½ ä¸€ä¸ªæ•°ç»„ points ï¼Œå…¶ä¸­ points[i] = [xi, yi] è¡¨ç¤º X-Y å¹³é¢ä¸Šçš„ä¸€ä¸ªç‚¹ã€‚æ±‚æœ€å¤šæœ‰å¤šå°‘ä¸ªç‚¹åœ¨åŒä¸€æ¡ç›´çº¿ä¸Šã€‚

**ç¤ºä¾‹ 1ï¼š**

![img](https://assets.leetcode.com/uploads/2021/02/25/plane1.jpg)

```
è¾“å…¥ï¼špoints = [[1,1],[2,2],[3,3]]
è¾“å‡ºï¼š3
```

**ç¤ºä¾‹ 2ï¼š**

![img](https://assets.leetcode.com/uploads/2021/02/25/plane2.jpg)

```
è¾“å…¥ï¼špoints = [[1,1],[3,2],[5,3],[4,1],[2,3],[1,4]]
è¾“å‡ºï¼š4
```

**æç¤ºï¼š**
- 1 <= points.length <= 300
- points[i].length == 2
- -10â´ <= xi, yi <= 10â´
- points ä¸­çš„æ‰€æœ‰ç‚¹ äº’ä¸ç›¸åŒ

---

## è§£é¢˜æ€è·¯

### æ–œç‡å“ˆå¸Œæ³•

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
1. å¯¹äºæ¯ä¸ªç‚¹ï¼Œè®¡ç®—å®ƒä¸å…¶ä»–æ‰€æœ‰ç‚¹æ„æˆçš„ç›´çº¿çš„æ–œç‡
2. å…·æœ‰ç›¸åŒæ–œç‡çš„ç‚¹åœ¨åŒä¸€æ¡ç›´çº¿ä¸Š
3. ä½¿ç”¨å“ˆå¸Œè¡¨è®°å½•æ¯ä¸ªæ–œç‡å¯¹åº”çš„ç‚¹çš„æ•°é‡
4. éå†æ‰€æœ‰ç‚¹ï¼Œæ‰¾åˆ°ç»è¿‡æœ€å¤šç‚¹çš„ç›´çº¿

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. å¦‚æœç‚¹çš„æ•°é‡å°äºç­‰äº 2ï¼Œç›´æ¥è¿”å›ç‚¹çš„æ•°é‡
2. éå†æ¯ä¸ªç‚¹ iï¼š
   - åˆ›å»ºå“ˆå¸Œè¡¨å­˜å‚¨æ–œç‡åŠå…¶å¯¹åº”çš„ç‚¹çš„æ•°é‡
   - éå†å…¶ä»–ç‚¹ jï¼Œè®¡ç®—ç‚¹ i å’Œç‚¹ j çš„æ–œç‡
   - æ›´æ–°å“ˆå¸Œè¡¨ä¸­è¯¥æ–œç‡å¯¹åº”çš„ç‚¹çš„æ•°é‡
   - æ›´æ–°æœ€å¤§ç‚¹æ•°
3. è¿”å›æœ€å¤§ç‚¹æ•°

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ç¤ºä¾‹ 2 ä¸ºä¾‹ï¼Œpoints = [[1,1],[3,2],[5,3],[4,1],[2,3],[1,4]]

ä»¥ç‚¹ (1,1) ä¸ºåŸºå‡†ç‚¹ï¼š
| ç›®æ ‡ç‚¹ | æ–œç‡è®¡ç®— | æ–œç‡å€¼ | å½“å‰ç›´çº¿ç‚¹æ•° |
|--------|----------|---------|--------------|
| (3,2)  | (2-1)/(3-1) = 0.5 | 0.5 | 2 |
| (5,3)  | (3-1)/(5-1) = 0.5 | 0.5 | 3 |
| (4,1)  | (1-1)/(4-1) = 0.0 | 0.0 | 2 |
| (2,3)  | (3-1)/(2-1) = 2.0 | 2.0 | 2 |
| (1,4)  | (4-1)/(1-1) = âˆ   | âˆ   | 2 |

é€šè¿‡åˆ†æå¯ä»¥çœ‹å‡ºï¼š
- ç‚¹ (1,1)ã€(3,2)ã€(5,3) åœ¨åŒä¸€æ¡ç›´çº¿ä¸Šï¼Œæ–œç‡ä¸º 0.5
- è¿™æ¡ç›´çº¿ä¸Šæœ‰ 3 ä¸ªç‚¹
- ç»§ç»­éå†å…¶ä»–åŸºå‡†ç‚¹ï¼Œæœ€ç»ˆå¯ä»¥æ‰¾åˆ°ä¸€æ¡åŒ…å« 4 ä¸ªç‚¹çš„ç›´çº¿

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0149_MaxPointsOnALine.java](../src/main/java/L0149_MaxPointsOnALine.java)

```java
public int maxPoints(int[][] points) {
    int n = points.length;
    // å¦‚æœç‚¹çš„æ•°é‡å°äºç­‰äº 2ï¼Œç›´æ¥è¿”å›ç‚¹çš„æ•°é‡
    if (n <= 2) {
        return n;
    }
    
    int maxPoints = 2;
    // éå†æ¯ä¸ªç‚¹ï¼Œè®¡ç®—å®ƒä¸å…¶ä»–ç‚¹æ„æˆçš„ç›´çº¿
    for (int i = 0; i < n; i++) {
        // ç”¨ Map å­˜å‚¨æ–œç‡åŠå…¶å¯¹åº”çš„ç‚¹çš„æ•°é‡
        Map<Double, Integer> slopeCount = new HashMap<>();
        
        // è®¡ç®—å½“å‰ç‚¹ä¸å…¶ä»–ç‚¹çš„æ–œç‡
        for (int j = 0; j < n; j++) {
            if (i != j) {
                // è®¡ç®—æ–œç‡
                double slope = getSlope(points[i], points[j]);
                // æ›´æ–°æ–œç‡å¯¹åº”çš„ç‚¹çš„æ•°é‡
                slopeCount.put(slope, slopeCount.getOrDefault(slope, 1) + 1);
                // æ›´æ–°æœ€å¤§ç‚¹æ•°
                maxPoints = Math.max(maxPoints, slopeCount.get(slope));
            }
        }
    }
    
    return maxPoints;
}

// è®¡ç®—ä¸¤ç‚¹ä¹‹é—´çš„æ–œç‡
private double getSlope(int[] point1, int[] point2) {
    int x1 = point1[0], y1 = point1[1];
    int x2 = point2[0], y2 = point2[1];
    
    // å¦‚æœ x åæ ‡ç›¸åŒï¼Œè¿”å› Double.POSITIVE_INFINITY è¡¨ç¤ºå‚ç›´çº¿
    if (x1 == x2) {
        return Double.POSITIVE_INFINITY;
    }
    // å¦‚æœ y åæ ‡ç›¸åŒï¼Œè¿”å› 0.0 è¡¨ç¤ºæ°´å¹³çº¿
    if (y1 == y2) {
        return 0.0;
    }
    // è®¡ç®—æ–œç‡
    return (double) (y2 - y1) / (x2 - x1);
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(nÂ²)ï¼Œå…¶ä¸­ n æ˜¯ç‚¹çš„æ•°é‡ã€‚éœ€è¦éå†æ¯ä¸ªç‚¹ï¼Œå¹¶è®¡ç®—å®ƒä¸å…¶ä»–æ‰€æœ‰ç‚¹çš„æ–œç‡ã€‚
- **ç©ºé—´å¤æ‚åº¦**ï¼šO(n)ï¼Œéœ€è¦ä½¿ç”¨å“ˆå¸Œè¡¨å­˜å‚¨æ–œç‡ä¿¡æ¯ã€‚åœ¨æœ€åæƒ…å†µä¸‹ï¼Œä¸€ä¸ªç‚¹ä¸å…¶ä»–æ‰€æœ‰ç‚¹çš„æ–œç‡éƒ½ä¸ç›¸åŒï¼Œæ­¤æ—¶å“ˆå¸Œè¡¨çš„å¤§å°ä¸º O(n)ã€‚

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 