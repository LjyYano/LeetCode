---
title: æ°´å£¶é—®é¢˜
date: 2025-02-11
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[æ°´å£¶é—®é¢˜](https://leetcode.cn/problems/water-and-jug-problem/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`æ•°å­¦` `æ·±åº¦ä¼˜å…ˆæœç´¢` `å¹¿åº¦ä¼˜å…ˆæœç´¢`  
**ğŸŸ¡ éš¾åº¦**ï¼š`ä¸­ç­‰`  

æœ‰ä¸¤ä¸ªæ°´å£¶ï¼Œå®¹é‡åˆ†åˆ«ä¸º jug1Capacity å’Œ jug2Capacity å‡ã€‚æ°´çš„ä¾›åº”æ˜¯æ— é™çš„ã€‚ç¡®å®šæ˜¯å¦æœ‰å¯èƒ½ä½¿ç”¨è¿™ä¸¤ä¸ªå£¶å‡†ç¡®å¾—åˆ° targetCapacity å‡ã€‚

å¦‚æœå¯ä»¥å¾—åˆ° targetCapacity å‡æ°´ï¼Œæœ€åè¯·ç”¨ä»¥ä¸Šæ°´å£¶ä¸­çš„ä¸€æˆ–ä¸¤ä¸ªæ¥ç››æ”¾å–å¾—çš„ targetCapacity å‡æ°´ã€‚

ä½ å¯ä»¥ï¼š
- è£…æ»¡ä»»æ„ä¸€ä¸ªæ°´å£¶
- æ¸…ç©ºä»»æ„ä¸€ä¸ªæ°´å£¶
- ä»ä¸€ä¸ªæ°´å£¶å‘å¦å¤–ä¸€ä¸ªæ°´å£¶å€’æ°´ï¼Œç›´åˆ°è£…æ»¡æˆ–è€…å€’ç©º

ç¤ºä¾‹ 1: 
```
è¾“å…¥: jug1Capacity = 3, jug2Capacity = 5, targetCapacity = 4
è¾“å‡º: true
è§£é‡Šï¼šè¯¥ç®—æ³•å¦‚ä¸‹ï¼š
1. è£…æ»¡ 5 å‡æ°´å£¶ (0, 5)
2. å‘ 3 å‡æ°´å£¶å€’æ°´ç›´åˆ°è£…æ»¡ (3, 2)
3. æ¸…ç©º 3 å‡æ°´å£¶ (0, 2)
4. ä» 5 å‡æ°´å£¶å‘ 3 å‡æ°´å£¶å€’æ°´ (2, 0)
5. è£…æ»¡ 5 å‡æ°´å£¶ (2, 5)
6. å‘ 3 å‡æ°´å£¶å€’æ°´ç›´åˆ°è£…æ»¡ (3, 4)
7. æ¸…ç©º 3 å‡æ°´å£¶ (0, 4)
```

ç¤ºä¾‹ 2:
```
è¾“å…¥: jug1Capacity = 2, jug2Capacity = 6, targetCapacity = 5
è¾“å‡º: false
```

ç¤ºä¾‹ 3:
```
è¾“å…¥: jug1Capacity = 1, jug2Capacity = 2, targetCapacity = 3
è¾“å‡º: true
```

æç¤º:
- 1 <= jug1Capacity, jug2Capacity, targetCapacity <= 10â¶

---

## è§£é¢˜æ€è·¯
### è´ç¥–å®šç†

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
è¿™é“é¢˜å¯ä»¥ä½¿ç”¨è´ç¥–å®šç†ï¼ˆBÃ©zout's identityï¼‰æ¥è§£å†³ã€‚è´ç¥–å®šç†æŒ‡å‡ºï¼šå¯¹äºä»»æ„ä¸¤ä¸ªæ•´æ•° a å’Œ bï¼Œå­˜åœ¨æ•´æ•° x å’Œ yï¼Œä½¿å¾— ax + by = gcd(a,b)ï¼Œå…¶ä¸­ gcd(a,b) æ˜¯ a å’Œ b çš„æœ€å¤§å…¬çº¦æ•°ã€‚

åœ¨æ°´å£¶é—®é¢˜ä¸­ï¼š
1. æ¯æ¬¡æ“ä½œå®é™…ä¸Šæ˜¯åœ¨æ‰§è¡Œ ax + by çš„è¿ç®—ï¼Œå…¶ä¸­ï¼š
   - x å¯ä»¥æ˜¯æ­£æ•°ï¼ˆå¾€å£¶é‡ŒåŠ æ°´ï¼‰æˆ–è´Ÿæ•°ï¼ˆä»å£¶é‡Œå€’æ°´ï¼‰
   - y åŒæ ·å¯ä»¥æ˜¯æ­£æ•°æˆ–è´Ÿæ•°
2. å› æ­¤ï¼Œæˆ‘ä»¬èƒ½å¾—åˆ°çš„æ°´é‡å¿…é¡»æ˜¯ä¸¤ä¸ªæ°´å£¶å®¹é‡çš„æœ€å¤§å…¬çº¦æ•°çš„å€æ•°
3. å¦‚æœç›®æ ‡å®¹é‡ä¸æ˜¯æœ€å¤§å…¬çº¦æ•°çš„å€æ•°ï¼Œé‚£ä¹ˆä¸€å®šæ— æ³•å¾—åˆ°ç›®æ ‡å®¹é‡

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. é¦–å…ˆå¤„ç†ç‰¹æ®Šæƒ…å†µï¼š
   - å¦‚æœç›®æ ‡å®¹é‡å¤§äºä¸¤ä¸ªæ°´å£¶çš„æ€»å®¹é‡ï¼Œè¿”å› false
   - å¦‚æœç›®æ ‡å®¹é‡ä¸º 0ï¼Œè¿”å› true
   - å¦‚æœå…¶ä¸­ä¸€ä¸ªæ°´å£¶å®¹é‡ä¸º 0ï¼Œæ£€æŸ¥ç›®æ ‡å®¹é‡æ˜¯å¦æ˜¯å¦ä¸€ä¸ªæ°´å£¶å®¹é‡çš„å€æ•°

2. è®¡ç®—ä¸¤ä¸ªæ°´å£¶å®¹é‡çš„æœ€å¤§å…¬çº¦æ•°ï¼š
   - ä½¿ç”¨è¾—è½¬ç›¸é™¤æ³•ï¼ˆæ¬§å‡ é‡Œå¾—ç®—æ³•ï¼‰
   - gcd(a,b) = gcd(b, a mod b)

3. åˆ¤æ–­ç›®æ ‡å®¹é‡æ˜¯å¦æ˜¯æœ€å¤§å…¬çº¦æ•°çš„å€æ•°ï¼š
   - å¦‚æœæ˜¯ï¼Œè¿”å› true
   - å¦‚æœä¸æ˜¯ï¼Œè¿”å› false

#### ğŸ§© ç¤ºä¾‹åˆ†æ
è®©æˆ‘ä»¬åˆ†æå‡ ä¸ªç¤ºä¾‹ï¼š

1. jug1Capacity = 3, jug2Capacity = 5, targetCapacity = 4
```
æ­¥éª¤ 1ï¼šæ£€æŸ¥ç‰¹æ®Šæƒ…å†µ
- ç›®æ ‡å®¹é‡ 4 < æ€»å®¹é‡ 8 âœ“
- ç›®æ ‡å®¹é‡ä¸ä¸º 0 âœ“
- ä¸¤ä¸ªæ°´å£¶å®¹é‡éƒ½ä¸ä¸º 0 âœ“

æ­¥éª¤ 2ï¼šè®¡ç®—æœ€å¤§å…¬çº¦æ•°
gcd(3,5) çš„è®¡ç®—è¿‡ç¨‹ï¼š
5 = 1 Ã— 3 + 2
3 = 1 Ã— 2 + 1
2 = 2 Ã— 1 + 0
å› æ­¤ gcd(3,5) = 1

æ­¥éª¤ 3ï¼šåˆ¤æ–­ 4 æ˜¯å¦æ˜¯ 1 çš„å€æ•°
4 Ã· 1 = 4ï¼ˆæ•´é™¤ï¼‰
æ‰€ä»¥è¿”å› true
```

2. jug1Capacity = 2, jug2Capacity = 6, targetCapacity = 5
```
æ­¥éª¤ 1ï¼šæ£€æŸ¥ç‰¹æ®Šæƒ…å†µ
- ç›®æ ‡å®¹é‡ 5 < æ€»å®¹é‡ 8 âœ“
- ç›®æ ‡å®¹é‡ä¸ä¸º 0 âœ“
- ä¸¤ä¸ªæ°´å£¶å®¹é‡éƒ½ä¸ä¸º 0 âœ“

æ­¥éª¤ 2ï¼šè®¡ç®—æœ€å¤§å…¬çº¦æ•°
gcd(2,6) çš„è®¡ç®—è¿‡ç¨‹ï¼š
6 = 3 Ã— 2 + 0
å› æ­¤ gcd(2,6) = 2

æ­¥éª¤ 3ï¼šåˆ¤æ–­ 5 æ˜¯å¦æ˜¯ 2 çš„å€æ•°
5 Ã· 2 = 2.5ï¼ˆä¸èƒ½æ•´é™¤ï¼‰
æ‰€ä»¥è¿”å› false
```

3. jug1Capacity = 1, jug2Capacity = 2, targetCapacity = 3
```
æ­¥éª¤ 1ï¼šæ£€æŸ¥ç‰¹æ®Šæƒ…å†µ
- ç›®æ ‡å®¹é‡ 3 = æ€»å®¹é‡ 3 âœ“
- ç›®æ ‡å®¹é‡ä¸ä¸º 0 âœ“
- ä¸¤ä¸ªæ°´å£¶å®¹é‡éƒ½ä¸ä¸º 0 âœ“

æ­¥éª¤ 2ï¼šè®¡ç®—æœ€å¤§å…¬çº¦æ•°
gcd(1,2) çš„è®¡ç®—è¿‡ç¨‹ï¼š
2 = 2 Ã— 1 + 0
å› æ­¤ gcd(1,2) = 1

æ­¥éª¤ 3ï¼šåˆ¤æ–­ 3 æ˜¯å¦æ˜¯ 1 çš„å€æ•°
3 Ã· 1 = 3ï¼ˆæ•´é™¤ï¼‰
æ‰€ä»¥è¿”å› true
```

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0365_WaterAndJugProblem.java](../src/main/java/L0365_WaterAndJugProblem.java)

```java
public boolean canMeasureWater(int jug1Capacity, int jug2Capacity, int targetCapacity) {
    // å¦‚æœç›®æ ‡å®¹é‡å¤§äºä¸¤ä¸ªæ°´å£¶çš„æ€»å®¹é‡ï¼Œåˆ™ä¸å¯èƒ½å®ç°
    if (jug1Capacity + jug2Capacity < targetCapacity) {
        return false;
    }
    
    // å¦‚æœç›®æ ‡å®¹é‡ä¸º 0ï¼Œåˆ™ä¸€å®šå¯ä»¥å®ç°ï¼ˆä¸¤ä¸ªæ°´å£¶éƒ½ä¸è£…æ°´ï¼‰
    if (targetCapacity == 0) {
        return true;
    }
    
    // å¦‚æœå…¶ä¸­ä¸€ä¸ªæ°´å£¶å®¹é‡ä¸º 0ï¼Œåˆ™ç›®æ ‡å®¹é‡å¿…é¡»æ˜¯å¦ä¸€ä¸ªæ°´å£¶å®¹é‡çš„å€æ•°
    if (jug1Capacity == 0) {
        return targetCapacity % jug2Capacity == 0;
    }
    if (jug2Capacity == 0) {
        return targetCapacity % jug1Capacity == 0;
    }
    
    // ä½¿ç”¨è´ç¥–å®šç†ï¼Œç›®æ ‡å®¹é‡å¿…é¡»æ˜¯ä¸¤ä¸ªæ°´å£¶å®¹é‡çš„æœ€å¤§å…¬çº¦æ•°çš„å€æ•°
    return targetCapacity % gcd(jug1Capacity, jug2Capacity) == 0;
}

/**
 * è®¡ç®—ä¸¤ä¸ªæ•°çš„æœ€å¤§å…¬çº¦æ•°ï¼ˆä½¿ç”¨è¾—è½¬ç›¸é™¤æ³•ï¼‰
 */
private int gcd(int a, int b) {
    while (b != 0) {
        int temp = b;
        b = a % b;
        a = temp;
    }
    return a;
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(log(min(x,y)))
  - ä¸»è¦æ—¶é—´æ¶ˆè€—åœ¨è®¡ç®—æœ€å¤§å…¬çº¦æ•°
  - ä½¿ç”¨è¾—è½¬ç›¸é™¤æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(log(min(x,y)))
  - å…¶ä»–æ“ä½œéƒ½æ˜¯ O(1) çš„

- **ç©ºé—´å¤æ‚åº¦**ï¼šO(1)
  - åªä½¿ç”¨äº†å‡ ä¸ªå˜é‡æ¥å­˜å‚¨ä¸­é—´ç»“æœ
  - ä¸éœ€è¦é¢å¤–çš„æ•°æ®ç»“æ„

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 