---
title: x 的平方根
date: 2025-02-09
---

## 题目描述

**🔗 题目**：[x 的平方根](https://leetcode.cn/problems/sqrtx/)  
**🏷️ 标签**：`数学` `二分查找`  
**🟡 难度**：`中等`  

给你一个非负整数 x ，计算并返回 x 的 算术平方根 。

由于返回类型是整数，结果只保留 整数部分 ，小数部分将被 舍去 。

注意：不允许使用任何内置指数函数和算符，例如 pow(x, 0.5) 或者 x ** 0.5 。

**示例 1：**
```
输入：x = 4
输出：2
```

**示例 2：**
```
输入：x = 8
输出：2
解释：8 的算术平方根是 2.82842..., 由于返回类型是整数，小数部分将被舍去。
```

**提示：**
- 0 <= x <= 2³¹ - 1

---

## 解题思路
### 二分查找法

#### 📝 核心思想
这道题的核心思想是使用二分查找来逼近平方根。由于我们只需要返回整数部分，所以可以在 1 到 x 的范围内进行二分查找，找到最大的数 k，使得 k² ≤ x。需要注意的是，在计算过程中要避免整数溢出的问题。

#### 🛠️ 实现步骤
1. 处理特殊情况：
   - 如果 x = 0，返回 0
   - 如果 x = 1，返回 1

2. 使用二分查找：
   - 初始化左边界 left = 1，右边界 right = x
   - 当 left ≤ right 时，重复以下步骤：
     * 计算中间值 mid = left + (right - left) / 2
     * 如果 mid ≤ x/mid，说明 mid 可能是答案，记录结果并继续在右半部分查找
     * 如果 mid > x/mid，说明 mid 太大，在左半部分查找

3. 返回最后记录的结果

#### 🧩 示例分析
以示例 2（x = 8）为例，演示二分查找的过程：

| 步骤 | 左边界 | 右边界 | 中间值 | 中间值的平方 | 比较结果 | 操作 |
|-----|--------|--------|--------|-------------|----------|------|
| 初始状态 | 1 | 8 | - | - | - | - |
| 第 1 步 | 1 | 8 | 4 | 16 > 8 | mid > x/mid | right = mid - 1 |
| 第 2 步 | 1 | 3 | 2 | 4 < 8 | mid ≤ x/mid | result = 2, left = mid + 1 |
| 第 3 步 | 3 | 3 | 3 | 9 > 8 | mid > x/mid | right = mid - 1 |
| 第 4 步 | 3 | 2 | - | - | left > right | 退出循环 |

最终结果为 2，因为：
- 2² = 4 < 8，满足条件
- 3² = 9 > 8，不满足条件
- 所以 2 是最大的满足条件的整数

对于大数的情况，比如 x = 2147395600：
```
初始范围：[1, 2147395600]
使用除法而不是乘法比较：
mid ≤ x/mid 而不是 mid × mid ≤ x
这样可以避免整数溢出问题
```

---

## 代码实现

完整的可运行代码：[L0069_Sqrt.java](../src/main/java/L0069_Sqrt.java)

```java
public int mySqrt(int x) {
    // 特殊情况处理
    if (x == 0) {
        return 0;
    }
    if (x == 1) {
        return 1;
    }

    // 二分查找的左右边界
    int left = 1;
    int right = x;

    // 记录结果
    int result = 0;

    // 二分查找
    while (left <= right) {
        // 取中间值
        int mid = left + (right - left) / 2;

        // 计算中间值的平方
        // 注意：这里使用除法而不是乘法，避免溢出
        if (mid <= x / mid) {
            // mid² <= x，记录这个可能的结果
            result = mid;
            // 继续在右半部分查找
            left = mid + 1;
        } else {
            // mid² > x，在左半部分查找
            right = mid - 1;
        }
    }

    return result;
}
```

---

## 复杂度分析

- **时间复杂度**：O(log x)，其中 x 是输入的数。二分查找的时间复杂度是对数级别的。
- **空间复杂度**：O(1)，只使用了常数个变量。

---

## LeetCode 题解

本题解是 LeetCode 系列题解的一部分。该系列题解致力于帮助程序员更好地理解和掌握算法思维，内容包含详细的解题思路分析、图文并茂的示例讲解和完整的代码实现。

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode 最全题解](https://github.com/LjyYano/LeetCode)：持续更新中，欢迎 Star ⭐️ 关注，一起探讨算法之美。 