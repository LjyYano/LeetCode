---
title: ç»„åˆæ€»å’Œ II
date: 2025-02-08
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[ç»„åˆæ€»å’Œ II](https://leetcode.cn/problems/combination-sum-ii/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`æ•°ç»„` `å›æº¯` `å‰ªæ`  
**ğŸŸ¡ éš¾åº¦**ï¼š`ä¸­ç­‰`  

ç»™å®šä¸€ä¸ªå€™é€‰äººç¼–å·çš„é›†åˆ candidates å’Œä¸€ä¸ªç›®æ ‡æ•° targetï¼Œæ‰¾å‡º candidates ä¸­æ‰€æœ‰å¯ä»¥ä½¿æ•°å­—å’Œä¸º target çš„ç»„åˆã€‚

candidates ä¸­çš„æ¯ä¸ªæ•°å­—åœ¨æ¯ä¸ªç»„åˆä¸­åªèƒ½ä½¿ç”¨ ä¸€æ¬¡ã€‚

æ³¨æ„ï¼šè§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„ç»„åˆã€‚ 

ç¤ºä¾‹ 1:
```
è¾“å…¥: candidates = [10,1,2,7,6,1,5], target = 8,
è¾“å‡º:
[
[1,1,6],
[1,2,5],
[1,7],
[2,6]
]
```

ç¤ºä¾‹ 2:
```
è¾“å…¥: candidates = [2,5,2,1,2], target = 5,
è¾“å‡º:
[
[1,2,2],
[5]
]
```

---

## è§£é¢˜æ€è·¯
### å›æº¯ + å‰ªæ + å»é‡

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
1. ä½¿ç”¨å›æº¯ç®—æ³•ï¼Œå°è¯•æ‰€æœ‰å¯èƒ½çš„ç»„åˆ
2. é€šè¿‡æ’åºå’Œå‰ªæä¼˜åŒ–ï¼Œå‡å°‘ä¸å¿…è¦çš„æœç´¢
3. æ¯ä¸ªæ•°å­—åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œæ‰€ä»¥é€’å½’æ—¶è¦ä»ä¸‹ä¸€ä¸ªä½ç½®å¼€å§‹
4. é€šè¿‡è·³è¿‡åŒä¸€å±‚é€’å½’ä¸­çš„é‡å¤æ•°å­—æ¥é¿å…é‡å¤ç»„åˆ

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. å¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œè®©ç›¸åŒçš„æ•°å­—ç›¸é‚»ï¼Œæ–¹ä¾¿å»é‡å’Œå‰ªæ
2. å®šä¹‰å›æº¯å‡½æ•°ï¼ŒåŒ…å«ä»¥ä¸‹å‚æ•°ï¼š
   - resultï¼šå­˜å‚¨æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„ç»„åˆ
   - currentï¼šå½“å‰æ­£åœ¨æ„å»ºçš„ç»„åˆ
   - candidatesï¼šå€™é€‰æ•°ç»„
   - remainï¼šå‰©ä½™éœ€è¦å‡‘æˆçš„ç›®æ ‡å€¼
   - startï¼šå½“å‰å¯ä»¥é€‰æ‹©çš„èµ·å§‹ä½ç½®
3. åœ¨å›æº¯è¿‡ç¨‹ä¸­ï¼š
   - å¦‚æœ remain = 0ï¼Œæ‰¾åˆ°ä¸€ä¸ªæœ‰æ•ˆç»„åˆ
   - ä» start å¼€å§‹å°è¯•æ¯ä¸ªæ•°å­—
   - å¦‚æœå½“å‰æ•°å­—å¤§äºå‰©ä½™ç›®æ ‡å€¼ï¼Œç›´æ¥ç»“æŸå½“å‰åˆ†æ”¯
   - è·³è¿‡åŒä¸€å±‚é€’å½’ä¸­é‡å¤çš„æ•°å­—
   - é€‰æ‹©å½“å‰æ•°å­—ï¼Œç»§ç»­é€’å½’ï¼ˆä» i+1 å¼€å§‹ï¼‰
   - æ’¤é”€é€‰æ‹©ï¼Œå°è¯•ä¸‹ä¸€ä¸ªæ•°å­—

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ candidates = [1,1,2,5,6,7,10], target = 8 ä¸ºä¾‹ï¼ˆå·²æ’åºï¼‰ï¼š

```
å›æº¯æ ‘å½¢ç»“æ„ï¼ˆçœç•¥äº†ä¸å¯èƒ½çš„åˆ†æ”¯ï¼‰ï¼š
                         8(ç›®æ ‡å€¼)
                    /    |    |    \
                   1     1    2     5
                  /      |    |      \
                 1       2    5       6
                /        |    |
               2        5    6
              /         |
             5         6
            /
           6(>remain)

é€‰æ‹©è·¯å¾„åˆ†æï¼š
1. ä»ç¬¬ä¸€ä¸ª 1 å¼€å§‹ï¼š
   - 1 â†’ 7(remain) â†’ 1 â†’ 6(remain) â†’ 2 â†’ 4(remain) â†’ 5 â†’ åœæ­¢
   - 1 â†’ 7(remain) â†’ 1 â†’ 6(remain) â†’ 5 â†’ 1(remain) â†’ åœæ­¢
   - 1 â†’ 7(remain) â†’ 1 â†’ 6(remain) â†’ 6 â†’ 0(remain) âœ… [1,1,6]
   
2. ä»ç¬¬äºŒä¸ª 1 å¼€å§‹ï¼ˆè·³è¿‡ï¼Œå› ä¸ºå’Œå‰ä¸€ä¸ªç›¸åŒï¼‰

3. ä» 2 å¼€å§‹ï¼š
   - 2 â†’ 6(remain) â†’ 5 â†’ 1(remain) â†’ åœæ­¢
   - 2 â†’ 6(remain) â†’ 6 â†’ 0(remain) âœ… [2,6]

4. ä» 5 å¼€å§‹ï¼š
   - 5 â†’ 3(remain) â†’ åœæ­¢

å»é‡ç­–ç•¥è¯´æ˜ï¼š
1. æ’åºåï¼Œç›¸åŒçš„æ•°å­—ç›¸é‚»ï¼š[1,1,2,5,6,7,10]
2. åœ¨åŒä¸€å±‚é€’å½’ä¸­ï¼Œè·³è¿‡ç›¸åŒçš„æ•°å­—ï¼š
   - ç¬¬ä¸€å±‚ï¼šé€‰æ‹©ç¬¬ä¸€ä¸ª 1 åï¼Œè·³è¿‡ç¬¬äºŒä¸ª 1
   - ç¬¬äºŒå±‚ï¼šé€‰æ‹©ç¬¬ä¸€ä¸ª 1 åï¼Œå¯ä»¥é€‰æ‹©ç¬¬äºŒä¸ª 1ï¼ˆä¸åŒå±‚ï¼‰
3. é€šè¿‡ i > start && candidates[i] == candidates[i-1] åˆ¤æ–­æ˜¯å¦è·³è¿‡
```

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0040_CombinationSumII.java](../src/main/java/L0040_CombinationSumII.java)

```java
public List<List<Integer>> combinationSum2(int[] candidates, int target) {
    List<List<Integer>> result = new ArrayList<>();
    // å…ˆå¯¹æ•°ç»„æ’åºï¼Œè®©ç›¸åŒçš„æ•°å­—ç›¸é‚»ï¼Œæ–¹ä¾¿å»é‡å’Œå‰ªæ
    Arrays.sort(candidates);
    // å›æº¯æœç´¢æ‰€æœ‰å¯èƒ½çš„ç»„åˆ
    backtrack(result, new ArrayList<>(), candidates, target, 0);
    return result;
}

private void backtrack(List<List<Integer>> result, List<Integer> current, 
        int[] candidates, int remain, int start) {
    // æ‰¾åˆ°ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„ç»„åˆ
    if (remain == 0) {
        result.add(new ArrayList<>(current));
        return;
    }
    
    // å°è¯•é€‰æ‹©æ¯ä¸ªå¯èƒ½çš„æ•°å­—
    for (int i = start; i < candidates.length; i++) {
        // å‰ªæï¼šå¦‚æœå½“å‰æ•°å­—å·²ç»å¤§äºå‰©ä½™ç›®æ ‡å€¼ï¼Œåé¢çš„æ•°å­—æ›´å¤§ï¼Œä¸€å®šä¸ç¬¦åˆè¦æ±‚
        if (candidates[i] > remain) {
            break;
        }
        
        // å»é‡ï¼šè·³è¿‡åŒä¸€å±‚é€’å½’ä¸­é‡å¤çš„æ•°å­—
        if (i > start && candidates[i] == candidates[i - 1]) {
            continue;
        }
        
        // é€‰æ‹©å½“å‰æ•°å­—
        current.add(candidates[i]);
        // ç»§ç»­æœç´¢ï¼ˆå› ä¸ºæ¯ä¸ªæ•°å­—åªèƒ½ç”¨ä¸€æ¬¡ï¼Œæ‰€ä»¥ä¸‹ä¸€è½®ä» i+1 å¼€å§‹ï¼‰
        backtrack(result, current, candidates, remain - candidates[i], i + 1);
        // æ’¤é”€é€‰æ‹©
        current.remove(current.size() - 1);
    }
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(2â¿)
  - n æ˜¯æ•°ç»„ candidates çš„é•¿åº¦
  - æ¯ä¸ªä½ç½®éƒ½å¯ä»¥é€‰æ‹©æˆ–ä¸é€‰æ‹©
  - å®é™…å¤æ‚åº¦ä¼šå› ä¸ºå‰ªæå’Œå»é‡è€Œé™ä½
  - æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n log n)ï¼Œä½†ä¸æ˜¯ä¸»è¦éƒ¨åˆ†

- **ç©ºé—´å¤æ‚åº¦**ï¼šO(n)
  - é€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦æœ€å¤§ä¸º n
  - ä¸è€ƒè™‘å­˜å‚¨ç»“æœæ‰€éœ€çš„ç©ºé—´
  - æ¯ä¸ªé€’å½’å±‚çº§éœ€è¦å­˜å‚¨å½“å‰çš„ç»„åˆ

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 