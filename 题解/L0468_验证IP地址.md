---
title: éªŒè¯IPåœ°å€
date: 2024-03-19
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[éªŒè¯IPåœ°å€](https://leetcode.cn/problems/validate-ip-address/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`å­—ç¬¦ä¸²`  
**ğŸŸ¡ éš¾åº¦**ï¼š`ä¸­ç­‰`  

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² queryIPã€‚å¦‚æœæ˜¯æœ‰æ•ˆçš„ IPv4 åœ°å€ï¼Œè¿”å› "IPv4" ï¼›å¦‚æœæ˜¯æœ‰æ•ˆçš„ IPv6 åœ°å€ï¼Œè¿”å› "IPv6" ï¼›å¦‚æœä¸æ˜¯ä¸Šè¿°ç±»å‹çš„ IP åœ°å€ï¼Œè¿”å› "Neither" ã€‚

æœ‰æ•ˆçš„IPv4åœ°å€ æ˜¯ "x1.x2.x3.x4" å½¢å¼çš„IPåœ°å€ã€‚ å…¶ä¸­ 0 <= xi <= 255 ä¸” xi ä¸èƒ½åŒ…å« å‰å¯¼é›¶ã€‚ä¾‹å¦‚: "192.168.1.1" ã€ "192.168.1.0" ä¸ºæœ‰æ•ˆIPv4åœ°å€ï¼Œ "192.168.01.1" ä¸ºæ— æ•ˆIPv4åœ°å€; "192.168.1.00" ã€ "192.168@1.1" ä¸ºæ— æ•ˆIPv4åœ°å€ã€‚

ä¸€ä¸ªæœ‰æ•ˆçš„IPv6åœ°å€ æ˜¯ä¸€ä¸ªæ ¼å¼ä¸º"x1:x2:x3:x4:x5:x6:x7:x8" çš„IPåœ°å€ï¼Œå…¶ä¸­:
1. 1 <= xi.length <= 4
2. xi æ˜¯ä¸€ä¸ª åå…­è¿›åˆ¶å­—ç¬¦ä¸² ï¼Œå¯ä»¥åŒ…å«æ•°å­—ã€å°å†™è‹±æ–‡å­—æ¯( 'a' åˆ° 'f' )å’Œå¤§å†™è‹±æ–‡å­—æ¯( 'A' åˆ° 'F' )ã€‚
3. åœ¨ xi ä¸­å…è®¸å‰å¯¼é›¶ã€‚

ä¾‹å¦‚ "2001:0db8:85a3:0000:0000:8a2e:0370:7334" å’Œ "2001:db8:85a3:0:0:8A2E:0370:7334" æ˜¯æœ‰æ•ˆçš„ IPv6 åœ°å€ï¼Œè€Œ "2001:0db8:85a3::8A2E:037j:7334" å’Œ "02001:0db8:85a3:0000:0000:8a2e:0370:7334" æ˜¯æ— æ•ˆçš„ IPv6 åœ°å€ã€‚

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šqueryIP = "172.16.254.1"
è¾“å‡ºï¼š"IPv4"
è§£é‡Šï¼šæœ‰æ•ˆçš„ IPv4 åœ°å€ï¼Œè¿”å› "IPv4"
```

ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šqueryIP = "2001:0db8:85a3:0:0:8A2E:0370:7334"
è¾“å‡ºï¼š"IPv6"
è§£é‡Šï¼šæœ‰æ•ˆçš„ IPv6 åœ°å€ï¼Œè¿”å› "IPv6"
```

ç¤ºä¾‹ 3ï¼š
```
è¾“å…¥ï¼šqueryIP = "256.256.256.256"
è¾“å‡ºï¼š"Neither"
è§£é‡Šï¼šæ—¢ä¸æ˜¯ IPv4 åœ°å€ï¼Œåˆä¸æ˜¯ IPv6 åœ°å€
```

---

## è§£é¢˜æ€è·¯
### åˆ†æ²»æ³•

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
è¿™é“é¢˜çš„æ ¸å¿ƒåœ¨äºå°† IP åœ°å€çš„éªŒè¯åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„éƒ¨åˆ†ï¼šIPv4 å’Œ IPv6 çš„éªŒè¯ã€‚å¯¹äºæ¯ç§ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦ï¼š
1. é¦–å…ˆåˆ¤æ–­æ˜¯å“ªç§ç±»å‹çš„ IP åœ°å€ï¼ˆé€šè¿‡åˆ†éš”ç¬¦ . æˆ– : æ¥åˆ¤æ–­ï¼‰
2. ç„¶åæŒ‰ç…§å¯¹åº”ç±»å‹çš„è§„åˆ™è¿›è¡ŒéªŒè¯
3. å¯¹äºæ¯ä¸ªéƒ¨åˆ†ï¼Œéƒ½éœ€è¦è¿›è¡Œè¯¦ç»†çš„æ ¼å¼æ£€æŸ¥

ä¸»è¦çš„éªŒè¯è§„åˆ™åŒ…æ‹¬ï¼š
- IPv4ï¼š
  1. å¿…é¡»æ°å¥½æœ‰ 4 ä¸ªéƒ¨åˆ†
  2. æ¯ä¸ªéƒ¨åˆ†å¿…é¡»æ˜¯ 0-255 çš„æ•´æ•°
  3. ä¸å…è®¸æœ‰å‰å¯¼é›¶
  4. åªèƒ½åŒ…å«æ•°å­—å­—ç¬¦

- IPv6ï¼š
  1. å¿…é¡»æ°å¥½æœ‰ 8 ä¸ªéƒ¨åˆ†
  2. æ¯ä¸ªéƒ¨åˆ†çš„é•¿åº¦åœ¨ 1-4 ä¹‹é—´
  3. åªèƒ½åŒ…å«æ•°å­—å’Œ a-fï¼ˆå¤§å°å†™å‡å¯ï¼‰
  4. å…è®¸æœ‰å‰å¯¼é›¶

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. é¦–å…ˆåˆ¤æ–­ IP åœ°å€çš„ç±»å‹ï¼š
   - å¦‚æœåŒ…å« "."ï¼Œå°è¯•éªŒè¯ IPv4
   - å¦‚æœåŒ…å« ":"ï¼Œå°è¯•éªŒè¯ IPv6
   - å¦‚æœéƒ½ä¸åŒ…å«ï¼Œè¿”å› "Neither"

2. IPv4 éªŒè¯æ­¥éª¤ï¼š
   - æ£€æŸ¥æ˜¯å¦ä»¥ "." å¼€å¤´æˆ–ç»“å°¾
   - æŒ‰ "." åˆ†å‰²å­—ç¬¦ä¸²
   - æ£€æŸ¥æ˜¯å¦æ°å¥½æœ‰ 4 ä¸ªéƒ¨åˆ†
   - å¯¹æ¯ä¸ªéƒ¨åˆ†è¿›è¡ŒéªŒè¯ï¼š
     * æ£€æŸ¥é•¿åº¦ï¼ˆ1-3 ä½ï¼‰
     * æ£€æŸ¥æ˜¯å¦åªåŒ…å«æ•°å­—
     * æ£€æŸ¥æ˜¯å¦æœ‰å‰å¯¼é›¶
     * æ£€æŸ¥æ•°å€¼èŒƒå›´ï¼ˆ0-255ï¼‰

3. IPv6 éªŒè¯æ­¥éª¤ï¼š
   - æ£€æŸ¥æ˜¯å¦ä»¥ ":" å¼€å¤´æˆ–ç»“å°¾
   - æŒ‰ ":" åˆ†å‰²å­—ç¬¦ä¸²
   - æ£€æŸ¥æ˜¯å¦æ°å¥½æœ‰ 8 ä¸ªéƒ¨åˆ†
   - å¯¹æ¯ä¸ªéƒ¨åˆ†è¿›è¡ŒéªŒè¯ï¼š
     * æ£€æŸ¥é•¿åº¦ï¼ˆ1-4 ä½ï¼‰
     * æ£€æŸ¥æ˜¯å¦åªåŒ…å«åˆæ³•çš„åå…­è¿›åˆ¶å­—ç¬¦

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ç¤ºä¾‹ 1 ä¸ºä¾‹ï¼Œåˆ†æ IPv4 åœ°å€ "172.16.254.1" çš„éªŒè¯è¿‡ç¨‹ï¼š

1. åˆ¤æ–­ç±»å‹ï¼š
   ```
   åŒ…å« "."ï¼Œè¿›å…¥ IPv4 éªŒè¯æµç¨‹
   ```

2. åˆ†å‰²å­—ç¬¦ä¸²ï¼š
   ```
   parts = ["172", "16", "254", "1"]
   ```

3. éªŒè¯æ¯ä¸ªéƒ¨åˆ†ï¼š
   | éƒ¨åˆ†  | é•¿åº¦æ£€æŸ¥ | å­—ç¬¦æ£€æŸ¥ | å‰å¯¼é›¶æ£€æŸ¥ | èŒƒå›´æ£€æŸ¥ | ç»“æœ |
   |------|---------|----------|-----------|---------|------|
   | "172" | âœ“ (3ä½) | âœ“ (å…¨æ•°å­—) | âœ“ (æ— å‰å¯¼é›¶) | âœ“ (â‰¤255) | é€šè¿‡ |
   | "16"  | âœ“ (2ä½) | âœ“ (å…¨æ•°å­—) | âœ“ (æ— å‰å¯¼é›¶) | âœ“ (â‰¤255) | é€šè¿‡ |
   | "254" | âœ“ (3ä½) | âœ“ (å…¨æ•°å­—) | âœ“ (æ— å‰å¯¼é›¶) | âœ“ (â‰¤255) | é€šè¿‡ |
   | "1"   | âœ“ (1ä½) | âœ“ (å…¨æ•°å­—) | âœ“ (æ— å‰å¯¼é›¶) | âœ“ (â‰¤255) | é€šè¿‡ |

4. æœ€ç»ˆç»“æœï¼š
   ```
   æ‰€æœ‰éƒ¨åˆ†éªŒè¯é€šè¿‡ï¼Œè¿”å› "IPv4"
   ```

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0468_ValidateIPAddress.java](../src/main/java/L0468_ValidateIPAddress.java)

```java
public String validIPAddress(String queryIP) {
    if (queryIP == null || queryIP.length() == 0) {
        return "Neither";
    }
    
    // æ£€æŸ¥æ˜¯å¦æ˜¯ IPv4
    if (queryIP.contains(".")) {
        return validateIPv4(queryIP);
    }
    // æ£€æŸ¥æ˜¯å¦æ˜¯ IPv6
    else if (queryIP.contains(":")) {
        return validateIPv6(queryIP);
    }
    
    return "Neither";
}

private String validateIPv4(String ip) {
    // ä¸èƒ½ä»¥ . å¼€å¤´æˆ–ç»“å°¾
    if (ip.startsWith(".") || ip.endsWith(".")) {
        return "Neither";
    }
    
    // æŒ‰ . åˆ†å‰²
    String[] parts = ip.split("\\.");
    
    // IPv4 å¿…é¡»æ°å¥½æœ‰ 4 éƒ¨åˆ†
    if (parts.length != 4) {
        return "Neither";
    }
    
    // æ£€æŸ¥æ¯ä¸€éƒ¨åˆ†
    for (String part : parts) {
        // æ£€æŸ¥é•¿åº¦
        if (part.length() == 0 || part.length() > 3) {
            return "Neither";
        }
        
        // æ£€æŸ¥æ˜¯å¦åŒ…å«éæ•°å­—å­—ç¬¦
        for (char c : part.toCharArray()) {
            if (!Character.isDigit(c)) {
                return "Neither";
            }
        }
        
        // æ£€æŸ¥å‰å¯¼é›¶
        if (part.length() > 1 && part.charAt(0) == '0') {
            return "Neither";
        }
        
        // æ£€æŸ¥æ•°å€¼èŒƒå›´
        int value = Integer.parseInt(part);
        if (value < 0 || value > 255) {
            return "Neither";
        }
    }
    
    return "IPv4";
}

private String validateIPv6(String ip) {
    // ä¸èƒ½ä»¥ : å¼€å¤´æˆ–ç»“å°¾
    if (ip.startsWith(":") || ip.endsWith(":")) {
        return "Neither";
    }
    
    // æŒ‰ : åˆ†å‰²
    String[] parts = ip.split(":");
    
    // IPv6 å¿…é¡»æ°å¥½æœ‰ 8 éƒ¨åˆ†
    if (parts.length != 8) {
        return "Neither";
    }
    
    // æ£€æŸ¥æ¯ä¸€éƒ¨åˆ†
    for (String part : parts) {
        // æ£€æŸ¥é•¿åº¦
        if (part.length() == 0 || part.length() > 4) {
            return "Neither";
        }
        
        // æ£€æŸ¥æ¯ä¸ªå­—ç¬¦æ˜¯å¦åˆæ³•
        for (char c : part.toCharArray()) {
            if (!Character.isDigit(c) && 
                !(c >= 'a' && c <= 'f') && 
                !(c >= 'A' && c <= 'F')) {
                return "Neither";
            }
        }
    }
    
    return "IPv6";
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯è¾“å…¥å­—ç¬¦ä¸²çš„é•¿åº¦
  - éœ€è¦éå†æ•´ä¸ªå­—ç¬¦ä¸²è¿›è¡Œåˆ†å‰²
  - å¯¹äºæ¯ä¸ªéƒ¨åˆ†ï¼Œéœ€è¦æ£€æŸ¥æ¯ä¸ªå­—ç¬¦
  - æ‰€æœ‰æ“ä½œéƒ½æ˜¯çº¿æ€§æ—¶é—´çš„

- **ç©ºé—´å¤æ‚åº¦**ï¼šO(1)
  - åªä½¿ç”¨äº†å›ºå®šå¤§å°çš„æ•°ç»„æ¥å­˜å‚¨åˆ†å‰²åçš„éƒ¨åˆ†ï¼ˆIPv4 æœ€å¤š 4 ä¸ªéƒ¨åˆ†ï¼ŒIPv6 æœ€å¤š 8 ä¸ªéƒ¨åˆ†ï¼‰
  - å…¶ä»–å˜é‡ä½¿ç”¨çš„ç©ºé—´éƒ½æ˜¯å¸¸æ•°çº§åˆ«çš„

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 