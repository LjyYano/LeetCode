---
title: ç¯å½¢æ•°ç»„æ˜¯å¦å­˜åœ¨å¾ªç¯
date: 2025-02-12
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[ç¯å½¢æ•°ç»„æ˜¯å¦å­˜åœ¨å¾ªç¯](https://leetcode.cn/problems/circular-array-loop/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`æ•°ç»„` `åŒæŒ‡é’ˆ` `å¿«æ…¢æŒ‡é’ˆ`  
**ğŸŸ¡ éš¾åº¦**ï¼š`ä¸­ç­‰`  

å­˜åœ¨ä¸€ä¸ªä¸å« 0 çš„ ç¯å½¢ æ•°ç»„ nums ï¼Œæ¯ä¸ª nums[i] éƒ½è¡¨ç¤ºä½ç½® i çš„å‘å‰è·³è½¬æˆ–å‘åè·³è½¬æ­¥æ•°ï¼ˆå¯ä»¥æ˜¯è´Ÿæ•°ï¼‰ã€‚

ç¯å½¢æ•°ç»„æ„å‘³ç€æ•°ç»„çš„æœ«ç«¯å°†ä¼šä¸å¼€å¤´ç›¸è¿å‘ˆç¯çŠ¶ã€‚å½¢å¼ä¸Šï¼Œ nums[i] çš„ä¸‹ä¸€ä¸ªä½ç½®æ˜¯ nums[(i + nums[i]) % n] ã€‚ç¯å½¢æ•°ç»„ä¹Ÿæ„å‘³ç€å‰è¿›è¶…è¿‡æ•°ç»„çš„æœ«ç«¯ä¼šå›åˆ°å¼€å¤´ï¼Œä¹Ÿå°±æ˜¯è¯´ i % n = i ã€‚

è¿”å› true ï¼Œå¦‚æœ nums ä¸­å­˜åœ¨å¾ªç¯ï¼ˆæˆ–å‘¨æœŸï¼‰ï¼Œå‡è®¾ä» nums[i] å¼€å§‹è¿›è¡Œç§»åŠ¨æ“ä½œï¼Œå¦‚æœå­˜åœ¨å¾ªç¯ï¼Œåº”è¯¥è¿”å› true ã€‚å¦åˆ™ï¼Œè¿”å› false ã€‚

å¾ªç¯å¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š
- å¾ªç¯ä¸­çš„æ‰€æœ‰æ•°å­—æ–¹å‘ç›¸åŒï¼ˆè¦ä¹ˆå…¨æ˜¯æ­£æ•°ï¼Œè¦ä¹ˆå…¨æ˜¯è´Ÿæ•°ï¼‰
- å¾ªç¯è‡³å°‘åŒ…å«ä¸¤ä¸ªå…ƒç´ 
- å¾ªç¯ä¸­çš„æ‰€æœ‰æ•°å­—äº’ä¸ç›¸åŒ

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šnums = [2,-1,1,2,2]
è¾“å‡ºï¼štrue
è§£é‡Šï¼šå­˜åœ¨å¾ªç¯ï¼ŒæŒ‰ä¸‹æ ‡ 0 -> 2 -> 3 -> 0 ã€‚å¾ªç¯é•¿åº¦ä¸º 3 ã€‚
```

ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šnums = [-1,2]
è¾“å‡ºï¼šfalse
è§£é‡Šï¼šæŒ‰ä¸‹æ ‡ 1 -> 1 -> 1 ... çš„è¿åŠ¨æ— æ³•æ„æˆå¾ªç¯ï¼Œå› ä¸ºå¾ªç¯çš„é•¿åº¦ä¸º 1 ã€‚æ ¹æ®å®šä¹‰ï¼Œå¾ªç¯çš„é•¿åº¦å¿…é¡»å¤§äº 1 ã€‚
```

ç¤ºä¾‹ 3ï¼š
```
è¾“å…¥ï¼šnums = [-2,1,-1,-2,-2]
è¾“å‡ºï¼šfalse
è§£é‡Šï¼šæŒ‰ä¸‹æ ‡ 1 -> 2 -> 1 -> ... è¿åŠ¨æ— æ³•æ„æˆå¾ªç¯ï¼Œå› ä¸º nums[1] æ˜¯æ­£æ•°ï¼Œè€Œ nums[2] æ˜¯è´Ÿæ•°ã€‚
æ‰€æœ‰å¾ªç¯ä¸­çš„æ•°å­—å¿…é¡»æ–¹å‘ç›¸åŒã€‚
```

æç¤ºï¼š
- 1 <= nums.length <= 5000
- -1000 <= nums[i] <= 1000
- nums[i] != 0

---

## è§£é¢˜æ€è·¯

### å¿«æ…¢æŒ‡é’ˆæ³•

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
è¿™é“é¢˜å¯ä»¥ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆï¼ˆFloyd åˆ¤åœˆç®—æ³•ï¼‰æ¥è§£å†³ã€‚ä¸»è¦æ€è·¯æ˜¯ï¼š
1. å°†æ•°ç»„çœ‹ä½œä¸€ä¸ªæœ‰å‘å›¾ï¼Œæ¯ä¸ªä½ç½®å¯ä»¥è·³è½¬åˆ°ä¸‹ä¸€ä¸ªä½ç½®
2. ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ£€æµ‹æ˜¯å¦å­˜åœ¨å¾ªç¯
3. éœ€è¦é¢å¤–æ£€æŸ¥å¾ªç¯çš„æœ‰æ•ˆæ€§ï¼š
   - å¾ªç¯é•¿åº¦å¤§äº 1
   - å¾ªç¯ä¸­æ‰€æœ‰æ•°å­—æ–¹å‘ç›¸åŒ

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. éå†æ•°ç»„ä¸­çš„æ¯ä¸ªä½ç½®ä½œä¸ºèµ·ç‚¹
2. å¯¹æ¯ä¸ªèµ·ç‚¹ï¼Œä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ£€æµ‹å¾ªç¯ï¼š
   - æ…¢æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸€æ­¥
   - å¿«æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸¤æ­¥
3. åœ¨ç§»åŠ¨è¿‡ç¨‹ä¸­éœ€è¦æ£€æŸ¥ï¼š
   - ç§»åŠ¨æ–¹å‘æ˜¯å¦ä¸€è‡´ï¼ˆé€šè¿‡åˆ¤æ–­æ•°å­—çš„æ­£è´Ÿæ€§ï¼‰
   - å¾ªç¯é•¿åº¦æ˜¯å¦å¤§äº 1
4. å¯¹äºå·²ç»æ£€æŸ¥è¿‡çš„è·¯å¾„ï¼Œå°†å…¶æ ‡è®°ä¸º 0ï¼Œé¿å…é‡å¤æ£€æŸ¥

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ç¤ºä¾‹ 1ï¼šnums = [2,-1,1,2,2] ä¸ºä¾‹ï¼Œæ¼”ç¤ºæ•´ä¸ªæ£€æµ‹è¿‡ç¨‹ï¼š

1. ä»ç´¢å¼• 0 å¼€å§‹ï¼š
```
æ•°ç»„ï¼š[2,-1,1,2,2]
åˆå§‹ä½ç½®ï¼š0
```

2. å¿«æ…¢æŒ‡é’ˆç§»åŠ¨è¿‡ç¨‹ï¼š
| æ­¥éª¤ | æ…¢æŒ‡é’ˆä½ç½® | å¿«æŒ‡é’ˆä½ç½® | è¯´æ˜ |
|-----|-----------|-----------|-----|
| åˆå§‹ | 0 | 0 | å¼€å§‹ä½ç½® |
| 1 | 2 | 3 | æ…¢æŒ‡é’ˆç§»åŠ¨ä¸€æ­¥ï¼Œå¿«æŒ‡é’ˆç§»åŠ¨ä¸¤æ­¥ |
| 2 | 3 | 0 | ç»§ç»­ç§»åŠ¨ |
| 3 | 0 | 3 | æŒ‡é’ˆç›¸é‡ï¼Œæ‰¾åˆ°å¾ªç¯ï¼ |

ç§»åŠ¨è½¨è¿¹ï¼š
```
0 -> 2 -> 3 -> 0  (æ…¢æŒ‡é’ˆè·¯å¾„)
0 -> 3 -> 0 -> 3  (å¿«æŒ‡é’ˆè·¯å¾„)

æ£€æŸ¥å¾ªç¯æœ‰æ•ˆæ€§ï¼š
- å¾ªç¯é•¿åº¦ = 3 > 1 âœ…
- å¾ªç¯æ–¹å‘ï¼š[2,1,2] éƒ½æ˜¯æ­£æ•° âœ…
```

å¯¹äºç¤ºä¾‹ 2ï¼š[-1,2]
```
ä»ç´¢å¼• 0 å¼€å§‹ï¼š0 -> n-1 -> n-2 -> ... (æ— æ•ˆï¼Œæ–¹å‘ä¸ä¸€è‡´)
ä»ç´¢å¼• 1 å¼€å§‹ï¼š1 -> 1 (æ— æ•ˆï¼Œå¾ªç¯é•¿åº¦ä¸º 1)
```

å¯¹äºç¤ºä¾‹ 3ï¼š[-2,1,-1,-2,-2]
```
ä»ç´¢å¼• 1 å¼€å§‹ï¼š1 -> 2 -> 1
- è™½ç„¶å½¢æˆäº†å¾ªç¯
- ä½†æ˜¯ nums[1]=1 å’Œ nums[2]=-1 æ–¹å‘ä¸åŒ
- æ‰€ä»¥æ˜¯æ— æ•ˆå¾ªç¯
```

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0457_CircularArrayLoop.java](../src/main/java/L0457_CircularArrayLoop.java)

```java
public boolean circularArrayLoop(int[] nums) {
    int n = nums.length;
    
    // éå†æ¯ä¸ªä½ç½®ä½œä¸ºèµ·ç‚¹
    for (int i = 0; i < n; i++) {
        // å¦‚æœå½“å‰ä½ç½®å·²ç»è¢«è®¿é—®è¿‡ä¸”ä¸æ˜¯å¾ªç¯èµ·ç‚¹ï¼Œè·³è¿‡
        if (nums[i] == 0) {
            continue;
        }
        
        // ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ£€æµ‹å¾ªç¯
        int slow = i;
        int fast = getNextPosition(nums, getNextPosition(nums, i));
        
        // åˆ¤æ–­æ˜¯å¦æ˜¯åŒæ–¹å‘
        while (nums[slow] * nums[fast] > 0 && 
               nums[slow] * nums[getNextPosition(nums, fast)] > 0) {
            if (slow == fast) {
                // æ£€æŸ¥å¾ªç¯é•¿åº¦æ˜¯å¦å¤§äº 1
                if (slow != getNextPosition(nums, slow)) {
                    return true;
                }
                break;
            }
            slow = getNextPosition(nums, slow);
            fast = getNextPosition(nums, getNextPosition(nums, fast));
        }
        
        // æ ‡è®°å·²è®¿é—®çš„ä½ç½®
        int current = i;
        int value = nums[current];
        while (nums[current] * value > 0) {
            int next = getNextPosition(nums, current);
            nums[current] = 0;
            current = next;
        }
    }
    
    return false;
}

// è·å–ä¸‹ä¸€ä¸ªä½ç½®
private int getNextPosition(int[] nums, int current) {
    int n = nums.length;
    int next = ((current + nums[current]) % n + n) % n;
    return next;
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚
  - è™½ç„¶æˆ‘ä»¬æœ‰ä¸¤å±‚å¾ªç¯ï¼Œä½†æ¯ä¸ªä½ç½®æœ€å¤šè¢«è®¿é—®ä¸€æ¬¡
  - ä¸€æ—¦æŸä¸ªä½ç½®è¢«è®¿é—®è¿‡ï¼Œå°±ä¼šè¢«æ ‡è®°ä¸º 0
  - å› æ­¤æ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯çº¿æ€§çš„

- **ç©ºé—´å¤æ‚åº¦**ï¼šO(1)
  - åªä½¿ç”¨äº†å‡ ä¸ªå˜é‡æ¥å­˜å‚¨æŒ‡é’ˆå’Œä¸´æ—¶å€¼
  - æ²¡æœ‰ä½¿ç”¨é¢å¤–çš„æ•°æ®ç»“æ„
  - æ ‡è®°å·²è®¿é—®ä½ç½®æ˜¯ç›´æ¥åœ¨åŸæ•°ç»„ä¸Šè¿›è¡Œçš„

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 