---
title: å¤åŸ IP åœ°å€
date: 2025-02-09
---

## é¢˜ç›®æè¿°

**ğŸ”— é¢˜ç›®**ï¼š[å¤åŸ IP åœ°å€](https://leetcode.cn/problems/restore-ip-addresses/)  
**ğŸ·ï¸ æ ‡ç­¾**ï¼š`å­—ç¬¦ä¸²` `å›æº¯`  
**ğŸŸ¡ éš¾åº¦**ï¼š`ä¸­ç­‰`  

æœ‰æ•ˆ IP åœ°å€ æ­£å¥½ç”±å››ä¸ªæ•´æ•°ï¼ˆæ¯ä¸ªæ•´æ•°ä½äº 0 åˆ° 255 ä¹‹é—´ç»„æˆï¼Œä¸”ä¸èƒ½å«æœ‰å‰å¯¼ 0ï¼‰ï¼Œæ•´æ•°ä¹‹é—´ç”¨ '.' åˆ†éš”ã€‚
- ä¾‹å¦‚ï¼š"0.1.2.201" å’Œ "192.168.1.1" æ˜¯ æœ‰æ•ˆ IP åœ°å€ï¼Œä½†æ˜¯ "0.011.255.245"ã€"192.168.1.312" å’Œ "192.168@1.1" æ˜¯ æ— æ•ˆ IP åœ°å€ã€‚

ç»™å®šä¸€ä¸ªåªåŒ…å«æ•°å­—çš„å­—ç¬¦ä¸² s ï¼Œç”¨ä»¥è¡¨ç¤ºä¸€ä¸ª IP åœ°å€ï¼Œè¿”å›æ‰€æœ‰å¯èƒ½çš„æœ‰æ•ˆ IP åœ°å€ï¼Œè¿™äº›åœ°å€å¯ä»¥é€šè¿‡åœ¨ s ä¸­æ’å…¥ '.' æ¥å½¢æˆã€‚ä½  ä¸èƒ½ é‡æ–°æ’åºæˆ–åˆ é™¤ s ä¸­çš„ä»»ä½•æ•°å­—ã€‚ä½ å¯ä»¥æŒ‰ ä»»ä½• é¡ºåºè¿”å›ç­”æ¡ˆã€‚

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šs = "25525511135"
è¾“å‡ºï¼š["255.255.11.135","255.255.111.35"]
```

ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šs = "0000"
è¾“å‡ºï¼š["0.0.0.0"]
```

ç¤ºä¾‹ 3ï¼š
```
è¾“å…¥ï¼šs = "101023"
è¾“å‡ºï¼š["1.0.10.23","1.0.102.3","10.1.0.23","10.10.2.3","101.0.2.3"]
```

æç¤ºï¼š
- 1 <= s.length <= 20
- s ä»…ç”±æ•°å­—ç»„æˆ

---

## è§£é¢˜æ€è·¯
### å›æº¯æ³•

#### ğŸ“ æ ¸å¿ƒæ€æƒ³
æœ¬é¢˜å¯ä»¥ä½¿ç”¨å›æº¯æ³•æ¥è§£å†³ã€‚æˆ‘ä»¬éœ€è¦åœ¨å­—ç¬¦ä¸²ä¸­æ’å…¥ä¸‰ä¸ªç‚¹ï¼Œå°†å­—ç¬¦ä¸²åˆ†æˆå››ä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½å¿…é¡»æ˜¯æœ‰æ•ˆçš„ IP åœ°å€æ®µã€‚å…³é”®ç‚¹æ˜¯ï¼š

1. æ¯ä¸ª IP åœ°å€æ®µå¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š
   - æ•°å€¼èŒƒå›´åœ¨ 0-255 ä¹‹é—´
   - å¦‚æœé•¿åº¦å¤§äº 1ï¼Œä¸èƒ½ä»¥ 0 å¼€å¤´

2. ä½¿ç”¨å›æº¯æ³•å°è¯•æ‰€æœ‰å¯èƒ½çš„åˆ†å‰²æ–¹å¼ï¼š
   - æ¯æ¬¡å– 1-3 ä¸ªå­—ç¬¦ä½œä¸ºä¸€ä¸ªæ®µ
   - éªŒè¯å½“å‰æ®µæ˜¯å¦æœ‰æ•ˆ
   - é€’å½’å¤„ç†å‰©ä½™éƒ¨åˆ†

#### ğŸ› ï¸ å®ç°æ­¥éª¤
1. å¤„ç†è¾¹ç•Œæƒ…å†µï¼š
   - å¦‚æœå­—ç¬¦ä¸²é•¿åº¦å°äº 4 æˆ–å¤§äº 12ï¼Œæ— æ³•æ„æˆæœ‰æ•ˆçš„ IP åœ°å€

2. å›æº¯è¿‡ç¨‹ï¼š
   - è®°å½•å½“å‰å¤„ç†åˆ°çš„å­—ç¬¦ä½ç½®å’Œå·²ç”Ÿæˆçš„æ®µæ•°
   - å°è¯•å– 1-3 ä¸ªå­—ç¬¦ä½œä¸ºå½“å‰æ®µ
   - éªŒè¯å½“å‰æ®µæ˜¯å¦æœ‰æ•ˆ
   - é€’å½’å¤„ç†ä¸‹ä¸€æ®µ
   - å›æº¯ï¼Œæ’¤é”€å½“å‰çš„é€‰æ‹©

3. éªŒè¯ IP åœ°å€æ®µï¼š
   - æ£€æŸ¥æ˜¯å¦æœ‰å‰å¯¼é›¶
   - æ£€æŸ¥æ•°å€¼æ˜¯å¦åœ¨ 0-255 èŒƒå›´å†…

#### ğŸ§© ç¤ºä¾‹åˆ†æ
ä»¥ç¤ºä¾‹ 1 ä¸ºä¾‹ï¼Œåˆ†ææ•´ä¸ªè¿‡ç¨‹ï¼š
```
è¾“å…¥ï¼šs = "25525511135"
```

å›æº¯è¿‡ç¨‹è¡¨æ ¼è¯´æ˜ï¼š

| æ­¥éª¤ | å½“å‰ä½ç½® | å·²å¤„ç†æ®µæ•° | å½“å‰ IP | é€‰æ‹© | ç»“æœ |
|-----|---------|-----------|---------|------|------|
| 1 | 0 | 0 | "" | "2" | ç»§ç»­ |
| 2 | 1 | 1 | "2." | "5" | ç»§ç»­ |
| 3 | 2 | 2 | "2.5." | "5" | ç»§ç»­ |
| 4 | 3 | 3 | "2.5.5." | "255" | æ— æ•ˆ |
| 5 | 3 | 3 | "2.5.5." | "25" | ç»§ç»­ |
| 6 | 5 | 4 | "2.5.25." | "5" | æ— æ•ˆ |
| 7 | 2 | 2 | "2.5." | "55" | ç»§ç»­ |
| 8 | 4 | 3 | "2.55." | "11" | ç»§ç»­ |
| 9 | 6 | 4 | "2.55.11." | "135" | æœ‰æ•ˆè§£ |

è¯¦ç»†åˆ†æç¬¬ä¸€ä¸ªæœ‰æ•ˆè§£çš„ç”Ÿæˆè¿‡ç¨‹ï¼š
```
1. ç¬¬ä¸€æ®µï¼šé€‰æ‹© "255"
   - æ£€æŸ¥ï¼š0 <= 255 <= 255ï¼Œæœ‰æ•ˆ
   - å½“å‰ IPï¼š255.

2. ç¬¬äºŒæ®µï¼šé€‰æ‹© "255"
   - æ£€æŸ¥ï¼š0 <= 255 <= 255ï¼Œæœ‰æ•ˆ
   - å½“å‰ IPï¼š255.255.

3. ç¬¬ä¸‰æ®µï¼šé€‰æ‹© "11"
   - æ£€æŸ¥ï¼š0 <= 11 <= 255ï¼Œæœ‰æ•ˆ
   - å½“å‰ IPï¼š255.255.11.

4. ç¬¬å››æ®µï¼šé€‰æ‹© "135"
   - æ£€æŸ¥ï¼š0 <= 135 <= 255ï¼Œæœ‰æ•ˆ
   - æœ€ç»ˆ IPï¼š255.255.11.135
```

---

## ä»£ç å®ç°

å®Œæ•´çš„å¯è¿è¡Œä»£ç ï¼š[L0093_RestoreIPAddresses.java](../src/main/java/L0093_RestoreIPAddresses.java)

```java
public List<String> restoreIpAddresses(String s) {
    List<String> result = new ArrayList<>();
    // å¦‚æœå­—ç¬¦ä¸²é•¿åº¦å°äº 4 æˆ–å¤§äº 12ï¼Œæ— æ³•æ„æˆæœ‰æ•ˆçš„ IP åœ°å€
    if (s.length() < 4 || s.length() > 12) {
        return result;
    }
    
    // å›æº¯ç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„ IP åœ°å€
    backtrack(s, 0, 0, new StringBuilder(), result);
    return result;
}

private void backtrack(String s, int start, int segments, StringBuilder current, List<String> result) {
    // å¦‚æœå·²ç»æ‰¾åˆ°äº† 4 ä¸ªæ®µï¼Œä¸”ä½¿ç”¨å®Œäº†æ‰€æœ‰å­—ç¬¦ï¼Œåˆ™æ‰¾åˆ°ä¸€ä¸ªæœ‰æ•ˆçš„ IP åœ°å€
    if (segments == 4 && start == s.length()) {
        // å»æ‰æœ€åä¸€ä¸ªç‚¹
        result.add(current.substring(0, current.length() - 1));
        return;
    }
    
    // å¦‚æœå·²ç»æœ‰ 4 ä¸ªæ®µä½†è¿˜æœ‰å‰©ä½™å­—ç¬¦ï¼Œæˆ–è€…å­—ç¬¦ç”¨å®Œäº†ä½†è¿˜æ²¡æœ‰ 4 ä¸ªæ®µï¼Œåˆ™è¿”å›
    if (segments == 4 || start == s.length()) {
        return;
    }
    
    // è®°å½•å½“å‰ StringBuilder çš„é•¿åº¦ï¼Œç”¨äºå›æº¯
    int len = current.length();
    
    // å°è¯•å– 1 åˆ° 3 ä¸ªå­—ç¬¦ä½œä¸ºä¸€ä¸ªæ®µ
    for (int i = 1; i <= 3 && start + i <= s.length(); i++) {
        // è·å–å½“å‰æ®µçš„å­—ç¬¦ä¸²
        String segment = s.substring(start, start + i);
        // æ£€æŸ¥æ˜¯å¦æ˜¯æœ‰æ•ˆçš„ IP åœ°å€æ®µ
        if (isValidSegment(segment)) {
            // æ·»åŠ å½“å‰æ®µå’Œç‚¹
            current.append(segment).append('.');
            // é€’å½’å¤„ç†ä¸‹ä¸€æ®µ
            backtrack(s, start + i, segments + 1, current, result);
            // å›æº¯ï¼Œåˆ é™¤å½“å‰æ·»åŠ çš„æ®µå’Œç‚¹
            current.setLength(len);
        }
    }
}

private boolean isValidSegment(String segment) {
    // å¦‚æœé•¿åº¦å¤§äº 1 ä¸”ä»¥ 0 å¼€å¤´ï¼Œåˆ™æ— æ•ˆ
    if (segment.length() > 1 && segment.charAt(0) == '0') {
        return false;
    }
    // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—
    int value = Integer.parseInt(segment);
    // æ£€æŸ¥æ˜¯å¦åœ¨ 0-255 èŒƒå›´å†…
    return value >= 0 && value <= 255;
}
```

---

## å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(1)
  - è™½ç„¶ä½¿ç”¨äº†å›æº¯æ³•ï¼Œä½†ç”±äº IP åœ°å€çš„é™åˆ¶ï¼Œå®é™…çš„æœç´¢ç©ºé—´æ˜¯æœ‰é™çš„
  - IP åœ°å€åªèƒ½æœ‰ 4 æ®µï¼Œæ¯æ®µæœ€å¤š 3 ä¸ªæ•°å­—
  - è¾“å…¥å­—ç¬¦ä¸²çš„é•¿åº¦è¢«é™åˆ¶åœ¨ 12 ä»¥å†…
  - å› æ­¤æ—¶é—´å¤æ‚åº¦æ˜¯å¸¸æ•°çº§çš„

- **ç©ºé—´å¤æ‚åº¦**ï¼šO(1)
  - é€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦æœ€å¤§ä¸º 4
  - StringBuilder çš„é•¿åº¦æœ€å¤§ä¸ºè¾“å…¥å­—ç¬¦ä¸²é•¿åº¦åŠ  3ï¼ˆä¸‰ä¸ªç‚¹ï¼‰
  - ç”±äºè¾“å…¥è§„æ¨¡æœ‰é™ï¼Œç©ºé—´å¤æ‚åº¦ä¹Ÿæ˜¯å¸¸æ•°çº§çš„

---

## LeetCode é¢˜è§£

æœ¬é¢˜è§£æ˜¯ LeetCode ç³»åˆ—é¢˜è§£çš„ä¸€éƒ¨åˆ†ã€‚è¯¥ç³»åˆ—é¢˜è§£è‡´åŠ›äºå¸®åŠ©ç¨‹åºå‘˜æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡ç®—æ³•æ€ç»´ï¼Œå†…å®¹åŒ…å«è¯¦ç»†çš„è§£é¢˜æ€è·¯åˆ†æã€å›¾æ–‡å¹¶èŒ‚çš„ç¤ºä¾‹è®²è§£å’Œå®Œæ•´çš„ä»£ç å®ç°ã€‚

<img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub" width="20" style="vertical-align: middle; margin-right: 5px"> [LeetCode æœ€å…¨é¢˜è§£](https://github.com/LjyYano/LeetCode)ï¼šæŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿ Star â­ï¸ å…³æ³¨ï¼Œä¸€èµ·æ¢è®¨ç®—æ³•ä¹‹ç¾ã€‚ 